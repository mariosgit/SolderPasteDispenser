var t={};!function(){var e={};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gray",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"16px Monospace",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i(this,t),this.x=r,this.y=h,this.ctx=e,this.canvas=n,this.color=s,this.font=o,this.setPos=this.setPos.bind(this)}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"track",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvas;return t?e.addEventListener("mousemove",this.setPos):e.removeEventListener("mousemove",this.setPos),this}},{key:"setPos",value:function(t){var e=this.canvas.getBoundingClientRect();return this.x=Math.floor(t.clientX-e.left),this.y=Math.floor(t.clientY-e.top),this}},{key:"draw",value:function(){var t=this.x,e=this.y,i=this.canvas,n=this.ctx,s=this.font,o=this.color,r="X: ".concat(t,", Y: ").concat(e);n.save(),n.fillStyle=o,n.font=s;var h=t<i.width/2?20:-n.measureText(r).width-20,l=e<i.height/2?25:-18;return n.fillText(r,this.x+h,this.y+l),n.restore(),this}}]),t}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var l=function(){function t(e,i,n,s,r,h){o(this,t),this.color=e,this.lineWidth=i,this.startX=n,this.startY=s,this.endX=r,this.endY=h}return h(t,[{key:"draw",value:function(t){var e=this.color,i=this.lineWidth,n=this.startX,s=this.startY,o=this.endX,r=this.endY;t.save(),t.beginPath(),t.strokeStyle=e,t.lineWidth=i,t.moveTo(n,s),t.lineTo(o,r),t.stroke(),t.restore()}}]),t}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gray",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"DarkGray",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"16px Monospace";o(this,t),this.color=e,this.lineWidth=i,this.step=n,this.boldNth=s,this.boldColor=r,this.boldWidth=h,this.font=l,this.lines=null}return h(t,[{key:"createLines",value:function(t){for(var e=this.color,i=this.lineWidth,n=this.step,s=this.boldNth,o=this.boldColor,r=this.boldWidth,h=[],a=s*n,c=0;c<t.width;c+=n){var u=c%a==0;h.push(u?new l(o,r,c,0,c,t.height):new l(e,i,c,0,c,t.height))}for(var d=0;d<t.height;d+=n){var f=d%a==0;h.push(f?new l(o,r,0,d,t.width,d):new l(e,i,0,d,t.width,d))}this.lines=h}},{key:"drawText",value:function(t,e){var i=this.step,n=this.boldNth,s=this.boldColor,o=this.font;t.save(),t.font=o,t.fillStyle=s,t.fillText("0",1,15);for(var r=i*n;r<e.width;r+=i*n)t.fillText(r,r,15);for(var h=i*n;h<e.height;h+=i*n)t.fillText(h,0,h+15);t.restore()}},{key:"draw",value:function(t,e){this.lines||this.createLines(e),this.lines.forEach((function(e){return e.draw(t)})),this.drawText(t,e)}}]),t}();e.Mouse=s,e.Grid=a,t=e}();class e{inputQueue=[];inputLast="";constructor(){this.deviceCheck=document.getElementById("deviceCheck"),this.deviceConnect=document.getElementById("deviceConnect"),this.deviceDisconnect=document.getElementById("deviceDisconnect"),this.deviceDosome=document.getElementById("deviceDosome"),this.deviceInput=document.getElementById("deviceInput"),this.deviceInputForm=document.getElementById("deviceInputForm"),this.port=null,this.textDecoder=new TextDecoderStream,this.deviceCheck&&this.deviceConnect&&this.deviceDisconnect&&this.deviceDosome&&this.deviceInput&&this.deviceInputForm&&(this.deviceCheck.onclick=this.serialCheck.bind(this),this.deviceConnect.onclick=this.serialConnect.bind(this),this.deviceDisconnect.onclick=this.serialDisconnect.bind(this),this.deviceDosome.onclick=this.serialDosome.bind(this),this.deviceInput.onchange=this.serialInputChange.bind(this),this.deviceInputForm.onsubmit=this.serialInputForm.bind(this)),this.serialCheck()}async serialCheck(){let t=!1;return"serial"in navigator?(this.updatePorts(),navigator.serial.addEventListener("connect",(t=>{console.log(t),this.updatePorts()})),navigator.serial.addEventListener("disconnect",(t=>{console.log(t)})),t=!0):console.warn("No serial API available, try onother browser"),t}updatePorts(){navigator.serial.getPorts().then((t=>{for(let e of t){const{usbProductId:t,usbVendorId:i}=e.getInfo();console.log(`updatePorts port pid:${t} vid:${i}`)}}))}onSerialConnected(){console.log("Device: onSerialConnected")}onSerialDisconnected(){console.log("Device: onSerialDisconnected")}async serialConnect(){this.port=await navigator.serial.requestPort(),await this.port.open({baudRate:115200}).then((t=>{console.log("port opened ? ",this.port),this.port.onconnect=()=>{console.log("CONNECTED")},this.port.ondisconnect=()=>{console.log("DISCONNECTED"),this.onSerialDisconnected()},setTimeout(this.serialRead.bind(this),0),this.onSerialConnected()})).catch((t=>{console.warn(t)}))}async serialRead(){if(this.port){this.port.readable.pipeTo(this.textDecoder.writable);this.reader=this.textDecoder.readable.getReader(),setTimeout(this.serialReadon.bind(this),1)}}async serialReadon(){try{const{value:t,done:e}=await this.reader.read();if(e)this.reader.releaseLock(),console.log("serialRead - done");else{let e=!1;if(-1!=t.indexOf("\n")){const i=t.split("\n");i.length<=1&&console.error("Assertion failed ",i);for(let t=0;t<i.length-1;t++)this.inputLast+=i[t],this.inputQueue.push(this.inputLast),this.inputLast="",e=!0;this.inputLast=i[i.length-1]}else this.inputLast+=t;e&&setTimeout(this.serialCallback.bind(this),5),setTimeout(this.serialReadon.bind(this),1)}}catch(t){console.warn(t)}}serialCallback(){const t=document.getElementById("deviceLog");if(t){let e=this.inputQueue.pop();for(;e;)t.innerHTML+=`${e}<br>`,e=this.inputQueue.pop()}}serialWrite(){this.port.writable.getWriter()}async serialDisconnect(){this.port&&this.port.close().then((()=>{this.port=null,console.log("port closed")})).catch((t=>{console.warn(t)}))}async serialDosome(){let t=new TextEncoder;const e=this.port.writable.getWriter();await e.write(t.encode("hiho\n")),e.releaseLock()}async serialInputForm(t){this.deviceInput&&(t.preventDefault(),this.serialInputChange(t))}async serialInputChange(t){if(this.deviceInput)if(this.port){let t=this.deviceInput.value;if(t.length>0){let e=new TextEncoder;const i=this.port.writable.getWriter();await i.write(e.encode(`${t}\n`)),i.releaseLock()}}else console.warn("serialInputChange - no port open")}}var i,n={};
/**
 * k-d Tree JavaScript - V 1.01
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */i=function(t){function e(t,e,i){this.obj=t,this.left=null,this.right=null,this.parent=i,this.dimension=e}function i(t){this.content=[],this.scoreFunction=t}i.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,i=0;i<e;i++)if(this.content[i]==t){var n=this.content.pop();return void(i!=e-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(i):this.sinkDown(i)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var i=Math.floor((t+1)/2)-1,n=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[i]=e,this.content[t]=n,t=i}},sinkDown:function(t){for(var e=this.content.length,i=this.content[t],n=this.scoreFunction(i);;){var s=2*(t+1),o=s-1,r=null;if(o<e){var h=this.content[o],l=this.scoreFunction(h);l<n&&(r=o)}if(s<e){var a=this.content[s];this.scoreFunction(a)<(null==r?n:l)&&(r=s)}if(null==r)break;this.content[t]=this.content[r],this.content[r]=i,t=r}}},t.kdTree=function(t,n,s){var o=this;Array.isArray(t)?this.root=function t(i,n,o){var r,h,l=n%s.length;return 0===i.length?null:1===i.length?new e(i[0],l,o):(i.sort((function(t,e){return t[s[l]]-e[s[l]]})),(h=new e(i[r=Math.floor(i.length/2)],l,o)).left=t(i.slice(0,r),n+1,h),h.right=t(i.slice(r+1),n+1,h),h)}(t,0,null):function(t){o.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(o.root)}(t),this.toJSON=function(t){t||(t=this.root);var i=new e(t.obj,t.dimension,null);return t.left&&(i.left=o.toJSON(t.left)),t.right&&(i.right=o.toJSON(t.right)),i},this.insert=function(t){var i,n,o=function e(i,n){if(null===i)return n;var o=s[i.dimension];return t[o]<i.obj[o]?e(i.left,i):e(i.right,i)}(this.root,null);null!==o?(i=new e(t,(o.dimension+1)%s.length,o),n=s[o.dimension],t[n]<o.obj[n]?o.left=i:o.right=i):this.root=new e(t,0,null)},this.remove=function(t){var e;null!==(e=function e(i){if(null===i)return null;if(i.obj===t)return i;var n=s[i.dimension];return t[n]<i.obj[n]?e(i.left):e(i.right)}(o.root))&&function t(e){function i(t,e){var n,o,r,h,l;return null===t?null:(n=s[e],t.dimension===e?null!==t.left?i(t.left,e):t:(o=t.obj[n],r=i(t.left,e),h=i(t.right,e),l=t,null!==r&&r.obj[n]<o&&(l=r),null!==h&&h.obj[n]<l.obj[n]&&(l=h),l))}var n,r,h;if(null===e.left&&null===e.right)return null===e.parent?void(o.root=null):(h=s[e.parent.dimension],void(e.obj[h]<e.parent.obj[h]?e.parent.left=null:e.parent.right=null));null!==e.right?(r=(n=i(e.right,e.dimension)).obj,t(n),e.obj=r):(r=(n=i(e.left,e.dimension)).obj,t(n),e.right=e.left,e.left=null,e.obj=r)}(e)},this.nearest=function(t,e,r){var h,l,a;if(a=new i((function(t){return-t[1]})),r)for(h=0;h<e;h+=1)a.push([null,r]);for(o.root&&function i(o){function r(t,i){a.push([t,i]),a.size()>e&&a.pop()}var h,l,c,u,d=s[o.dimension],f=n(t,o.obj),m={};for(u=0;u<s.length;u+=1)u===o.dimension?m[s[u]]=t[s[u]]:m[s[u]]=o.obj[s[u]];l=n(m,o.obj),null!==o.right||null!==o.left?(i(h=null===o.right?o.left:null===o.left?o.right:t[d]<o.obj[d]?o.left:o.right),(a.size()<e||f<a.peek()[1])&&r(o,f),(a.size()<e||Math.abs(l)<a.peek()[1])&&null!==(c=h===o.left?o.right:o.left)&&i(c)):(a.size()<e||f<a.peek()[1])&&r(o,f)}(o.root),l=[],h=0;h<Math.min(e,a.content.length);h+=1)a.content[h][0]&&l.push([a.content[h][0].obj,a.content[h][1]]);return l},this.balanceFactor=function(){return function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}(o.root)/(Math.log(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(o.root))/Math.log(2))}},t.BinaryHeap=i},"function"==typeof define&&define.amd?define(["exports"],i):i(n);class s{minx=99999;miny=99999;maxx=-99999;maxy=-99999;constructor(){}update(t,e){t<this.minx&&(this.minx=t),e<this.miny&&(this.miny=e),t>this.maxx&&(this.maxx=t),e>this.maxy&&(this.maxy=e)}center(t=1){return[(this.minx+(this.maxx-this.minx)/2)*t,(this.miny+(this.maxy-this.miny)/2)*t]}zero(t=1){return[this.minx*t,this.miny*t]}size(t=1){return[(this.maxx-this.minx)*t,(this.maxy-this.miny)*t]}}class o{constructor(t,e,i){this.form=t,this.width=e,this.height=i}}class r{constructor(t,e,i){this.posX=e,this.posY=i,this.style=t}}class h{fileName="";mouseFlag=!1;mouseStartX=0;mouseStartY=0;mouseOffX=0;mouseOffY=0;zoom=6;nearest=[];constructor(t,e){this.ctx=t,this.canvas=e,this.mapStyles=new Map,this.mapPads=new Map,this.bb=new s}draw(){this.ctx.fillStyle="antiquewhite",this.ctx.strokeStyle="black",this.ctx.beginPath(),this.ctx.moveTo(-10+this.mouseOffX,0+this.mouseOffY),this.ctx.lineTo(10+this.mouseOffX,0+this.mouseOffY),this.ctx.moveTo(0+this.mouseOffX,-10+this.mouseOffY),this.ctx.lineTo(0+this.mouseOffX,10+this.mouseOffY),this.ctx.stroke(),this.ctx.strokeStyle="red";let t=this.bb.center(this.zoom);this.ctx.beginPath(),this.ctx.moveTo(t[0]-10+this.mouseOffX,t[1]+this.mouseOffY),this.ctx.lineTo(t[0]+10+this.mouseOffX,t[1]+this.mouseOffY),this.ctx.moveTo(t[0]+this.mouseOffX,t[1]-10+this.mouseOffY),this.ctx.lineTo(t[0]+this.mouseOffX,t[1]+10+this.mouseOffY),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.bb.zero(this.zoom)[0]+this.mouseOffX,this.bb.zero(this.zoom)[1]+this.mouseOffY,this.bb.size(this.zoom)[0],this.bb.size(this.zoom)[1]),this.ctx.stroke();for(let t of this.mapPads.keys()){const e=this.mapStyles.get(t),i=this.mapPads.get(t);if(e&&i){const t=e.width*this.zoom,n=e.height*this.zoom;for(let s of i.values())if("R"==e.form||"O"==e.form||"RoundRect"==e.form)this.ctx.beginPath(),this.ctx.fillRect(s.posX*this.zoom-t/2+this.mouseOffX,s.posY*this.zoom-n/2+this.mouseOffY,t,n),this.ctx.fill();else{if("C"!=e.form){console.log(`draw quatsch ${e.form}`);break}this.ctx.beginPath(),this.ctx.ellipse(s.posX*this.zoom+this.mouseOffX,s.posY*this.zoom+this.mouseOffY,t/2,t/2,0,0,2*Math.PI),this.ctx.fill()}}}this.ctx.strokeStyle="purple",this.ctx.beginPath();for(const t of this.nearest)this.ctx.moveTo((t[0].posX-5)*this.zoom+this.mouseOffX,t[0].posY*this.zoom+this.mouseOffY),this.ctx.lineTo((t[0].posX+5)*this.zoom+this.mouseOffX,t[0].posY*this.zoom+this.mouseOffY),this.ctx.moveTo(t[0].posX*this.zoom+this.mouseOffX,(t[0].posY+5)*this.zoom+this.mouseOffY),this.ctx.lineTo(t[0].posX*this.zoom+this.mouseOffX,(t[0].posY-5)*this.zoom+this.mouseOffY);this.ctx.stroke()}addPadStyle(t,e,i,n){this.mapStyles.set(t,new o(e,i,n))}addPad(t,e,i){this.mapPads.has(t)||this.mapPads.set(t,new Set);let n=this.mapPads.get(t);if(n){const s=new r(t,e,i);n.add(s),this.bb.update(e,i)}}center(){this.canvas&&(this.mouseOffX=-this.bb.center()[0]*this.zoom+this.canvas.width/2,this.mouseOffY=-this.bb.center()[1]*this.zoom+this.canvas.height/2)}retree(){try{let t=[];for(let e of this.mapPads.values())for(let i of e)t.push(i);this.tree=new(0,n.kdTree)(t,h.distance,["posX","posY"]),console.log("tree bf:",this.tree.balanceFactor())}catch(t){console.error(t)}}mouseDown(t){const e=this.ctx.getTransform();console.log(e),this.mouseStartX=t.clientX*e.a-this.mouseOffX,this.mouseStartY=t.clientY*e.d-this.mouseOffY,this.mouseFlag=!0}mouseUp(t){this.mouseFlag=!1;const e=this.ctx.getTransform();console.log(e,t),console.log("",this.canvas.height-(t.clientY-this.canvas.offsetTop),this.mouseOffY);const i=(t.clientX*e.a-this.mouseOffX)/this.zoom,n=(this.canvas.height-(t.clientY-this.canvas.offsetTop)-this.mouseOffY)/this.zoom;if(this.tree){this.nearest=this.tree.nearest({posX:i,posY:n},1);for(const t of this.nearest)console.log(`m:${i},${n} nearest:${t[0].posX},${t[0].posY}  dist:${Math.sqrt(t[1])}`)}}mouseMove(t){const e=this.ctx.getTransform();this.mouseFlag&&(this.mouseOffX=t.clientX*e.a-this.mouseStartX,this.mouseOffY=t.clientY*e.d-this.mouseStartY)}mouseWheel(t){t.deltaY>0?this.zoom*=1.1:this.zoom*=.9}static distance(t,e){return Math.pow(t.posX-e.posX,2)+Math.pow(t.posY-e.posY,2)}}const l=document.getElementsByTagName("body")[0],a=document.getElementById("uploadButton"),c=document.getElementById("padsField"),u=document.getElementById("coordsField"),d=document.getElementById("dropZone"),f=document.getElementById("canvas"),m=document.getElementById("progress"),g=document.getElementById("progressbar"),p=document.getElementById("progressCancel"),v=document.getElementsByTagName("header")[0],b=document.getElementsByTagName("footer")[0];let w,y,x,T=null,k=1,O=1,D="",Y=!1;const X=/^%FSLAX([0-9])([0-9])Y([0-9])([0-9])[*]%/,E=/^(%AD)(D[0-9]+)([A-Za-z]+)[,]([-0-9.]+)[X]?([-0-9.]+)?[X]?([-0-9.]+)?/,z=/^([DG][0-9]+)[*]/,C=/^X([-]?)([0-9]+)Y([-]?)([0-9]+)D([0-9]+)[*]/;new class extends e{constructor(){super(),this.marlinDiv=document.getElementById("Marlin"),this.marlinDiv&&(this.marlinDiv.innerHTML="Status: ?")}onSerialConnected(){console.log("Marlin: onSerialConnected"),this.marlinDiv&&(this.marlinDiv.innerHTML='Status: <span class="w3-badge w3-deep-orange">👍</span>')}onSerialDisconnected(){console.log("Marlin: onSerialDisconnected"),this.marlinDiv&&(this.marlinDiv.innerHTML="Status: 👎")}};function I(){f&&T&&(window.requestAnimationFrame(I),T.setTransform(1,0,0,-1,0,f.height),T.clearRect(0,0,f.width,f.height),y.draw(T,f),w.draw(),x&&x.draw())}function S(t){a&&c&&u&&l&&T&&m&&t.arrayBuffer().then((e=>{var i,n,s,o;i="UTF-8",n=e=>{c.innerHTML="",u.innerHTML="",d&&(d.innerText=t.name),async function(t){if(a&&c&&u&&l&&f&&T&&m){m.style.display="block",x=new h(T,f);const e=(t=t.replace(/\r/g,"")).split("\n");let i=1;for(let t of e){if(i++,Y){Y=!1;break}await P(t),g&&(g.style.width=100*i/e.length+"%")}x.retree(),m.style.display="none"}}(e)},s=new Blob([e],{type:"text/plain"}),(o=new FileReader).onload=t=>{n(t.target.result)},o.readAsText(s,i)}))}async function P(t){return new Promise((e=>{if(a&&c&&u&&l&&T&&m){const e=X.exec(t);e&&(O=parseInt(e[1]),k=parseInt(e[2]),console.log(`gerber: float digits = ${O} ${k}`));const i=E.exec(t);i&&(c.innerHTML+=`${i[2]} ${i[3]} ${i[4]} ${i[5]}<br>`,"RoundRect"==i[3]?x.addPadStyle(i[2],i[3],Math.abs(parseFloat(i[5])),Math.abs(parseFloat(i[6]))):x.addPadStyle(i[2],i[3],parseFloat(i[4]),parseFloat(i[5])));const n=z.exec(t);n&&(D=n[1]);const s=C.exec(t);if(s)if(D.startsWith("D")){let t=s[2],e=s[4];const i=O+k;for(;t.length<i;)t=`0${t}`;for(;e.length<i;)e=`0${e}`;let n=0,o=0;t=`${t.substring(0,O)}.${t.substring(O)}`,e=`${e.substring(0,O)}.${e.substring(O)}`,n=parseFloat(t),o=parseFloat(e),"-"==s[1]&&(n*=-1),"-"==s[3]&&(o*=-1),u.innerHTML+=`${D}:  x:${n} y:${o} <br>`,x.addPad(D,n,o)}else console.log(`ignoring ${D}`)}x.center(),setTimeout(e,0)}))}globalThis.accordionToggler=t=>{var e=document.getElementById(t);e?-1==e.className.indexOf("w3-show")&&-1==e.className.indexOf("w3-hide")?e.className+=" w3-show":-1!=e.className.indexOf("w3-show")?e.className=e.className.replace("w3-show","w3-hide"):e.className=e.className.replace("w3-hide","w3-show"):console.warn("accordionToggler no elem with id:",t)},document.addEventListener("DOMContentLoaded",(function(){console.log("moinsen"),a&&p&&c&&u&&l&&f?(T=f.getContext("2d"),f.addEventListener("mousemove",(t=>{x&&x.mouseMove(t),t.preventDefault()}),!1),f.addEventListener("mousedown",(t=>{x&&x.mouseDown(t),t.preventDefault()}),!1),f.addEventListener("mouseup",(t=>{x&&x.mouseUp(t),t.preventDefault()}),!1),f.addEventListener("mouseout",(t=>{x&&x.mouseUp(t),t.preventDefault()}),!1),f.addEventListener("wheel",(t=>{x&&x.mouseWheel(t),t.preventDefault()}),!1),a.onclick=()=>{var t=document.createElement("input");return t.type="file",t.click(),t.addEventListener("change",(e=>{if(console.log(e),t.files&&t.files.length>0){let e=t.files[0];console.log(e),console.log(`file: ${e.name} size:${e.size}`),S(e)}else alert("please choose a file")})),!1},p.onclick=()=>{Y=!0},l.ondrop=t=>{t.preventDefault(),console.log(t),t.dataTransfer.items?[...t.dataTransfer.items].forEach(((t,e)=>{if("file"===t.kind){const i=t.getAsFile();i&&(console.log(`… item[${e}].name = ${i.name}`),S(i))}})):[...t.dataTransfer.files].forEach(((t,e)=>{t&&(console.log(`… file[${e}].name = ${t.name}`),S(t))}))},l.ondragover=t=>{console.log("File(s) in drop zone"),t.preventDefault()},f.width=innerWidth,f.height=innerHeight-v.getBoundingClientRect().height-b.getBoundingClientRect().height-7,w=new(0,t.Mouse)(T,f),w.track(),y=new(0,t.Grid),window.requestAnimationFrame(I)):console.error("missing html elements !")})),window.addEventListener("resize",(t=>{console.log(`resize: ${t}`),f&&v&&b&&(f.width=innerWidth,f.height=innerHeight-v.getBoundingClientRect().height-b.getBoundingClientRect().height-7,w.draw(),y.draw(T,f))}));
//# sourceMappingURL=index.383d5b28.js.map
