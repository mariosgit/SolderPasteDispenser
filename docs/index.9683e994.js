var t,e,s={};!function(){var t={};function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(s,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gray",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"16px Monospace",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(this,t),this.x=r,this.y=l,this.ctx=s,this.canvas=i,this.color=o,this.font=n,this.setPos=this.setPos.bind(this)}return function(t,e,s){e&&i(t.prototype,e),s&&i(t,s)}(t,[{key:"track",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvas;return t?e.addEventListener("mousemove",this.setPos):e.removeEventListener("mousemove",this.setPos),this}},{key:"setPos",value:function(t){var e=this.canvas.getBoundingClientRect();return this.x=Math.floor(t.clientX-e.left),this.y=Math.floor(t.clientY-e.top),this}},{key:"draw",value:function(){var t=this.x,e=this.y,s=this.canvas,i=this.ctx,o=this.font,n=this.color,r="X: ".concat(t,", Y: ").concat(e);i.save(),i.fillStyle=n,i.font=o;var l=t<s.width/2?20:-i.measureText(r).width-20,h=e<s.height/2?25:-18;return i.fillText(r,this.x+l,this.y+h),i.restore(),this}}]),t}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,s){return e&&r(t.prototype,e),s&&r(t,s),t}var h=function(){function t(e,s,i,o,r,l){n(this,t),this.color=e,this.lineWidth=s,this.startX=i,this.startY=o,this.endX=r,this.endY=l}return l(t,[{key:"draw",value:function(t){var e=this.color,s=this.lineWidth,i=this.startX,o=this.startY,n=this.endX,r=this.endY;t.save(),t.beginPath(),t.strokeStyle=e,t.lineWidth=s,t.moveTo(i,o),t.lineTo(n,r),t.stroke(),t.restore()}}]),t}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gray",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"DarkGray",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"16px Monospace";n(this,t),this.color=e,this.lineWidth=s,this.step=i,this.boldNth=o,this.boldColor=r,this.boldWidth=l,this.font=h,this.lines=null}return l(t,[{key:"createLines",value:function(t){for(var e=this.color,s=this.lineWidth,i=this.step,o=this.boldNth,n=this.boldColor,r=this.boldWidth,l=[],a=o*i,c=0;c<t.width;c+=i){var d=c%a==0;l.push(d?new h(n,r,c,0,c,t.height):new h(e,s,c,0,c,t.height))}for(var u=0;u<t.height;u+=i){var m=u%a==0;l.push(m?new h(n,r,0,u,t.width,u):new h(e,s,0,u,t.width,u))}this.lines=l}},{key:"drawText",value:function(t,e){var s=this.step,i=this.boldNth,o=this.boldColor,n=this.font;t.save(),t.font=n,t.fillStyle=o,t.fillText("0",1,15);for(var r=s*i;r<e.width;r+=s*i)t.fillText(r,r,15);for(var l=s*i;l<e.height;l+=s*i)t.fillText(l,0,l+15);t.restore()}},{key:"draw",value:function(t,e){this.lines||this.createLines(e),this.lines.forEach((function(e){return e.draw(t)})),this.drawText(t,e)}}]),t}();t.Mouse=o,t.Grid=a,s=t}();class i{}class o{constructor(t,e,s){this.obj=t,this.left=null,this.right=null,this.parent=s,this.dimension=e}}class t{constructor(t,e,s,i){this._kdTreeObjectType=t,this.points=e,this.metric=s,this.dimensions=i,Array.isArray(e)?this.root=this.buildTree(e,0,null):this.loadTree(e)}buildTree(t,e,s){var i,n,r=e%this.dimensions.length;if(0===t.length)return null;if(1===t.length)return new o(t[0],r,s);for(t.sort(((t,e)=>t[this.dimensions[r]]-e[this.dimensions[r]])),i=Math.floor(t.length/2);i>0;){let e=i-1;if(t[i][this.dimensions[r]]!==t[e][this.dimensions[r]])break;i-=1}return(n=new o(t[i],r,s)).left=this.buildTree(t.slice(0,i),e+1,n),n.right=this.buildTree(t.slice(i+1),e+1,n),n}loadTree(t){this.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(this.root)}toJSON(t=this.root){if(null===t)return null;var e=new o(t.obj,t.dimension,null);return t.left&&(e.left=this.toJSON(t.left)),t.right&&(e.right=this.toJSON(t.right)),e}toArray(t=this.root){let e=[];return null===t||(t.left&&(e.push(t.left.obj),e=[...e,...this.toArray(t.left)]),t.right&&(e.push(t.right.obj),e=[...e,...this.toArray(t.right)])),e}innerSearch(t,e,s){if(null===e)return s;var i=this.dimensions[e.dimension];return t[i]<e.obj[i]?this.innerSearch(t,e.left,e):this.innerSearch(t,e.right,e)}insert(t){var e,s,i=this.innerSearch(t,this.root,null);null!==i?(e=new o(t,(i.dimension+1)%this.dimensions.length,i),t[s=this.dimensions[i.dimension]]<i.obj[s]?i.left=e:i.right=e):this.root=new o(t,0,null)}nodeSearch(t,e){if(null===e)return null;if(e.obj===t)return e;this.metric(e.obj,t);var s=this.dimensions[e.dimension];return t[s]<e.obj[s]?this.nodeSearch(t,e.left):this.nodeSearch(t,e.right)}findMin(t,e){var s,i,o,n,r;return null===t?null:(s=this.dimensions[e],t.dimension===e?null!==t.left?this.findMin(t.left,e):t:(i=t.obj[s],o=this.findMin(t.left,e),n=this.findMin(t.right,e),r=t,null!==o&&o.obj[s]<i&&(r=o),null!==n&&n.obj[s]<r.obj[s]&&(r=n),r))}findMax(t,e){var s,i,o,n=null,r=null;return s=this.dimensions[e],t.dimension===e?null!==t.left?this.findMax(t.left,e):t:(i=t.obj[s],t.left&&(n=this.findMax(t.left,e)),t.right&&(r=this.findMax(t.right,e)),o=t,null!==n&&n.obj[s]>i&&(o=n),null!==r&&r.obj[s]>o.obj[s]&&(o=r),o)}removeNode(t){var e,s,i;if(null!==t)return null===t.left&&null===t.right?null===t.parent?void(this.root=null):(i=this.dimensions[t.parent.dimension],void(t.obj[i]<=t.parent.obj[i]?t.parent.left=null:t.parent.right=null)):void(null!==t.right?(s=(e=this.findMin(t.right,t.dimension)).obj,this.removeNode(e),t.obj=s):null!==t.left&&(s=(e=this.findMin(t.left,t.dimension)).obj,this.removeNode(e),t.right=t.left,t.left=null,t.obj=s))}remove(t){var e;if(null===(e=this.nodeSearch(t,this.root)))return console.warn("kdTree:remove:kack'n'shit"),!1;const s=this.toArray(e);let i=this.buildTree(s,e.dimension,e.parent);return e.parent?e.parent.left===e?e.parent.left=i:e.parent.right===e&&(e.parent.right=i):this.root=i,!0}nearestSearch(t,e){let s,i=this.dimensions[e.dimension],o=this.metric(t.point,e.obj),n=new this._kdTreeObjectType;var r;let l,h;const a=(e,s)=>{t.bestNodes.push([e,s]),t.bestNodes.size()>t.maxNodes&&t.bestNodes.pop()};for(h=0;h<this.dimensions.length;h+=1)h===e.dimension?n[this.dimensions[h]]=t.point[this.dimensions[h]]:n[this.dimensions[h]]=e.obj[this.dimensions[h]];r=this.metric(n,e.obj),null!==e.right||null!==e.left?(s=null===e.right?e.left:null===e.left?e.right:t.point[i]<e.obj[i]?e.left:e.right,this.nearestSearch(t,s),(t.bestNodes.size()<t.maxNodes||o<t.bestNodes.peek()[1])&&a(e,o),(t.bestNodes.size()<t.maxNodes||Math.abs(r)<t.bestNodes.peek()[1])&&(l=s===e.left?e.right:e.left,null!==l&&this.nearestSearch(t,l))):(t.bestNodes.size()<t.maxNodes||o<t.bestNodes.peek()[1])&&a(e,o)}nearest(t,s,i){let o,n,r=[];if(n=new e((t=>-t[1])),i)for(console.log("kdTree:nearest, maxnodes",s),o=0;o<s;o+=1)n.push([null,i]);for(this.root&&this.nearestSearch({point:t,bestNodes:n,maxNodes:s},this.root),r=[],o=0;o<Math.min(s,n.content.length);o+=1)n.content[o][0]&&r.push([n.content[o][0].obj,n.content[o][1]]);return r}balanceFactor(){const t=e=>null===e?0:Math.max(t(e.left),t(e.right))+1,e=t=>null===t?0:e(t.left)+e(t.right)+1;return t(this.root)/(Math.log(e(this.root))/Math.log(2))}}class e{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.bubbleUp(this.content.length-1)}pop(){var t=this.content[0],e=this.content.pop();return e&&this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t}peek(){return this.content[0]}remove(t){for(var e=this.content.length,s=0;s<e;s++)if(this.content[s]==t){var i=this.content.pop();return void(i&&s!=e-1&&(this.content[s]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(s):this.sinkDown(s)))}throw new Error("kdNode not found.")}size(){return this.content.length}bubbleUp(t){for(var e=this.content[t];t>0;){var s=Math.floor((t+1)/2)-1,i=this.content[s];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[s]=e,this.content[t]=i,t=s}}sinkDown(t){for(var e=this.content.length,s=this.content[t],i=this.scoreFunction(s);;){var o=2*(t+1),n=o-1,r=null;if(n<e){var l=this.content[n],h=this.scoreFunction(l);h<i&&(r=n)}if(o<e){var a=this.content[o];this.scoreFunction(a)<(null==r?i:h)&&(r=o)}if(null==r)break;this.content[t]=this.content[r],this.content[r]=s,t=r}}}class n{inputLast="";inputQueue=[];constructor(){this.deviceCheck=document.getElementById("deviceCheck"),this.deviceConnect=document.getElementById("deviceConnect"),this.deviceDisconnect=document.getElementById("deviceDisconnect"),this.deviceInput=document.getElementById("deviceInput"),this.deviceInputForm=document.getElementById("deviceInputForm"),this.deviceInfo=document.getElementById("deviceInfo"),this.deviceLog=document.getElementById("deviceLog"),this.deviceSerial=document.getElementById("deviceSerial"),this.port=null,this.textDecoder=new TextDecoderStream,this.deviceCheck&&this.deviceConnect&&this.deviceDisconnect&&this.deviceInput&&this.deviceInputForm&&(this.deviceCheck.onclick=this.serialCheck.bind(this),this.deviceConnect.onclick=this.serialConnect.bind(this),this.deviceDisconnect.onclick=this.serialDisconnect.bind(this),this.deviceInputForm.onsubmit=this.serialInputForm.bind(this)),this.serialCheck()}async serialConnect(){navigator.serial.requestPort().then((t=>{console.log("serialConnect",t),this.serialPortOpen(t)})).catch((t=>{this.serialError(t)}))}async serialConnectDevice(t,e){for(let s of this.ports){console.log("serialConnectDevice: serial available, ports: ",s.getInfo());const{usbProductId:i,usbVendorId:o}=s.getInfo();if(i==e&&o==t){this.serialPortOpen(s);break}}}async serialDisconnect(){this.port&&this.port.close().then((()=>{this.port=null,console.log("port closed")})).catch((t=>{console.warn(t)}))}async serialWriteWait(t,e=1e4){return this.inputQueue=[],new Promise((async(s,i)=>{if(this.port)try{this.serialWrite(t);let o=!1;const n=10;let r=e;for(;!(o||(o=await this.serialAvail(n),r-=n,r<=0)););if(this.inputQueue.length>0){s(this.inputQueue.pop())}else i("timeout")}catch(t){i("busy")}else i("disconnected")}))}serialInputForm(t){this.deviceInput&&(t.preventDefault(),this.serialInputChange(t))}async serialInputChange(t){if(this.deviceInput)if(this.port){let t=this.deviceInput.value;t.length>0&&this.serialWrite(t)}else console.warn("serialInputChange - no port open")}async serialCheck(){let t=!1;return"serial"in navigator?(this.updatePorts(),navigator.serial.addEventListener("connect",(t=>{console.log("serialCheck:connect",t),this.updatePorts()})),navigator.serial.addEventListener("disconnect",(t=>{console.log("serialCheck:disconnect",t)})),t=!0):this.serialError("This browser does not support the serial port. Connection to device impossible! Use Chrome!"),t}updatePorts(){navigator.serial.getPorts().then((t=>{console.log("updatePorts:",t),this.ports=t;let e="";for(let s of t){console.log("serial available, ports: ",s.getInfo());const{usbProductId:t,usbVendorId:i}=s.getInfo();console.log(`updatePorts port pid:${t} vid:${i}`),e+=`<div class="w3-container"><i class="fa-solid fa-microchip"></i> pid:${t} vid:${i} <button class="w3-btn w3-round w3-light-grey w3-tiny" id="${i}-${t}"><i class="fa fa-plug"></i> connect </button></div>`}if(this.deviceInfo){this.deviceInfo.innerHTML=e;const t=this.deviceInfo.getElementsByTagName("button");for(const e of t)e.onclick=()=>{const t=e.id.split("-");console.log(t),this.serialConnectDevice(parseInt(t[0]),parseInt(t[1]))}}!this.deviceConnect||null!=this.ports&&0!=this.ports.length||(this.deviceConnect.className=this.deviceConnect.className.replace("w3-hide","w3-show"))}))}serialPortOpen(t){t.onconnect=()=>{console.log("CONNECTED")},t.ondisconnect=()=>{console.log("DISCONNECTED"),this.onSerialDisconnected&&this.onSerialDisconnected()},t.open({baudRate:25e4}).then((e=>{this.port=t,this.deviceLog&&(this.deviceLog.innerHTML="connected<br>"),console.log("port opened ? ",this.port),this.onSerialConnected&&this.onSerialConnected(),setTimeout(this.serialRead.bind(this),0)})).catch((t=>{this.serialError(t.toString())}))}serialError(t){console.warn("serialError",t),this.deviceLog&&(this.deviceLog.innerHTML=`<span class="w3-red">${t}</span><br>`)}async serialRead(){if(this.port){this.port.readable.pipeTo(this.textDecoder.writable);this.reader=this.textDecoder.readable.getReader(),setTimeout(this.serialReadon.bind(this),1)}}async serialReadon(){try{const{value:t,done:e}=await this.reader.read();if(e)this.reader.releaseLock(),console.log("serialRead - done");else{let e=!1;if(-1!=t.indexOf("\n")){const s=t.split("\n");s.length<=1&&console.error("Assertion failed ",s);for(let t=0;t<s.length-1;t++)this.inputLast+=s[t],this.inputQueue.push(this.inputLast),this.serialLog(this.inputLast,!0),this.inputLast="",e=!0;this.inputLast=s[s.length-1]}else this.inputLast+=t;e&&setTimeout(this.serialCallback.bind(this),5),setTimeout(this.serialReadon.bind(this),1)}}catch(t){console.warn(t),this.serialError(t.toString())}}serialCallback(){}async serialWrite(t){this.serialLog(t,!1);let e=new TextEncoder;const s=this.port.writable.getWriter();await s.write(e.encode(`${t}\n`)),s.releaseLock()}serialAvail(t=10){return new Promise((e=>{this.inputQueue.length>0?e(!0):setTimeout((()=>{e(!1)}),t)}))}serialLog(t,e){if(this.deviceSerial){for(;this.deviceSerial.childElementCount>20;){let t=this.deviceSerial.firstChild;t&&this.deviceSerial.removeChild(t)}this.deviceSerial.innerHTML+=e?`<div><i class="fa-solid fa-arrow-right-to-bracket"></i> ${t}</div>`:`<div><i class="fa-solid fa-arrow-up-right-from-square"></i> ${t}</div>`,globalThis.resize()}}}class r{minx=99999;miny=99999;maxx=-99999;maxy=-99999;constructor(){}updateFromPad(t){this.update(t.posX,t.posY)}update(t,e){t<this.minx&&(this.minx=t),e<this.miny&&(this.miny=e),t>this.maxx&&(this.maxx=t),e>this.maxy&&(this.maxy=e)}center(t=1){return[(this.minx+(this.maxx-this.minx)/2)*t,(this.miny+(this.maxy-this.miny)/2)*t]}zero(t=1){return[this.minx*t,this.miny*t]}size(t=1){return[(this.maxx-this.minx)*t,(this.maxy-this.miny)*t]}diagonal(t=1){const e=this.size(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1])}inside(t){return t.posX>=this.minx&&t.posX<=this.maxx&&t.posY>=this.miny&&t.posY<=this.maxy}}class l{constructor(t,e,s){this.form=t,this.width=e,this.height=s}}class h{constructor(t,e,s){this.posX=e,this.posY=s,this.style=t}asTuple(){return[this.posX,this.posY]}}class a extends i{fileName="";mouseFlag=!1;mouseStartX=0;mouseStartY=0;mouseOffX=0;mouseOffY=0;zoom=5;nearest=[];constructor(){super(),this.mapStyles=new Map,this.mapPads=new Map,this.bbPcb=new r,this.bbZero=new r,this.bbSelection=new r}setCanvas(t,e){this.ctx=t,this.canvas=e}setZero(){let t=!1;this.bbZero=this.bbSelection,t=!0,console.log(`Pcb:setZero: ${this.bbZero.zero()}`)}getZero(){return this.bbZero.zero()}getSelected(){let t=[];for(let e of this.nearest)e.length>0&&t.push(e[0]);return t}getSelectedZero(){return this.bbSelection.zero()}getPadCount(){let t=0;for(let e of this.mapPads)t+=e[1].size;return t}zoomToFit(t){let e=this.bbPcb.size(),s=t[0]/e[0],i=t[1]/e[1];this.zoom=.9*(s>i?i:s),console.log(`Pcb:zoomToFit zoom ${this.zoom}`,e),this.center()}center(){this.canvas&&(this.mouseOffX=-this.bbPcb.center()[0]*this.zoom+this.canvas.width/2,this.mouseOffY=-this.bbPcb.center()[1]*this.zoom+this.canvas.height/2)}addPadStyle(t,e,s,i){this.mapStyles.set(t,new l(e,s,i))}addPad(t,e,s){this.mapPads.has(t)||this.mapPads.set(t,new Set);let i=this.mapPads.get(t);if(i){const o=new h(t,e,s);i.add(o),this.bbPcb.update(e,s)}}retree(){try{let e=[];for(let t of this.mapPads.values())for(let s of t)e.push(s);this.tree=new t(a,e,a.distance,["posX","posY"]),console.log("tree bf:",this.tree.balanceFactor())}catch(t){console.error(t)}}mouseDown(t){const e=this.ctx.getTransform();if(0==t.button){const s=(t.clientX*e.a-this.mouseOffX)/this.zoom,i=(this.canvas.height-(t.clientY-this.canvas.offsetTop)-this.mouseOffY)/this.zoom;this.mouseStartX=s,this.mouseStartY=i,this.mouseSelectX=s,this.mouseSelectY=i,this.mouseSelect=!0}0!=t.button&&(this.mouseStartX=t.clientX*e.a-this.mouseOffX,this.mouseStartY=t.clientY*e.d-this.mouseOffY,this.mouseFlag=!0)}mouseUp(t){const e=this.ctx.getTransform();if(0!=t.button&&(this.mouseFlag=!1),0==t.button){this.mouseSelect=!1;const s=(t.clientX*e.a-this.mouseOffX)/this.zoom,i=(this.canvas.height-(t.clientY-this.canvas.offsetTop)-this.mouseOffY)/this.zoom;this.mouseSelectX=s,this.mouseSelectY=i,this.bbSelection=new r,this.bbSelection.update(this.mouseStartX,this.mouseStartY),this.bbSelection.update(this.mouseSelectX,this.mouseSelectY);let o=new h("",this.bbSelection.center()[0],this.bbSelection.center()[1]);if(this.tree){let e=[],s=this.bbSelection.diagonal();if(s<.1)e=this.tree.nearest(o,1,s),this.nearest=e;else{s=s/2*(s/2),e=this.tree.nearest(o,this.getPadCount(),s),t.shiftKey||(this.nearest=[]);for(const t of e)this.bbSelection.inside(t[0])&&this.nearest.push(t)}let i=new r;for(const t of this.nearest)i.updateFromPad(t[0]);this.bbSelection=i,console.log(`Pcb:mouseUp selection found #${e.length}`)}}}mouseMove(t){const e=this.ctx.getTransform();if(this.mouseFlag&&(this.mouseOffX=t.clientX*e.a-this.mouseStartX,this.mouseOffY=t.clientY*e.d-this.mouseStartY),this.mouseSelect){const s=(t.clientX*e.a-this.mouseOffX)/this.zoom,i=(this.canvas.height-(t.clientY-this.canvas.offsetTop)-this.mouseOffY)/this.zoom;this.mouseSelectX=s,this.mouseSelectY=i}}mouseWheel(t){this.ctx.getTransform();t.deltaY>0?this.zoom*=1.1:this.zoom*=.9}mouseOut(t){}static distance(t,e){return(t.posX-e.posX)*(t.posX-e.posX)+(t.posY-e.posY)*(t.posY-e.posY)}draw(){this.ctx.fillStyle="antiquewhite",this.ctx.strokeStyle="red";let t=this.bbPcb.center(this.zoom);this.ctx.beginPath(),this.ctx.moveTo(t[0]-10+this.mouseOffX,t[1]+this.mouseOffY),this.ctx.lineTo(t[0]+10+this.mouseOffX,t[1]+this.mouseOffY),this.ctx.moveTo(t[0]+this.mouseOffX,t[1]-10+this.mouseOffY),this.ctx.lineTo(t[0]+this.mouseOffX,t[1]+10+this.mouseOffY),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.bbPcb.zero(this.zoom)[0]+this.mouseOffX,this.bbPcb.zero(this.zoom)[1]+this.mouseOffY,this.bbPcb.size(this.zoom)[0],this.bbPcb.size(this.zoom)[1]),this.ctx.stroke();for(let t of this.mapPads.keys()){const e=this.mapStyles.get(t),s=this.mapPads.get(t);if(e&&s){const t=e.width*this.zoom,i=e.height*this.zoom;for(let o of s.values())if("R"==e.form||"O"==e.form||"RoundRect"==e.form)this.ctx.beginPath(),this.ctx.fillRect(o.posX*this.zoom-t/2+this.mouseOffX,o.posY*this.zoom-i/2+this.mouseOffY,t,i),this.ctx.fill();else{if("C"!=e.form){console.log(`draw quatsch ${e.form}`);break}this.ctx.beginPath(),this.ctx.ellipse(o.posX*this.zoom+this.mouseOffX,o.posY*this.zoom+this.mouseOffY,t/2,t/2,0,0,2*Math.PI),this.ctx.fill()}}}this.ctx.strokeStyle="purple",this.ctx.beginPath();let e=.5;for(const t of this.nearest)this.ctx.moveTo((t[0].posX-e)*this.zoom+this.mouseOffX,t[0].posY*this.zoom+this.mouseOffY),this.ctx.lineTo((t[0].posX+e)*this.zoom+this.mouseOffX,t[0].posY*this.zoom+this.mouseOffY),this.ctx.moveTo(t[0].posX*this.zoom+this.mouseOffX,(t[0].posY+e)*this.zoom+this.mouseOffY),this.ctx.lineTo(t[0].posX*this.zoom+this.mouseOffX,(t[0].posY-e)*this.zoom+this.mouseOffY);this.ctx.stroke();let s=[0,0];this.bbSelection&&(e=2*this.zoom,s=this.bbSelection.zero(this.zoom),this.ctx.beginPath(),this.ctx.moveTo(s[0]-e+this.mouseOffX,s[1]+this.mouseOffY),this.ctx.lineTo(s[0]+e+this.mouseOffX,s[1]+this.mouseOffY),this.ctx.moveTo(s[0]+this.mouseOffX,s[1]-e+this.mouseOffY),this.ctx.lineTo(s[0]+this.mouseOffX,s[1]+e+this.mouseOffY),this.ctx.stroke()),this.ctx.strokeStyle="black",s=this.bbZero.center(this.zoom),this.ctx.beginPath(),this.ctx.moveTo(-e+this.mouseOffX,this.mouseOffY),this.ctx.lineTo(+e+this.mouseOffX,this.mouseOffY),this.ctx.moveTo(this.mouseOffX,-e+this.mouseOffY),this.ctx.lineTo(this.mouseOffX,+e+this.mouseOffY),this.ctx.stroke(),this.ctx.strokeStyle="black",s=this.bbZero.zero(this.zoom),this.ctx.beginPath(),this.ctx.moveTo(s[0]-e+this.mouseOffX,s[1]+this.mouseOffY),this.ctx.lineTo(s[0]+e+this.mouseOffX,s[1]+this.mouseOffY),this.ctx.moveTo(s[0]+this.mouseOffX,s[1]-e+this.mouseOffY),this.ctx.lineTo(s[0]+this.mouseOffX,s[1]+e+this.mouseOffY),this.ctx.stroke(),this.mouseSelect&&(this.ctx.strokeStyle="purple",this.ctx.beginPath(),this.ctx.moveTo(this.mouseStartX*this.zoom+this.mouseOffX,this.mouseStartY*this.zoom+this.mouseOffY),this.ctx.lineTo(this.mouseSelectX*this.zoom+this.mouseOffX,this.mouseStartY*this.zoom+this.mouseOffY),this.ctx.lineTo(this.mouseSelectX*this.zoom+this.mouseOffX,this.mouseSelectY*this.zoom+this.mouseOffY),this.ctx.lineTo(this.mouseStartX*this.zoom+this.mouseOffX,this.mouseSelectY*this.zoom+this.mouseOffY),this.ctx.lineTo(this.mouseStartX*this.zoom+this.mouseOffX,this.mouseStartY*this.zoom+this.mouseOffY),this.ctx.stroke())}}let c;var d;(d=c||(c={}))[d.Undefined=1]="Undefined",d[d.Ready=2]="Ready",d[d.Busy=3]="Busy",d[d.NC=4]="NC";class u{constructor(t){this.pcb=t}}class m extends u{reNumFormat=/^%FSLAX([0-9])([0-9])Y([0-9])([0-9])[*]%/;reMatchPad=/^(%AD)(D[0-9]+)([A-Za-z]+)[,]([-0-9.]+)[X]?([-0-9.]+)?[X]?([-0-9.]+)?/;reMatchPadCoordInit=/^([DG][0-9]+)[*]/;reMatchPadCoord=/^X([-]?)([0-9]+)Y([-]?)([0-9]+)D([0-9]+)[*]/;_cancel=!1;floatFracts=1;floatDezis=1;lastPad="";constructor(t){super(t)}parseFile(t){return new Promise((e=>{t.arrayBuffer().then((t=>{var s,i,o,n;s="UTF-8",i=t=>{this.processGerberText(t).finally((()=>{e()}))},o=new Blob([t],{type:"text/plain"}),(n=new FileReader).onload=t=>{t.target&&i(t.target.result)},n.readAsText(o,s)}))}))}cancel(){this._cancel=!0}async processGerberText(t){const e=(t=t.replace(/\r/g,"")).split("\n");let s=1;for(let t of e){if(s++,this._cancel){this._cancel=!1;break}await this.processGerberLine(t),this.processCB&&this.processCB(100*s/e.length)}this.pcb.retree()}async processGerberLine(t){return new Promise((e=>{const s=this.reNumFormat.exec(t);s&&(this.floatDezis=parseInt(s[1]),this.floatFracts=parseInt(s[2]),console.log(`gerber: float digits = ${this.floatDezis} ${this.floatFracts}`));const i=this.reMatchPad.exec(t);i&&(this.padsField&&(this.padsField.innerHTML+=`${i[2]} ${i[3]} ${i[4]} ${i[5]}<br>`),"RoundRect"==i[3]?this.pcb.addPadStyle(i[2],i[3],Math.abs(parseFloat(i[5])),Math.abs(parseFloat(i[6]))):this.pcb.addPadStyle(i[2],i[3],parseFloat(i[4]),parseFloat(i[5])));const o=this.reMatchPadCoordInit.exec(t);o&&(this.lastPad=o[1]);const n=this.reMatchPadCoord.exec(t);if(n)if(this.lastPad.startsWith("D")){let t=n[2],e=n[4];const s=this.floatDezis+this.floatFracts;for(;t.length<s;)t=`0${t}`;for(;e.length<s;)e=`0${e}`;let i=0,o=0;t=`${t.substring(0,this.floatDezis)}.${t.substring(this.floatDezis)}`,e=`${e.substring(0,this.floatDezis)}.${e.substring(this.floatDezis)}`,i=parseFloat(t),o=parseFloat(e),"-"==n[1]&&(i*=-1),"-"==n[3]&&(o*=-1),this.coordsField&&(this.coordsField.innerHTML+=`${this.lastPad}:  x:${i} y:${o} <br>`),this.pcb.addPad(this.lastPad,i,o)}else console.log(`ignoring ${this.lastPad}`);this.pcb.center(),setTimeout(e,0)}))}}const f=document.getElementsByTagName("body")[0],g=document.getElementById("messageElem"),b=document.getElementById("uploadButton"),p=document.getElementById("padsField"),v=document.getElementById("Coords"),w=document.getElementById("coordsField"),y=document.getElementById("dropZone"),x=document.getElementById("canvas"),T=document.getElementById("debug"),S=document.getElementById("progress"),P=document.getElementById("progressbar"),B=document.getElementById("contextMenu"),z=document.getElementById("progressCancel"),k=document.getElementById("menuSetZero"),X=document.getElementById("menuMoveTo"),Y=document.getElementById("menuMoveAll"),O=document.getElementById("menuBlob"),E=document.getElementById("main"),C=document.getElementById("openSidebar"),I=document.getElementsByTagName("header")[0],M=document.getElementById("footer");let N,D,W,F,L=null,$=new class extends n{zero=[0,0];constructor(){super(),this.marlinDiv=document.getElementById("Marlin"),this.initHtml()}setZero(t){this.zero=t,this.onBtnAbs().then((()=>{this.serialWriteWait("G92 X0 Y0 Z0").then((()=>{this.onBtnPos()}))}))}moveTo(t,e,s,i){let o="G0 ";null!=t&&(o+=`X${t-this.zero[0]} `),null!=e&&(o+=`Y${e-this.zero[1]} `),null!=s&&(o+=`Z${s} `),this.serialWriteWait(o).then((()=>{this.onBtnPos()}))}async moveToAll(e,s){console.log("Marlin:moveToAll",e.length),console.log(e);const i=new t(a,e,a.distance,["posX","posY"]);let o=new h("",s[0],s[1]),n=i.nearest(o,1),r=n[0][0],l=[];this.onBtnAbs().then((async()=>{try{for(let t=0;t<e.length;t++){n=i.nearest(r,1),r=n[0][0],l.push(r);let t="G0 ";t+=`X${r.posX-this.zero[0]} `,t+=`Y${r.posY-this.zero[1]} `;try{await this.serialWriteWait(t)}catch(t){}i.remove(r)||console.warn("Marlin:moveToAll NOT removed pad, thas bad :(",r)}for(let t of l)console.log("Marlin:moveToAll",t)}catch(t){console.warn("Marlin:moveToAll: failed",t)}}))}blob(){this.onBtnAbs().then((()=>{this.serialWriteWait("M83").then((()=>{this.serialWriteWait("G0 Z3").then((()=>{this.serialWriteWait("G0 E10").then((()=>{this.serialWriteWait("G0 Z0").then((()=>{this.serialWriteWait("G0 Z3")}))}))}))}))}))}onSerialConnected(){console.log("Marlin: onSerialConnected"),this.setStatus(c.Ready),this.marlinDivStatus&&this.marlinDivCommands&&(this.setStatus(c.Ready),this.marlinDivCommands.className=this.marlinDivCommands.className.replace("w3-hide","w3-show")),setTimeout((()=>{this.onBtnCold().then((()=>{this.onBtnRel().then((()=>{this.onBtnPos().then((()=>{console.log("Marlin: onSerialConnected init sequence finished")}))}))}))}),3e3)}onSerialDisconnected(){console.log("Marlin: onSerialDisconnected"),this.marlinDivStatus&&this.marlinDivCommands&&(this.setStatus(c.NC),this.marlinDivCommands.className=this.marlinDivCommands.className.replace("w3-show","w3-hide"))}async serialWriteWait(t,e=1e4){return new Promise((async(s,i)=>{this.setStatus(c.Busy),super.serialWriteWait(t,e).then((t=>{s(t)})).catch((t=>{i(t)})).finally((()=>{this.setStatus(c.Ready)}))}))}setStatus(t){let e=`unknown status ${t}`;switch(t){case c.Ready:e='Status: <i class="fa-solid fa-plug"></i> ready';break;case c.Busy:e='Status: <i class="fa-solid fa-plug-circle-bolt"></i> busy';break;case c.NC:e='Status: <i class="fa-solid fa-plug-circle-xmark"></i> not connected'}this.marlinDivStatus&&(this.marlinDivStatus.innerHTML=e)}onBtnHome(){return new Promise((t=>{this.serialWriteWait("G28").then((t=>{console.log(t)})).catch((t=>{console.warn(t)})).finally((()=>{t()}))}))}onBtnPos(){return new Promise((t=>{this.serialWriteWait("M114").then((t=>{console.log("onBtnPos",t),this.marlinDivPosition&&(this.marlinDivPosition.innerText=t)})).catch((t=>{console.warn(t)})).finally((()=>{t()}))}))}onBtnAbs(){return new Promise((t=>{this.serialWriteWait("G90").then((t=>{console.log(t)})).catch((t=>{console.warn(t)})).finally((()=>{t()}))}))}onBtnRel(){return new Promise((t=>{this.serialWriteWait("G91").then((t=>{console.log(t)})).catch((t=>{console.warn(t)})).finally((()=>{t()}))}))}onBtnCold(){return new Promise((t=>{this.serialWriteWait("M302 S0").then((t=>{console.log(t)})).catch((t=>{console.warn(t)})).finally((()=>{t()}))}))}onBtnXP(){this.serialWriteWait("G0 X10").then((t=>{this.onBtnPos()}))}onBtnXM(){this.serialWriteWait("G0 X-10").then((t=>{this.onBtnPos()}))}onBtnYP(){this.serialWriteWait("G0 Y10").then((t=>{this.onBtnPos()}))}onBtnYM(){this.serialWriteWait("G0 Y-10").then((t=>{this.onBtnPos()}))}onBtnZP(){this.serialWriteWait("G0 Z10").then((t=>{this.onBtnPos()}))}onBtnZM(){this.serialWriteWait("G0 Z-10").then((t=>{this.onBtnPos()}))}onBtnEP(){this.serialWriteWait("G0 E10").then((t=>{this.onBtnPos()}))}onBtnEM(){this.serialWriteWait("G0 E-10").then((t=>{this.onBtnPos()}))}initHtml(){if(this.marlinDiv){this.marlinDiv.innerHTML='\n            <div class="w3-border w3-border-dark-grey">\n            <div id="marlinStatus"></div>\n            <div id="marlinPosition" class="w3-tiny"></div>\n            <div id="marlinCommands" class="w3-tiny w3-hide">\n            <p>\n            <button id="marlinHome" class="w3-button w3-round w3-light-grey">home</button>\n            <button id="marlinPos"  class="w3-button w3-round w3-light-grey">pos?</button>\n            <button id="marlinRel"  class="w3-button w3-round w3-light-grey">rel</button>\n            <button id="marlinAbs"  class="w3-button w3-round w3-light-grey">abs</button>\n            <button id="marlinCold" class="w3-button w3-round w3-light-grey">cold</button>\n            </p>\n            <p>\n            <button id="marlinXP" class="w3-button w3-round w3-light-grey">x+</button>\n            <button id="marlinXM" class="w3-button w3-round w3-light-grey">x-</button>\n            <button id="marlinYP" class="w3-button w3-round w3-light-grey">y+</button>\n            <button id="marlinYM" class="w3-button w3-round w3-light-grey">y-</button>\n            <button id="marlinZP" class="w3-button w3-round w3-light-grey">z+</button>\n            <button id="marlinZM" class="w3-button w3-round w3-light-grey">z-</button>\n            </p>\n            <p>\n            <button id="marlinEP" class="w3-button w3-round w3-light-grey">e+</button>\n            <button id="marlinEM" class="w3-button w3-round w3-light-grey">e-</button>\n            </p>\n            </div>\n            </div>\n            ',this.marlinDivStatus=document.getElementById("marlinStatus"),this.marlinDivPosition=document.getElementById("marlinPosition"),this.marlinDivCommands=document.getElementById("marlinCommands"),this.setStatus(c.NC);const t=document.getElementById("marlinHome");t&&(t.onclick=this.onBtnHome.bind(this));const e=document.getElementById("marlinPos");e&&(e.onclick=this.onBtnPos.bind(this));const s=document.getElementById("marlinRel");s&&(s.onclick=this.onBtnRel.bind(this));const i=document.getElementById("marlinAbs");i&&(i.onclick=this.onBtnAbs.bind(this));const o=document.getElementById("marlinCold");o&&(o.onclick=this.onBtnCold.bind(this));const n=document.getElementById("marlinXP");n&&(n.onclick=this.onBtnXP.bind(this));const r=document.getElementById("marlinXM");r&&(r.onclick=this.onBtnXM.bind(this));const l=document.getElementById("marlinYP");l&&(l.onclick=this.onBtnYP.bind(this));const h=document.getElementById("marlinYM");h&&(h.onclick=this.onBtnYM.bind(this));const a=document.getElementById("marlinZP");a&&(a.onclick=this.onBtnZP.bind(this));const d=document.getElementById("marlinZM");d&&(d.onclick=this.onBtnZM.bind(this));const u=document.getElementById("marlinEP");u&&(u.onclick=this.onBtnEP.bind(this));const m=document.getElementById("marlinEM");m&&(m.onclick=this.onBtnEM.bind(this))}}};function R(){N=void 0,g&&(g.innerHTML="")}function Z(){x&&L&&(window.requestAnimationFrame(Z),L.setTransform(F?F.zoom:1,0,0,F?F.zoom:1,0,0),L.clearRect(0,0,x.width,x.height),W.lines.forEach((t=>t.draw(L))),D.draw(),L.setTransform(1,0,0,-1,0,x.height),F&&F.draw())}async function j(t){if(p&&w&&L&&x&&S&&P&&z&&y){F=new a,F.setCanvas(L,x);let e=new m(F);p.innerHTML="",w.innerHTML="",y.innerText=t.name,S.style.display="block",e.padsField=p,e.coordsField=w,z.onclick=()=>{e.cancel()},e.processCB=t=>{P&&(P.style.width=`${t}%`)},await e.parseFile(t),F.zoomToFit([x.width,x.height]),S.style.display="none"}}globalThis.accordionToggler=t=>{var e=document.getElementById(t);e?-1==e.className.indexOf("w3-show")&&-1==e.className.indexOf("w3-hide")?e.className+=" w3-show":-1!=e.className.indexOf("w3-show")?e.className=e.className.replace("w3-show","w3-hide"):e.className=e.className.replace("w3-hide","w3-show"):console.warn("accordionToggler no elem with id:",t),globalThis.resize()},globalThis.openSidebar=()=>{E&&T&&C&&(E.style.marginRight="350px",T.style.width="350px",T.style.display="block",C.style.display="none")},globalThis.closeSidebar=()=>{E&&T&&C&&(E.style.marginRight="0px",T.style.display="none",C.style.display="inline-block")},globalThis.zoomToFit=()=>{F&&x&&F.zoomToFit([x.width,x.height])},globalThis.rotateRight=()=>{var t;t="müsste ma einer implementieren, ne",N&&window.clearTimeout(N),g&&(g.innerHTML=`${t}`,N=window.setTimeout(R,1e4))},globalThis.resize=()=>{if(x&&I&&M&&T&&v){x.width=innerWidth,x.height=innerHeight-I.getBoundingClientRect().height-M.getBoundingClientRect().height,D.draw(),W.draw(L,x);let t=innerHeight-M.getBoundingClientRect().height,e=0;for(let t of T.children){let s=t;-1==s.className.indexOf("w3-hide")&&(e+=s.clientHeight)}-1!=v.className.indexOf("w3-hide")?(T.style.height=`${e+16}px`,v.style.height="16px"):(e-=v.getBoundingClientRect().height,T.style.height=`${t}px`,v.style.height=t-e-16+"px")}},document.addEventListener("DOMContentLoaded",(function(){b&&k&&X&&Y&&O&&z&&p&&w&&f&&x&&M?(L=x.getContext("2d"),x.addEventListener("mousemove",(t=>{F&&F.mouseMove(t),t.preventDefault()}),!1),x.addEventListener("mousedown",(t=>{F&&F.mouseDown(t),t.preventDefault()}),!1),x.addEventListener("mouseup",(t=>{F&&F.mouseUp(t),t.preventDefault()}),!1),x.addEventListener("mouseout",(t=>{F&&F.mouseOut(t),t.preventDefault()}),!1),x.addEventListener("wheel",(t=>{F&&F.mouseWheel(t),t.preventDefault()}),!1),b.onclick=()=>{var t=document.createElement("input");return t.type="file",t.click(),t.addEventListener("change",(e=>{if(console.log(e),t.files&&t.files.length>0){let e=t.files[0];console.log(e),console.log(`file: ${e.name} size:${e.size}`),j(e)}else alert("please choose a file")})),!1},k.onclick=t=>{B&&(B.className=B.className.replace("w3-show","w3-hide")),F.setZero(),$.setZero(F.getZero())},X.onclick=t=>{B&&(B.className=B.className.replace("w3-show","w3-hide"));let e=F.getSelectedZero();$.moveTo(e[0],e[1],void 0,void 0)},Y.onclick=t=>{B&&(B.className=B.className.replace("w3-show","w3-hide"));let e=F.getSelected(),s=F.getSelectedZero();$.moveToAll(e,s)},O.onclick=()=>{B&&(B.className=B.className.replace("w3-show","w3-hide")),$.blob()},f.ondrop=t=>{t.preventDefault(),console.log(t),t.dataTransfer&&t.dataTransfer.items?[...t.dataTransfer.items].forEach(((t,e)=>{if("file"===t.kind){const s=t.getAsFile();s&&(console.log(`… item[${e}].name = ${s.name}`),j(s))}})):t.dataTransfer&&[...t.dataTransfer.files].forEach(((t,e)=>{t&&(console.log(`… file[${e}].name = ${t.name}`),j(t))}))},f.ondragover=t=>{console.log("File(s) in drop zone"),t.preventDefault()},x.oncontextmenu=t=>{t.preventDefault(),B&&(B.style.left=`${t.pageX}px`,B.style.top=`${t.pageY}px`,B.className=B.className.replace("w3-hide","w3-show"))},x.onmouseup=t=>{B&&(B.className=B.className.replace("w3-show","w3-hide"))},L&&(F=new a,F.setCanvas(L,x),D=new(0,s.Mouse)(L,x),D.track(),W=new(0,s.Grid),W.step=2,W.lineWidth=.03,W.boldWidth=.05,W.createLines(x)),globalThis.resize(),window.requestAnimationFrame(Z)):console.error("missing html elements !")})),window.addEventListener("resize",(t=>{globalThis.resize()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXguanMiLCJzcmMvZGV2aWNlLnRzIiwic3JjL3BjYi50cyIsInNyYy9kZXZpY2VNYXJsaW4udHMiLCJzcmMvcGFyc2VyLnRzIiwic3JjL3BhcnNlckdlcmJlci50cyIsInNyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogay1kIFRyZWUgSmF2YVNjcmlwdCAtIFYgMS4wMVxyXG4gKlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdWJpbGFicy9rZC10cmVlLWphdmFzY3JpcHRcclxuICpcclxuICogQGF1dGhvciBNaXJjZWEgUHJpY29wIDxwcmljb3BAdWJpbGFicy5uZXQ+LCAyMDEyXHJcbiAqIEBhdXRob3IgTWFydGluIEtsZXBwZSA8a2xlcHBlQHViaWxhYnMubmV0PiwgMjAxMlxyXG4gKiBAYXV0aG9yIFViaWxhYnMgaHR0cDovL3ViaWxhYnMubmV0LCAyMDEyXHJcbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlIDxodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD5cclxuICovXHJcblxyXG4vKiBJc3N1ZSBcIlRoZSByZW1vdmUgbWV0aG9kIGhhcyBlcnJvcnNcIiBodHRwczovL2dpdGh1Yi5jb20vdWJpbGFicy9rZC10cmVlLWphdmFzY3JpcHQvaXNzdWVzLzI1XHJcblxyXG4gQWZ0ZXIgaGF2aW5nIHJlbW92ZWQgc29tZSBub2RlcywgdGhleSBjYW4gc3RpbGwgYmUgZm91bmQgaW4gdGhlIGtkVHJlZSBpbiBzb21lIHNpdHVhdGlvbnMuXHJcblxyXG4gSGVyZSBpcyBhbiBleGFtcGxlIG9mIHRoZSByZW1vdmUgbWV0aG9kIGVycm9yczpcclxuXHJcbiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9zYW50b3hpL2JhOGQyODNmOWEyMTUyM2ZhNDVkMjNkOGU5YzMwNDZlXHJcblxyXG4gYXMgYSB0ZW1wb3Jhcnkgd29yay1hcm91bmQsIEkgYWRkZWQgYSBmb3VydGggYXJndW1lbnQgdG8gXCJuZWFyZXN0XCIgdG8gcGFzcyBhIHByZWRpY2F0ZSB0byBmaWx0ZXIgdGhlIG1hdGNoZWQgbm9kZXMsIHdoaWNoIG1pZ2h0IGJlIGFsc28gdXNlZnVsIHRvIGFkZDpcclxuXHJcbiAgICAgdGhpcy5uZWFyZXN0ID0gZnVuY3Rpb24gKHBvaW50LCBtYXhOb2RlcywgbWF4RGlzdGFuY2UsIHByZWRpY2F0ZSkge1xyXG4gICAgICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlIHx8ICh4ID0+IHRydWUpO1xyXG4gLi4uLlxyXG4gICAgICAgICBsaW5lYXJEaXN0YW5jZSA9IG1ldHJpYyhsaW5lYXJQb2ludCwgbm9kZS5vYmopO1xyXG5cclxuICAgICAgICAgaWYgKG5vZGUucmlnaHQgPT09IG51bGwgJiYgbm9kZS5sZWZ0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlLm9iaikgJiYgKGJlc3ROb2Rlcy5zaXplKCkgPCBtYXhOb2RlcyB8fCBvd25EaXN0YW5jZSA8IGJlc3ROb2Rlcy5wZWVrKClbMV0pKSB7XHJcbiAgICAgICAgICAgICBzYXZlTm9kZShub2RlLCBvd25EaXN0YW5jZSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgfVxyXG4gLi4uLlxyXG4gICAgICAgICBuZWFyZXN0U2VhcmNoKGJlc3RDaGlsZCk7XHJcblxyXG4gICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUub2JqKSAmJiAoYmVzdE5vZGVzLnNpemUoKSA8IG1heE5vZGVzIHx8IG93bkRpc3RhbmNlIDwgYmVzdE5vZGVzLnBlZWsoKVsxXSkpIHtcclxuICAgICAgICAgICBzYXZlTm9kZShub2RlLCBvd25EaXN0YW5jZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBrZFRyZWVPYmplY3QgeyB9XHJcblxyXG5leHBvcnQgY2xhc3Mga2ROb2RlPFQgZXh0ZW5kcyBrZFRyZWVPYmplY3Q+IHtcclxuICAgIG9iajogVDtcclxuICAgIGxlZnQ6IGtkTm9kZTxUPiB8IG51bGw7XHJcbiAgICByaWdodDoga2ROb2RlPFQ+IHwgbnVsbDtcclxuICAgIHBhcmVudDoga2ROb2RlPFQ+O1xyXG4gICAgZGltZW5zaW9uOiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmo6IFQsIGRpbWVuc2lvbjogbnVtYmVyLCBwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLm9iaiA9IG9iajtcclxuICAgICAgICB0aGlzLmxlZnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuZGltZW5zaW9uID0gZGltZW5zaW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3Mga2RUcmVlPFQgZXh0ZW5kcyBrZFRyZWVPYmplY3Q+IHtcclxuICAgIHByaXZhdGUgX2tkVHJlZU9iamVjdFR5cGU6IHR5cGVvZiBrZFRyZWVPYmplY3Q7XHJcblxyXG4gICAgcG9pbnRzOiBUW107XHJcbiAgICBtZXRyaWM6IChhOiBULCBiOiBUKSA9PiBudW1iZXI7XHJcbiAgICBkaW1lbnNpb25zOiAoa2V5b2YgVClbXTtcclxuICAgIHJvb3Q6IGtkTm9kZTxUPiB8IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgdHJlZSBmcm9tIGEgbGlzdCBvZiBwb2ludHMsIGEgZGlzdGFuY2UgZnVuY3Rpb24sIGFuZCBhIGxpc3Qgb2YgZGltZW5zaW9ucy5cclxuICAgICAqIEBwYXJhbSBwb2ludHNcclxuICAgICAqIEBwYXJhbSBkaXN0YW5jZVxyXG4gICAgICogQHBhcmFtIGRpbWVuc2lvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob2JqOiB0eXBlb2Yga2RUcmVlT2JqZWN0LCBwb2ludHM6IFRbXSwgZGlzdGFuY2U6IChhOiBULCBiOiBUKSA9PiBudW1iZXIsIGRpbWVuc2lvbnM6IEFycmF5PGtleW9mIFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fa2RUcmVlT2JqZWN0VHlwZSA9IG9iajtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XHJcbiAgICAgICAgdGhpcy5tZXRyaWMgPSBkaXN0YW5jZTtcclxuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSBkaW1lbnNpb25zO1xyXG5cclxuICAgICAgICAvLyBJZiBwb2ludHMgaXMgbm90IGFuIGFycmF5LCBhc3N1bWUgd2UncmUgbG9hZGluZyBhIHByZS1idWlsdCB0cmVlXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBvaW50cykpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkVHJlZShwb2ludHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXMuYnVpbGRUcmVlKHBvaW50cywgMCwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRUcmVlKHBvaW50czogVFtdLCBkZXB0aDogbnVtYmVyLCBwYXJlbnQ6IGtkTm9kZTxUPiB8IG51bGwpOiBrZE5vZGU8VD4gfCBudWxsIHtcclxuICAgICAgICB2YXIgZGltID0gZGVwdGggJSB0aGlzLmRpbWVuc2lvbnMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBtZWRpYW47XHJcbiAgICAgICAgdmFyIG5vZGU6IGtkTm9kZTxUPjtcclxuXHJcbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcga2ROb2RlKHBvaW50c1swXSwgZGltLCBwYXJlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9pbnRzLnNvcnQoKGE6IFQsIGI6IFQpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPG51bWJlcj5hW3RoaXMuZGltZW5zaW9uc1tkaW1dXSAtIDxudW1iZXI+Ylt0aGlzLmRpbWVuc2lvbnNbZGltXV07IC8vIGRpc3RhbmNlIGluIHRoZSBkaW1lbnNpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbWVkaWFuID0gTWF0aC5mbG9vcihwb2ludHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgICAgIC8vIGF2b2lkIGhhdmluZyBzYW1lIGNvb3JkcyBvbiBsZWZ0IGFuZCByaWdodCB0cmVlICEhIVxyXG4gICAgICAgIHdoaWxlKG1lZGlhbiA+IDApIHtcclxuICAgICAgICAgICAgbGV0IG5ld21lZGlhbiA9IG1lZGlhbiAtIDE7XHJcbiAgICAgICAgICAgIGlmKHBvaW50c1ttZWRpYW5dW3RoaXMuZGltZW5zaW9uc1tkaW1dXSA9PT0gcG9pbnRzW25ld21lZGlhbl1bdGhpcy5kaW1lbnNpb25zW2RpbV1dKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYGJ1aWxkVHJlZTpzcGxpdCBibG9lZCBuZSA/Pz8gJHt0aGlzLmRpbWVuc2lvbnNbZGltXX1gKTtcclxuICAgICAgICAgICAgICAgIG1lZGlhbiAtPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vZGUgPSBuZXcga2ROb2RlKHBvaW50c1ttZWRpYW5dLCBkaW0sIHBhcmVudCk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBidWlsZFRyZWU6c3BsaXQ6ZGltOiR7dGhpcy5kaW1lbnNpb25zW2RpbV19IHZhbHVlOiR7cG9pbnRzW21lZGlhbl1bdGhpcy5kaW1lbnNpb25zW2RpbV1dfWApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBidWlsZFRyZWU6bGVmdDoke2RlcHRofWAsIHBvaW50cy5zbGljZSgwLCBtZWRpYW4pKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgYnVpbGRUcmVlOnJpZ2h0JHtkZXB0aH1gLCBwb2ludHMuc2xpY2UobWVkaWFuICsgMSkpO1xyXG5cclxuICAgICAgICBub2RlLmxlZnQgPSB0aGlzLmJ1aWxkVHJlZShwb2ludHMuc2xpY2UoMCwgbWVkaWFuKSwgZGVwdGggKyAxLCBub2RlKTtcclxuICAgICAgICBub2RlLnJpZ2h0ID0gdGhpcy5idWlsZFRyZWUocG9pbnRzLnNsaWNlKG1lZGlhbiArIDEpLCBkZXB0aCArIDEsIG5vZGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWxvYWRzIGEgc2VyaWFsaWVkIHRyZWVcclxuICAgIHByaXZhdGUgbG9hZFRyZWUoZGF0YSkge1xyXG4gICAgICAgIC8vIEp1c3QgbmVlZCB0byByZXN0b3JlIHRoZSBgcGFyZW50YCBwYXJhbWV0ZXJcclxuICAgICAgICB0aGlzLnJvb3QgPSBkYXRhO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXN0b3JlUGFyZW50KHJvb3QpIHtcclxuICAgICAgICAgICAgaWYgKHJvb3QubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgcm9vdC5sZWZ0LnBhcmVudCA9IHJvb3Q7XHJcbiAgICAgICAgICAgICAgICByZXN0b3JlUGFyZW50KHJvb3QubGVmdCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyb290LnJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByb290LnJpZ2h0LnBhcmVudCA9IHJvb3Q7XHJcbiAgICAgICAgICAgICAgICByZXN0b3JlUGFyZW50KHJvb3QucmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN0b3JlUGFyZW50KHRoaXMucm9vdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udmVydCB0byBhIEpTT04gc2VyaWFsaXphYmxlIHN0cnVjdHVyZTsgdGhpcyBqdXN0IHJlcXVpcmVzIHJlbW92aW5nXHJcbiAgICAvLyB0aGUgYHBhcmVudGAgcHJvcGVydHlcclxuICAgIHRvSlNPTihzcmM6IGtkTm9kZTxUPiB8IG51bGwgPSB0aGlzLnJvb3QpIHtcclxuICAgICAgICBpZiAoc3JjID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGVzdCA9IG5ldyBrZE5vZGUoc3JjLm9iaiwgc3JjLmRpbWVuc2lvbiwgbnVsbCk7XHJcbiAgICAgICAgaWYgKHNyYy5sZWZ0KSBkZXN0LmxlZnQgPSB0aGlzLnRvSlNPTihzcmMubGVmdCk7XHJcbiAgICAgICAgaWYgKHNyYy5yaWdodCkgZGVzdC5yaWdodCA9IHRoaXMudG9KU09OKHNyYy5yaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiByZXR1cm5zIGEgbGlzdCBvZiBwb2ludHMgaW4gdGhlIHN1YnRyZWUsIGV4Y2x1c2l2ZSB0aGUgZ2l2ZW4gbm9kZSAhICovXHJcbiAgICB0b0FycmF5KHNyYzoga2ROb2RlPFQ+IHwgbnVsbCA9IHRoaXMucm9vdCk6IFRbXSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDpUW10gPSBbXTtcclxuICAgICAgICBpZiAoc3JjID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHNyYy5sZWZ0KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNyYy5sZWZ0Lm9iaik7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFsuLi5yZXN1bHQsIC4uLnRoaXMudG9BcnJheShzcmMubGVmdCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzcmMucmlnaHQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goc3JjLnJpZ2h0Lm9iaik7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFsuLi5yZXN1bHQsIC4uLnRoaXMudG9BcnJheShzcmMucmlnaHQpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlubmVyU2VhcmNoKHBvaW50LCBub2RlLCBwYXJlbnQpIHtcclxuICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uc1tub2RlLmRpbWVuc2lvbl07XHJcbiAgICAgICAgaWYgKHBvaW50W2RpbWVuc2lvbl0gPCBub2RlLm9ialtkaW1lbnNpb25dKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyU2VhcmNoKHBvaW50LCBub2RlLmxlZnQsIG5vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyU2VhcmNoKHBvaW50LCBub2RlLnJpZ2h0LCBub2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluc2VydChwb2ludCkge1xyXG4gICAgICAgIHZhciBpbnNlcnRQb3NpdGlvbiA9IHRoaXMuaW5uZXJTZWFyY2gocG9pbnQsIHRoaXMucm9vdCwgbnVsbCksXHJcbiAgICAgICAgICAgIG5ld2tkTm9kZSxcclxuICAgICAgICAgICAgZGltZW5zaW9uO1xyXG5cclxuICAgICAgICBpZiAoaW5zZXJ0UG9zaXRpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yb290ID0gbmV3IGtkTm9kZShwb2ludCwgMCwgbnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5ld2tkTm9kZSA9IG5ldyBrZE5vZGUocG9pbnQsIChpbnNlcnRQb3NpdGlvbi5kaW1lbnNpb24gKyAxKSAlIHRoaXMuZGltZW5zaW9ucy5sZW5ndGgsIGluc2VydFBvc2l0aW9uKTtcclxuICAgICAgICBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbnNbaW5zZXJ0UG9zaXRpb24uZGltZW5zaW9uXTtcclxuXHJcbiAgICAgICAgaWYgKHBvaW50W2RpbWVuc2lvbl0gPCBpbnNlcnRQb3NpdGlvbi5vYmpbZGltZW5zaW9uXSkge1xyXG4gICAgICAgICAgICBpbnNlcnRQb3NpdGlvbi5sZWZ0ID0gbmV3a2ROb2RlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluc2VydFBvc2l0aW9uLnJpZ2h0ID0gbmV3a2ROb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBub2RlU2VhcmNoKHBvaW50OiBULCBub2RlOiBrZE5vZGU8VD4gfCBudWxsKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobm9kZS5vYmogPT09IHBvaW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGVxdWFsaXR5IGNoZWNrID8/PyB3aWxsIGl0IHdvcmsgb24gZmxvYXRzID8/PyAvLyBub3QgdGhlIHByb2JsZW0sIGl0IGRvZXMgbm90IGZpbmQgYSBjYW5kaWRhdGUgISEhIHV1dWhoaFxyXG4gICAgICAgICAgICBsZXQgbWV0ID0gdGhpcy5tZXRyaWMobm9kZS5vYmosIHBvaW50KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2tkVHJlZTpub2RlU2VhcmNoJywgbWV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbnNbbm9kZS5kaW1lbnNpb25dO1xyXG5cclxuICAgICAgICAvLyB1dXVoaGggbG9va2luZyBhdCB0aGUgdHJlZSBJIHNlZSBsZWZ0IDw9IG9ialtkaW1dLFxyXG4gICAgICAgIC8vIG5vIGFjdHVhbGx5IHRoZSBhcnJheSBzcGxpdHRpbmcgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aCB0aGlzIGNvbXBhcmlzaW9uLCBjYW4gYmUgZWl0aGVyIHdheSAhISFcclxuICAgICAgICBpZiAocG9pbnRbZGltZW5zaW9uXSA8IG5vZGUub2JqW2RpbWVuc2lvbl0pIHsgIC8vIG9yaWdpbmFsIDxcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYGtkVHJlZTpub2RlU2VhcmNoIGxlZnQgJHtwb2ludFtkaW1lbnNpb25dfSA8PT8gJHtub2RlLm9ialtkaW1lbnNpb25dfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlU2VhcmNoKHBvaW50LCBub2RlLmxlZnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBrZFRyZWU6bm9kZVNlYXJjaCByaWdodCAke3BvaW50W2RpbWVuc2lvbl19ID4/ICR7bm9kZS5vYmpbZGltZW5zaW9uXX1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZVNlYXJjaChwb2ludCwgbm9kZS5yaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZE1pbihub2RlOiBrZE5vZGU8VD4gfCBudWxsLCBkaW06IG51bWJlcik6IGtkTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHZhciBkaW1lbnNpb246IGFueTtcclxuICAgICAgICB2YXIgb3duOiBudW1iZXI7XHJcbiAgICAgICAgdmFyIGxlZnQ7XHJcbiAgICAgICAgdmFyIHJpZ2h0O1xyXG4gICAgICAgIHZhciBtaW46IGtkTm9kZTxUPjtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbnNbZGltXTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUuZGltZW5zaW9uID09PSBkaW0pIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUubGVmdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZE1pbihub2RlLmxlZnQsIGRpbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvd24gPSBub2RlLm9ialtkaW1lbnNpb25dO1xyXG4gICAgICAgIGxlZnQgPSB0aGlzLmZpbmRNaW4obm9kZS5sZWZ0LCBkaW0pO1xyXG4gICAgICAgIHJpZ2h0ID0gdGhpcy5maW5kTWluKG5vZGUucmlnaHQsIGRpbSk7XHJcbiAgICAgICAgbWluID0gbm9kZTtcclxuXHJcbiAgICAgICAgaWYgKGxlZnQgIT09IG51bGwgJiYgbGVmdC5vYmpbZGltZW5zaW9uXSA8IG93bikge1xyXG4gICAgICAgICAgICBtaW4gPSBsZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmlnaHQgIT09IG51bGwgJiYgcmlnaHQub2JqW2RpbWVuc2lvbl0gPCBtaW4ub2JqW2RpbWVuc2lvbl0pIHtcclxuICAgICAgICAgICAgbWluID0gcmlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtaW47XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kTWF4KG5vZGU6IGtkTm9kZTxUPiwgZGltOiBudW1iZXIpOiBrZE5vZGU8VD4ge1xyXG4gICAgICAgIHZhciBkaW1lbnNpb246IGFueTtcclxuICAgICAgICB2YXIgb3duOiBudW1iZXI7XHJcbiAgICAgICAgdmFyIGxlZnQ6IGtkTm9kZTxUPiB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIHZhciByaWdodDoga2ROb2RlPFQ+IHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgdmFyIG1heDoga2ROb2RlPFQ+O1xyXG5cclxuICAgICAgICBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbnNbZGltXTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUuZGltZW5zaW9uID09PSBkaW0pIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUubGVmdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZE1heChub2RlLmxlZnQsIGRpbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvd24gPSBub2RlLm9ialtkaW1lbnNpb25dO1xyXG4gICAgICAgIGlmIChub2RlLmxlZnQpIHtcclxuICAgICAgICAgICAgbGVmdCA9IHRoaXMuZmluZE1heChub2RlLmxlZnQsIGRpbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub2RlLnJpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJpZ2h0ID0gdGhpcy5maW5kTWF4KG5vZGUucmlnaHQsIGRpbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1heCA9IG5vZGU7XHJcblxyXG4gICAgICAgIGlmIChsZWZ0ICE9PSBudWxsICYmIGxlZnQub2JqW2RpbWVuc2lvbl0gPiBvd24pIHtcclxuICAgICAgICAgICAgbWF4ID0gbGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0ICE9PSBudWxsICYmIHJpZ2h0Lm9ialtkaW1lbnNpb25dID4gbWF4Lm9ialtkaW1lbnNpb25dKSB7XHJcbiAgICAgICAgICAgIG1heCA9IHJpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlTm9kZShub2RlOiBrZE5vZGU8VD4gfCBudWxsKSB7XHJcbiAgICAgICAgdmFyIG5leHROb2RlOiBrZE5vZGU8VD4gfCBudWxsO1xyXG4gICAgICAgIHZhciBuZXh0T2JqOiBUO1xyXG4gICAgICAgIHZhciBwRGltZW5zaW9uOiBhbnk7XHJcblxyXG4gICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5vZGUubGVmdCA9PT0gbnVsbCAmJiBub2RlLnJpZ2h0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLnBhcmVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcERpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uc1tub2RlLnBhcmVudC5kaW1lbnNpb25dO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGUub2JqW3BEaW1lbnNpb25dIDw9IG5vZGUucGFyZW50Lm9ialtwRGltZW5zaW9uXSkgeyAvL29yaWcgPFxyXG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQubGVmdCA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudC5yaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIHJpZ2h0IHN1YnRyZWUgaXMgbm90IGVtcHR5LCBzd2FwIHdpdGggdGhlIG1pbmltdW0gZWxlbWVudCBvbiB0aGVcclxuICAgICAgICAvLyBub2RlJ3MgZGltZW5zaW9uLiBJZiBpdCBpcyBlbXB0eSwgd2Ugc3dhcCB0aGUgbGVmdCBhbmQgcmlnaHQgc3VidHJlZXMgYW5kXHJcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUuXHJcbiAgICAgICAgaWYgKG5vZGUucmlnaHQgIT09IG51bGwpIHsgLy8gb3JpZyByaWdodFxyXG4gICAgICAgICAgICBuZXh0Tm9kZSA9IHRoaXMuZmluZE1pbihub2RlLnJpZ2h0LCBub2RlLmRpbWVuc2lvbik7IC8vIG9yaWcgcmlnaHQsIGZpbmRNaW5cclxuICAgICAgICAgICAgbmV4dE9iaiA9IG5leHROb2RlLm9iajtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKG5leHROb2RlKTtcclxuICAgICAgICAgICAgbm9kZS5vYmogPSBuZXh0T2JqO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5sZWZ0ICE9PSBudWxsKSB7IC8vIG1ha2VzIHR5cGVzY3JpcHQgaGFwcHlcclxuICAgICAgICAgICAgbmV4dE5vZGUgPSB0aGlzLmZpbmRNaW4obm9kZS5sZWZ0LCBub2RlLmRpbWVuc2lvbik7IC8vIG9yaWcgbGVmdCwgZmluZE1pblxyXG4gICAgICAgICAgICBuZXh0T2JqID0gbmV4dE5vZGUub2JqO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUobmV4dE5vZGUpO1xyXG4gICAgICAgICAgICBub2RlLnJpZ2h0ID0gbm9kZS5sZWZ0OyAvLyBvcmlnIHJpZ2h0ID0gbGVmdFxyXG4gICAgICAgICAgICBub2RlLmxlZnQgPSBudWxsOyAvL29yaWcgbGVmdFxyXG4gICAgICAgICAgICBub2RlLm9iaiA9IG5leHRPYmo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlKHBvaW50OiBUKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIG5vZGU6IGtkTm9kZTxUPiB8IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdrZFRyZWU6cmVtb3ZlIHNlYXJjaGluZzonLCBwb2ludCk7XHJcbiAgICAgICAgbm9kZSA9IHRoaXMubm9kZVNlYXJjaChwb2ludCwgdGhpcy5yb290KTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwia2RUcmVlOnJlbW92ZTprYWNrJ24nc2hpdFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5yZW1vdmVOb2RlKG5vZGUpOyAvLyBidWdnaVxyXG5cclxuICAgICAgICAvLyBuZXcgdHJlZSByZWJ1aWxkXHJcbiAgICAgICAgY29uc3QgYWxsY2hpbGRzID0gdGhpcy50b0FycmF5KG5vZGUpO1xyXG4gICAgICAgIGxldCBuZXdub2RlID0gdGhpcy5idWlsZFRyZWUoYWxsY2hpbGRzLCBub2RlLmRpbWVuc2lvbiwgbm9kZS5wYXJlbnQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBub2RlKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBhbGxjaGlsZHMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBuZXdub2RlKTtcclxuICAgICAgICBpZihub2RlLnBhcmVudCkge1xyXG4gICAgICAgICAgICBpZihub2RlLnBhcmVudC5sZWZ0ID09PSBub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3ZlIGltIGxlZnQnKTtcclxuICAgICAgICAgICAgICAgIG5vZGUucGFyZW50LmxlZnQgPSBuZXdub2RlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUucGFyZW50LnJpZ2h0ID09PSBub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3ZlIGltIHJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudC5yaWdodCA9IG5ld25vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJvb3QgPSBuZXdub2RlOyAvLy8gPz8/XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBuZWFyZXN0U2VhcmNoKGRhdGE6IHsgcG9pbnQ6IFQsIGJlc3ROb2RlczogQmluYXJ5SGVhcDxUPiwgbWF4Tm9kZXM6IG51bWJlciB9LCBub2RlOmtkTm9kZTxUPikge1xyXG4gICAgICAgIGxldCBiZXN0Q2hpbGQ7XHJcbiAgICAgICAgbGV0IGRpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uc1tub2RlLmRpbWVuc2lvbl07XHJcbiAgICAgICAgbGV0IG93bkRpc3RhbmNlID0gdGhpcy5tZXRyaWMoZGF0YS5wb2ludCwgbm9kZS5vYmopO1xyXG4gICAgICAgIGxldCBsaW5lYXJQb2ludDogVCA9IDxUPm5ldyB0aGlzLl9rZFRyZWVPYmplY3RUeXBlKCk7XHJcbiAgICAgICAgdmFyIGxpbmVhckRpc3RhbmNlO1xyXG4gICAgICAgIGxldCBvdGhlckNoaWxkO1xyXG4gICAgICAgIGxldCBpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhga2RUcmVlOm5lYXJlc3RTZWFyY2hgLCBkYXRhKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2F2ZU5vZGUgPSAobm9kZToga2ROb2RlPFQ+LCBkaXN0YW5jZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGRhdGEuYmVzdE5vZGVzLnB1c2goW25vZGUsIGRpc3RhbmNlXSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmJlc3ROb2Rlcy5zaXplKCkgPiBkYXRhLm1heE5vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJlc3ROb2Rlcy5wb3AoKTsgLy8gZW5kbGVzcyBsb29wIGhlcmUgISEhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmRpbWVuc2lvbnMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IG5vZGUuZGltZW5zaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lYXJQb2ludFt0aGlzLmRpbWVuc2lvbnNbaV1dID0gZGF0YS5wb2ludFt0aGlzLmRpbWVuc2lvbnNbaV1dO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGluZWFyUG9pbnRbdGhpcy5kaW1lbnNpb25zW2ldXSA9IG5vZGUub2JqW3RoaXMuZGltZW5zaW9uc1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxpbmVhckRpc3RhbmNlID0gdGhpcy5tZXRyaWMobGluZWFyUG9pbnQsIG5vZGUub2JqKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUucmlnaHQgPT09IG51bGwgJiYgbm9kZS5sZWZ0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmJlc3ROb2Rlcy5zaXplKCkgPCBkYXRhLm1heE5vZGVzIHx8IG93bkRpc3RhbmNlIDwgZGF0YS5iZXN0Tm9kZXMucGVlaygpWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBzYXZlTm9kZShub2RlLCBvd25EaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5vZGUucmlnaHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYmVzdENoaWxkID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5sZWZ0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJlc3RDaGlsZCA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEucG9pbnRbZGltZW5zaW9uXSA8IG5vZGUub2JqW2RpbWVuc2lvbl0pIHtcclxuICAgICAgICAgICAgICAgIGJlc3RDaGlsZCA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJlc3RDaGlsZCA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubmVhcmVzdFNlYXJjaChkYXRhLCBiZXN0Q2hpbGQpO1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5iZXN0Tm9kZXMuc2l6ZSgpIDwgZGF0YS5tYXhOb2RlcyB8fCBvd25EaXN0YW5jZSA8IGRhdGEuYmVzdE5vZGVzLnBlZWsoKVsxXSkge1xyXG4gICAgICAgICAgICBzYXZlTm9kZShub2RlLCBvd25EaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5iZXN0Tm9kZXMuc2l6ZSgpIDwgZGF0YS5tYXhOb2RlcyB8fCBNYXRoLmFicyhsaW5lYXJEaXN0YW5jZSkgPCBkYXRhLmJlc3ROb2Rlcy5wZWVrKClbMV0pIHtcclxuICAgICAgICAgICAgaWYgKGJlc3RDaGlsZCA9PT0gbm9kZS5sZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBvdGhlckNoaWxkID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG90aGVyQ2hpbGQgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG90aGVyQ2hpbGQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmVhcmVzdFNlYXJjaChkYXRhLCBvdGhlckNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZWFyZXN0KHBvaW50OiBULCBtYXhOb2RlczogbnVtYmVyLCBtYXhEaXN0YW5jZT86IG51bWJlcikge1xyXG4gICAgICAgIGxldCBpO1xyXG4gICAgICAgIGxldCByZXN1bHQ6IGFueVtdID0gW107XHJcbiAgICAgICAgbGV0IGJlc3ROb2RlczogQmluYXJ5SGVhcDxUPjtcclxuXHJcbiAgICAgICAgYmVzdE5vZGVzID0gbmV3IEJpbmFyeUhlYXAoXHJcbiAgICAgICAgICAgIChlKSA9PiB7IHJldHVybiAtZVsxXTsgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChtYXhEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygna2RUcmVlOm5lYXJlc3QsIG1heG5vZGVzJywgbWF4Tm9kZXMpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWF4Tm9kZXM7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdE5vZGVzLnB1c2goW251bGwsIG1heERpc3RhbmNlXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgdGhpcy5uZWFyZXN0U2VhcmNoKHsgcG9pbnQsIGJlc3ROb2RlcywgbWF4Tm9kZXMgfSwgdGhpcy5yb290KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgTWF0aC5taW4obWF4Tm9kZXMsIGJlc3ROb2Rlcy5jb250ZW50Lmxlbmd0aCk7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAoYmVzdE5vZGVzLmNvbnRlbnRbaV1bMF0pIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFtiZXN0Tm9kZXMuY29udGVudFtpXVswXS5vYmosIGJlc3ROb2Rlcy5jb250ZW50W2ldWzFdXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcblxyXG4gICAgYmFsYW5jZUZhY3RvcigpIHtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSAobm9kZToga2ROb2RlPFQ+IHwgbnVsbCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGhlaWdodChub2RlLmxlZnQpLCBoZWlnaHQobm9kZS5yaWdodCkpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvdW50ID0gKG5vZGU6IGtkTm9kZTxUPiB8IG51bGwpID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudChub2RlLmxlZnQpICsgY291bnQobm9kZS5yaWdodCkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhlaWdodCh0aGlzLnJvb3QpIC8gKE1hdGgubG9nKGNvdW50KHRoaXMucm9vdCkpIC8gTWF0aC5sb2coMikpO1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gQmluYXJ5IGhlYXAgaW1wbGVtZW50YXRpb24gZnJvbTpcclxuLy8gaHR0cDovL2Vsb3F1ZW50amF2YXNjcmlwdC5uZXQvYXBwZW5kaXgyLmh0bWxcclxuXHJcbmV4cG9ydCBjbGFzcyBCaW5hcnlIZWFwPFQgZXh0ZW5kcyBrZFRyZWVPYmplY3Q+IHtcclxuICAgIGNvbnRlbnQ6IFtub2RlOiBrZE5vZGU8VD4gfCBudWxsLCBkaXN0YW5jZTogbnVtYmVyXVtdO1xyXG4gICAgc2NvcmVGdW5jdGlvbjogYW55O1xyXG4gICAgY29uc3RydWN0b3Ioc2NvcmVGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2NvcmVGdW5jdGlvbiA9IHNjb3JlRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaChlbGVtZW50OiBbbm9kZToga2ROb2RlPFQ+IHwgbnVsbCwgZGlzdGFuY2U6IG51bWJlcl0pIHtcclxuICAgICAgICAvLyBBZGQgdGhlIG5ldyBlbGVtZW50IHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5LlxyXG4gICAgICAgIHRoaXMuY29udGVudC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgIC8vIEFsbG93IGl0IHRvIGJ1YmJsZSB1cC5cclxuICAgICAgICB0aGlzLmJ1YmJsZVVwKHRoaXMuY29udGVudC5sZW5ndGggLSAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3AoKSB7XHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGZpcnN0IGVsZW1lbnQgc28gd2UgY2FuIHJldHVybiBpdCBsYXRlci5cclxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jb250ZW50WzBdO1xyXG4gICAgICAgIC8vIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheS5cclxuICAgICAgICB2YXIgZW5kID0gdGhpcy5jb250ZW50LnBvcCgpO1xyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBhbnkgZWxlbWVudHMgbGVmdCwgcHV0IHRoZSBlbmQgZWxlbWVudCBhdCB0aGVcclxuICAgICAgICAvLyBzdGFydCwgYW5kIGxldCBpdCBzaW5rIGRvd24uXHJcbiAgICAgICAgaWYgKGVuZCAmJiB0aGlzLmNvbnRlbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRbMF0gPSBlbmQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2lua0Rvd24oMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGVlaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50WzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZShub2RlKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgLy8gVG8gcmVtb3ZlIGEgdmFsdWUsIHdlIG11c3Qgc2VhcmNoIHRocm91Z2ggdGhlIGFycmF5IHRvIGZpbmRcclxuICAgICAgICAvLyBpdC5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRbaV0gPT0gbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBpdCBpcyBmb3VuZCwgdGhlIHByb2Nlc3Mgc2VlbiBpbiAncG9wJyBpcyByZXBlYXRlZFxyXG4gICAgICAgICAgICAgICAgLy8gdG8gZmlsbCB1cCB0aGUgaG9sZS5cclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSB0aGlzLmNvbnRlbnQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kICYmIGkgIT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFtpXSA9IGVuZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY29yZUZ1bmN0aW9uKGVuZCkgPCB0aGlzLnNjb3JlRnVuY3Rpb24obm9kZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlVXAoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmtEb3duKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImtkTm9kZSBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYnViYmxlVXAobikge1xyXG4gICAgICAgIC8vIEZldGNoIHRoZSBlbGVtZW50IHRoYXQgaGFzIHRvIGJlIG1vdmVkLlxyXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5jb250ZW50W25dO1xyXG4gICAgICAgIC8vIFdoZW4gYXQgMCwgYW4gZWxlbWVudCBjYW4gbm90IGdvIHVwIGFueSBmdXJ0aGVyLlxyXG4gICAgICAgIHdoaWxlIChuID4gMCkge1xyXG4gICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBwYXJlbnQgZWxlbWVudCdzIGluZGV4LCBhbmQgZmV0Y2ggaXQuXHJcbiAgICAgICAgICAgIHZhciBwYXJlbnROID0gTWF0aC5mbG9vcigobiArIDEpIC8gMikgLSAxLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gdGhpcy5jb250ZW50W3BhcmVudE5dO1xyXG4gICAgICAgICAgICAvLyBTd2FwIHRoZSBlbGVtZW50cyBpZiB0aGUgcGFyZW50IGlzIGdyZWF0ZXIuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3JlRnVuY3Rpb24oZWxlbWVudCkgPCB0aGlzLnNjb3JlRnVuY3Rpb24ocGFyZW50KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50W3BhcmVudE5dID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFtuXSA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSAnbicgdG8gY29udGludWUgYXQgdGhlIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICAgICAgICAgIG4gPSBwYXJlbnROO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEZvdW5kIGEgcGFyZW50IHRoYXQgaXMgbGVzcywgbm8gbmVlZCB0byBtb3ZlIGl0IGZ1cnRoZXIuXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2lua0Rvd24obikge1xyXG4gICAgICAgIC8vIExvb2sgdXAgdGhlIHRhcmdldCBlbGVtZW50IGFuZCBpdHMgc2NvcmUuXHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuY29udGVudC5sZW5ndGgsXHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmNvbnRlbnRbbl0sXHJcbiAgICAgICAgICAgIGVsZW1TY29yZSA9IHRoaXMuc2NvcmVGdW5jdGlvbihlbGVtZW50KTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgaW5kaWNlcyBvZiB0aGUgY2hpbGQgZWxlbWVudHMuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZDJOID0gKG4gKyAxKSAqIDI7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDFOID0gY2hpbGQyTiAtIDE7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBzdG9yZSB0aGUgbmV3IHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50LFxyXG4gICAgICAgICAgICAvLyBpZiBhbnkuXHJcbiAgICAgICAgICAgIHZhciBzd2FwOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGNoaWxkIGV4aXN0cyAoaXMgaW5zaWRlIHRoZSBhcnJheSkuLi5cclxuICAgICAgICAgICAgaWYgKGNoaWxkMU4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIExvb2sgaXQgdXAgYW5kIGNvbXB1dGUgaXRzIHNjb3JlLlxyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMSA9IHRoaXMuY29udGVudFtjaGlsZDFOXSxcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZDFTY29yZSA9IHRoaXMuc2NvcmVGdW5jdGlvbihjaGlsZDEpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNjb3JlIGlzIGxlc3MgdGhhbiBvdXIgZWxlbWVudCdzLCB3ZSBuZWVkIHRvIHN3YXAuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQxU2NvcmUgPCBlbGVtU2NvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgc3dhcCA9IGNoaWxkMU47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRG8gdGhlIHNhbWUgY2hlY2tzIGZvciB0aGUgb3RoZXIgY2hpbGQuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZDJOIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQyID0gdGhpcy5jb250ZW50W2NoaWxkMk5dLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkMlNjb3JlID0gdGhpcy5zY29yZUZ1bmN0aW9uKGNoaWxkMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQyU2NvcmUgPCAoc3dhcCA9PSBudWxsID8gZWxlbVNjb3JlIDogY2hpbGQxU2NvcmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dhcCA9IGNoaWxkMk47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IG5lZWRzIHRvIGJlIG1vdmVkLCBzd2FwIGl0LCBhbmQgY29udGludWUuXHJcbiAgICAgICAgICAgIGlmIChzd2FwICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFtuXSA9IHRoaXMuY29udGVudFtzd2FwXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFtzd2FwXSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBuID0gc3dhcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGFyZSBkb25lLlxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnRzLmtkVHJlZSA9IGtkVHJlZTtcclxuZXhwb3J0cy5CaW5hcnlIZWFwID0gQmluYXJ5SGVhcDtcclxuXHJcbiIsIihmdW5jdGlvbiAoKSB7dmFyIGE9e307ZnVuY3Rpb24gZyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYyh0LGUpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcz1lW29dO3MuZW51bWVyYWJsZT1zLmVudW1lcmFibGV8fCExLHMuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHMmJihzLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxzLmtleSxzKX19ZnVuY3Rpb24gaCh0LGUsbyl7cmV0dXJuIGUmJmModC5wcm90b3R5cGUsZSksbyYmYyh0LG8pLHR9dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbyl7dmFyIHM9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOlwiZ3JheVwiLGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOlwiMTZweCBNb25vc3BhY2VcIixyPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTowLG49YXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0/YXJndW1lbnRzWzVdOjA7Zyh0aGlzLHQpLHRoaXMueD1yLHRoaXMueT1uLHRoaXMuY3R4PWUsdGhpcy5jYW52YXM9byx0aGlzLmNvbG9yPXMsdGhpcy5mb250PWksdGhpcy5zZXRQb3M9dGhpcy5zZXRQb3MuYmluZCh0aGlzKX1yZXR1cm4gaCh0LFt7a2V5OlwidHJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0sZT10aGlzLmNhbnZhcztyZXR1cm4gdD9lLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLnNldFBvcyk6ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5zZXRQb3MpLHRoaXN9fSx7a2V5Olwic2V0UG9zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIHRoaXMueD1NYXRoLmZsb29yKHQuY2xpZW50WC1lLmxlZnQpLHRoaXMueT1NYXRoLmZsb29yKHQuY2xpZW50WS1lLnRvcCksdGhpc319LHtrZXk6XCJkcmF3XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLngsZT10aGlzLnksbz10aGlzLmNhbnZhcyxzPXRoaXMuY3R4LGk9dGhpcy5mb250LHI9dGhpcy5jb2xvcixuPVwiWDogXCIuY29uY2F0KHQsXCIsIFk6IFwiKS5jb25jYXQoZSk7cy5zYXZlKCkscy5maWxsU3R5bGU9cixzLmZvbnQ9aTt2YXIgYT10PG8ud2lkdGgvMj8yMDotcy5tZWFzdXJlVGV4dChuKS53aWR0aC0yMCx2PWU8by5oZWlnaHQvMj8yNTotMTg7cmV0dXJuIHMuZmlsbFRleHQobix0aGlzLngrYSx0aGlzLnkrdikscy5yZXN0b3JlKCksdGhpc319XSksdH0oKTtmdW5jdGlvbiBkKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBmKHQsZSl7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBzPWVbaV07cy5lbnVtZXJhYmxlPXMuZW51bWVyYWJsZXx8ITEscy5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gcyYmKHMud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHMua2V5LHMpfX1mdW5jdGlvbiBlKHQsZSxpKXtyZXR1cm4gZSYmZih0LnByb3RvdHlwZSxlKSxpJiZmKHQsaSksdH12YXIgYj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxpLHMscixsLG4pe2QodGhpcyx0KSx0aGlzLmNvbG9yPWUsdGhpcy5saW5lV2lkdGg9aSx0aGlzLnN0YXJ0WD1zLHRoaXMuc3RhcnRZPXIsdGhpcy5lbmRYPWwsdGhpcy5lbmRZPW59cmV0dXJuIGUodCxbe2tleTpcImRyYXdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbG9yLGk9dGhpcy5saW5lV2lkdGgscz10aGlzLnN0YXJ0WCxyPXRoaXMuc3RhcnRZLGw9dGhpcy5lbmRYLG49dGhpcy5lbmRZO3Quc2F2ZSgpLHQuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1lLHQubGluZVdpZHRoPWksdC5tb3ZlVG8ocyxyKSx0LmxpbmVUbyhsLG4pLHQuc3Ryb2tlKCksdC5yZXN0b3JlKCl9fV0pLHR9KCksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJncmF5XCIsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06LjMscz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MTAscj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106NSxsPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTpcIkRhcmtHcmF5XCIsbj1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06LjUsbz1hcmd1bWVudHMubGVuZ3RoPjYmJnZvaWQgMCE9PWFyZ3VtZW50c1s2XT9hcmd1bWVudHNbNl06XCIxNnB4IE1vbm9zcGFjZVwiO2QodGhpcyx0KSx0aGlzLmNvbG9yPWUsdGhpcy5saW5lV2lkdGg9aSx0aGlzLnN0ZXA9cyx0aGlzLmJvbGROdGg9cix0aGlzLmJvbGRDb2xvcj1sLHRoaXMuYm9sZFdpZHRoPW4sdGhpcy5mb250PW8sdGhpcy5saW5lcz1udWxsfXJldHVybiBlKHQsW3trZXk6XCJjcmVhdGVMaW5lc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmNvbG9yLGk9dGhpcy5saW5lV2lkdGgscz10aGlzLnN0ZXAscj10aGlzLmJvbGROdGgsbD10aGlzLmJvbGRDb2xvcixuPXRoaXMuYm9sZFdpZHRoLG89W10sYT1yKnMsaD0wO2g8dC53aWR0aDtoKz1zKXt2YXIgdj1oJWE9PTA7by5wdXNoKHY/bmV3IGIobCxuLGgsMCxoLHQuaGVpZ2h0KTpuZXcgYihlLGksaCwwLGgsdC5oZWlnaHQpKX1mb3IodmFyICQ9MDskPHQuaGVpZ2h0OyQrPXMpe3ZhciBkPSQlYT09MDtvLnB1c2goZD9uZXcgYihsLG4sMCwkLHQud2lkdGgsJCk6bmV3IGIoZSxpLDAsJCx0LndpZHRoLCQpKX10aGlzLmxpbmVzPW99fSx7a2V5OlwiZHJhd1RleHRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuc3RlcCxzPXRoaXMuYm9sZE50aCxyPXRoaXMuYm9sZENvbG9yLGw9dGhpcy5mb250O3Quc2F2ZSgpLHQuZm9udD1sLHQuZmlsbFN0eWxlPXIsdC5maWxsVGV4dChcIjBcIiwxLDE1KTtmb3IodmFyIG49aSpzO248ZS53aWR0aDtuKz1pKnMpdC5maWxsVGV4dChuLG4sMTUpO2Zvcih2YXIgbz1pKnM7bzxlLmhlaWdodDtvKz1pKnMpdC5maWxsVGV4dChvLDAsbysxNSk7dC5yZXN0b3JlKCl9fSx7a2V5OlwiZHJhd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5saW5lc3x8dGhpcy5jcmVhdGVMaW5lcyhlKSx0aGlzLmxpbmVzLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUuZHJhdyh0KX0pLHRoaXMuZHJhd1RleHQodCxlKX19XSksdH0oKTthLk1vdXNlPWksYS5HcmlkPWo7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9YX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShmdW5jdGlvbigpe3JldHVybiBhfSl9fSkoKTsiLCIvLyB0b2RvOlxyXG4vLyAgIG1vdmUgb3V0IHNlcmlhbCA/IE9yIGxvb2sgZm9yIGEgc2VyaWFsIHJlYWRsaW5lIGltcGxlbWVudGF0aW9uID8/P1xyXG4vLyBidWdzOlxyXG4vLyAgIGRpc2Nvbm5lY3QgLSBGYWlsZWQgdG8gZXhlY3V0ZSAnY2xvc2UnIG9uICdTZXJpYWxQb3J0JzogQ2Fubm90IGNhbmNlbCBhIGxvY2tlZCBzdHJlYW1cclxuXHJcbmltcG9ydCB7IFBhZCB9IGZyb20gXCIuL3BjYlwiO1xyXG5cclxuLyoqXHJcbiAqIERldmljZTogYWJzdHJhY3RzIGFjY2VzcyB0byBtYWNoaW5lLlxyXG4gKiBJdCBcInNpbXBsaWZpZXNcIiBzZXJpYWwgcG9ydCBhY2Nlc3MuIEF0IHRoZSBtb21lbnQgaXQgb25seSBvbGxvd3MgXCJ3cml0ZSBhbmQgcmVzcG9uc2VcIiBzdHlsZSBjb21tdW5pY2F0aW9uLlxyXG4gKiBUaGUgc2VyaWFsIHBvcnQgaXMgb3BlbmVkLCB0aGVuIGEgcmVhZGVyIGxvb3AgaXMgc3RhcnRldCwgd2hpY2ggcHVzaGVzIGVhY2ggbmV3IGxpbmUgaW50byB0aGUgaW5wdXRRdWV1ZS5cclxuICogRnVuY3Rpb24gc2VyaWFsV3JpdGVXYWl0IGlzIHVzZWQgdG8gaXNzdWUgY29tbWFuZHMgYW5kIHdhaXQgZm9yIHRoZSBkZXZpY2UgdG8gYWtub3dsZWRnZS5cclxuICovXHJcblxyXG5leHBvcnQgY2xhc3MgRGV2aWNlIHtcclxuICAgIGRldmljZUNoZWNrOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VDb25uZWN0OiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VEaXNjb25uZWN0OiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VJbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VJbnB1dEZvcm06IEhUTUxGb3JtRWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VJbmZvOiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcbiAgICBkZXZpY2VMb2c6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuICAgIGRldmljZVNlcmlhbDogSFRNTERpdkVsZW1lbnQgfCBudWxsO1xyXG4gICAgcG9ydHM6IGFueTtcclxuICAgIHBvcnQ6IGFueTtcclxuICAgIHRleHREZWNvZGVyOiBUZXh0RGVjb2RlclN0cmVhbTtcclxuICAgIHJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPHN0cmluZz47XHJcbiAgICBpbnB1dExhc3Q6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnB1dFF1ZXVlOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGV2aWNlQ2hlY2sgPSA8SFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGV2aWNlQ2hlY2tcIik7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VDb25uZWN0ID0gPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldmljZUNvbm5lY3RcIik7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VEaXNjb25uZWN0ID0gPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldmljZURpc2Nvbm5lY3RcIik7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VJbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldmljZUlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlSW5wdXRGb3JtID0gPEhUTUxGb3JtRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXZpY2VJbnB1dEZvcm1cIik7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VJbmZvID0gPEhUTUxEaXZFbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldmljZUluZm9cIik7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VMb2cgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGV2aWNlTG9nXCIpO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlU2VyaWFsID0gPEhUTUxEaXZFbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldmljZVNlcmlhbFwiKTtcclxuICAgICAgICB0aGlzLnBvcnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXJTdHJlYW0oKTtcclxuICAgICAgICBpZiAodGhpcy5kZXZpY2VDaGVjayAmJiB0aGlzLmRldmljZUNvbm5lY3QgJiYgdGhpcy5kZXZpY2VEaXNjb25uZWN0ICYmIHRoaXMuZGV2aWNlSW5wdXQgJiYgdGhpcy5kZXZpY2VJbnB1dEZvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2VDaGVjay5vbmNsaWNrID0gdGhpcy5zZXJpYWxDaGVjay5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZUNvbm5lY3Qub25jbGljayA9IHRoaXMuc2VyaWFsQ29ubmVjdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZURpc2Nvbm5lY3Qub25jbGljayA9IHRoaXMuc2VyaWFsRGlzY29ubmVjdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRldmljZURvc29tZS5vbmNsaWNrID0gdGhpcy5zZXJpYWxEb3NvbWUuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5kZXZpY2VJbnB1dC5vbmNoYW5nZSA9IHRoaXMuc2VyaWFsSW5wdXRDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2VJbnB1dEZvcm0ub25zdWJtaXQgPSB0aGlzLnNlcmlhbElucHV0Rm9ybS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlcmlhbENoZWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVyd3JpdGUhIFNldCB0aGUgY3VycmVudCBwb3NpdGlvbiB0byBaZXJvLiBBbGwgZnVydGhlciBjb21tYW5kcyB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoaXMgcG9zaXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRaZXJvPyhwb2ludDpbbnVtYmVyLG51bWJlcl0pOiB2b2lkO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICogT3ZlcndyaXRlISBNb3ZlIHRvIHBvc2l0aW9uLiBJZiBvbmUgY29vcmRpbmF0ZSBpcyB1bmRlZmluZWQsIGl0J3MgaWdub3JlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW92ZVRvPyh4Om51bWJlcnx1bmRlZmluZWQsIHk6bnVtYmVyfHVuZGVmaW5lZCwgejpudW1iZXJ8dW5kZWZpbmVkLCBlOiBudW1iZXIgfCB1bmRlZmluZWQpOiB2b2lkXHJcbiAgICBwdWJsaWMgbW92ZVRvQWxsPyhwbGlzdDogUGFkW10sIHN0YXJ0OltudW1iZXIsbnVtYmVyXSk7XHJcblxyXG4gICAgcHVibGljIGJsb2I/KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVyd3JpdGUgdGhpcyBpbiBkZXJpdmVkIGNsYXNzIHRvIGdldCBub3RpZmljYXRpb24gd2hlbiBzb21lIGRldmljZSB3YXMgY29ubmVjdGVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25TZXJpYWxDb25uZWN0ZWQ/KCk6dm9pZDtcclxuICAgIC8qKlxyXG4gICAgICogT3ZlcndyaXRlIHRoaXMgaW4gZGVyaXZlZCBjbGFzcyB0byBnZXQgbm90aWZpY2F0aW9uIHdoZW4gc29tZSBkZXZpY2Ugd2FzIGRpc2Nvbm5lY3RlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIG9uU2VyaWFsRGlzY29ubmVjdGVkPygpOnZvaWQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVucyBhIGRpYWxvZyB3aGVyZSB1c2VyIGNhbiBzZWxlY3QgYSBkZXZpY2UgdG8gY29ubmVjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHNlcmlhbENvbm5lY3QoKSB7XHJcbiAgICAgICAgLy8gb3BlbnMgZGlhbG9nIHdoZXJlIHVzZXIgY2FuIHNlbGVjdCBhIGRldmljZVxyXG4gICAgICAgICg8YW55Pm5hdmlnYXRvcikuc2VyaWFsLnJlcXVlc3RQb3J0KCkudGhlbigocG9ydCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2VyaWFsQ29ubmVjdCcsIHBvcnQpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbFBvcnRPcGVuKHBvcnQpO1xyXG4gICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCdzZXJpYWxDb25uZWN0JyxyZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbEVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNlcmlhbENvbm5lY3REZXZpY2UodmlkOiBudW1iZXIsIHBpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcG9ydCBvZiB0aGlzLnBvcnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBzZXJpYWxDb25uZWN0RGV2aWNlOiBzZXJpYWwgYXZhaWxhYmxlLCBwb3J0czogYCwgcG9ydC5nZXRJbmZvKCkpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHVzYlByb2R1Y3RJZCwgdXNiVmVuZG9ySWQgfSA9IHBvcnQuZ2V0SW5mbygpO1xyXG4gICAgICAgICAgICBpZiAodXNiUHJvZHVjdElkID09IHBpZCAmJiB1c2JWZW5kb3JJZCA9PSB2aWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsUG9ydE9wZW4ocG9ydCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSBkZXZpY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHNlcmlhbERpc2Nvbm5lY3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9ydCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyBkb2VzJ250IGRvIGl0IDooXHJcbiAgICAgICAgICAgIHRoaXMucG9ydC5jbG9zZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3J0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3J0IGNsb3NlZCcpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICBXYWl0IHVudGlsIHNvbWUgcmVzcG9uc2Ugb3IgdGltZW91dCwgcmV0dXJucyByZXNwb25zZSBvciAndGltZW91dCcgb3IgbWlnaHQgZmFpbCB3aXRoICdidXN5JyBvciAnZGlzY29ubmVjdGVkJ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgc2VyaWFsV3JpdGVXYWl0KHZhbHVlOiBzdHJpbmcsIHRpbWVvdXQ6IG51bWJlciA9IDEwMDAwKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICAvLyBjbGVhbiBzZXJpYWwgaW5wdXRcclxuICAgICAgICB0aGlzLmlucHV0UXVldWUgPSBbXTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcnQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCB1bnRpbCBzb21lIHJlc3BvbnNlIG9yIHRpbWVvdXRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0ZXAgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4dGltZSA9IHRpbWVvdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFhdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gYXdhaXQgdGhpcy5zZXJpYWxBdmFpbCh0aW1lc3RlcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heHRpbWUgPSBtYXh0aW1lIC0gdGltZXN0ZXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXh0aW1lIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYHNlcmlhbFdyaXRlV2FpdCBhdmFpbDoke2F2YWlsYWJsZX0gdGltZToke3RpbWVvdXQgLSBtYXh0aW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBzZXJpYWxXcml0ZVdhaXQgY2hlY2s6ICR7dGhpcy5pbnB1dFF1ZXVlLmxlbmd0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dFF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wID0gPHN0cmluZz50aGlzLmlucHV0UXVldWUucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBzZXJpYWxXcml0ZVdhaXQgcmVzb2x2ZTogJHtpbnB9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW5wKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgc2VyaWFsV3JpdGVXYWl0IHJlamVjdDogYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgndGltZW91dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnYnVzeScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKHRoaXMucG9ydCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ2Rpc2Nvbm5lY3RlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cml0ZSBhbnl0aGluZyB0byB0aGUgZGV2aWNlLlxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXJpYWxJbnB1dEZvcm0oZXZlbnQ6IElucHV0RXZlbnQpIHsgLy8gZmlyZXMgd2hlbiByZXR1cm4gaXMgZW50ZXJlZFxyXG4gICAgICAgIGlmICh0aGlzLmRldmljZUlucHV0KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGZvcm0gd2lsbCBkbyBzdHJhbmdlIHRoaW5ncyAhXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxJbnB1dENoYW5nZShldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHdyaXRlIGFueXRoaW5nIHRvIHRoZSBkZXZpY2UuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHNlcmlhbElucHV0Q2hhbmdlKGV2ZW50OiBJbnB1dEV2ZW50KSB7IC8vIGZpcmVzIHdoZW4gcmV0dXJuIGlzIGVudGVyZWRcclxuICAgICAgICBpZiAodGhpcy5kZXZpY2VJbnB1dCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IHRoaXMuZGV2aWNlSW5wdXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZSh0ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2VyaWFsSW5wdXRDaGFuZ2UgLSBubyBwb3J0IG9wZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiAqKioqKioqKioqKioqKioqKiBwcml2YXRlIHN0dWZmICoqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNlcmlhbENoZWNrKCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoXCJzZXJpYWxcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3J0cygpO1xyXG4gICAgICAgICAgICAoPGFueT5uYXZpZ2F0b3IpLnNlcmlhbC5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEF1dG9tYXRpY2FsbHkgb3BlbiBldmVudC50YXJnZXQgb3Igd2FybiB1c2VyIGEgcG9ydCBpcyBhdmFpbGFibGUuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VyaWFsQ2hlY2s6Y29ubmVjdCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9ydHMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICg8YW55Pm5hdmlnYXRvcikuc2VyaWFsLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHxldmVudC50YXJnZXR8IGZyb20gdGhlIFVJLlxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNlcmlhbCBwb3J0IHdhcyBvcGVuZWQsIGEgc3RyZWFtIGVycm9yIHdvdWxkIGJlIG9ic2VydmVkIGFzIHdlbGwuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VyaWFsQ2hlY2s6ZGlzY29ubmVjdCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCdObyBzZXJpYWwgQVBJIGF2YWlsYWJsZSwgdHJ5IGFub3RoZXIgYnJvd3NlcicpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbEVycm9yKFwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIHNlcmlhbCBwb3J0LiBDb25uZWN0aW9uIHRvIGRldmljZSBpbXBvc3NpYmxlISBVc2UgQ2hyb21lIVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBvcnRzKCkge1xyXG4gICAgICAgIC8vIGxpc3RzIGFsbCByZWNlbnRseSB1c2VkIHBvcnRzLCBjb3VsZCBqdXN0IG9wZW4gb25lIHRoZW4uXHJcbiAgICAgICAgKDxhbnk+bmF2aWdhdG9yKS5zZXJpYWwuZ2V0UG9ydHMoKS50aGVuKChwb3J0cykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlUG9ydHM6JywgcG9ydHMpO1xyXG4gICAgICAgICAgICB0aGlzLnBvcnRzID0gcG9ydHM7XHJcbiAgICAgICAgICAgIGxldCBodG1sID0gJyc7Ly9kZXZpY2VzOjxicj4nO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwb3J0IG9mIHBvcnRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgc2VyaWFsIGF2YWlsYWJsZSwgcG9ydHM6IGAsIHBvcnQuZ2V0SW5mbygpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdXNiUHJvZHVjdElkLCB1c2JWZW5kb3JJZCB9ID0gcG9ydC5nZXRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgdXBkYXRlUG9ydHMgcG9ydCBwaWQ6JHt1c2JQcm9kdWN0SWR9IHZpZDoke3VzYlZlbmRvcklkfWApO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInczLWNvbnRhaW5lclwiPjxpIGNsYXNzPVwiZmEtc29saWQgZmEtbWljcm9jaGlwXCI+PC9pPiBwaWQ6JHt1c2JQcm9kdWN0SWR9IHZpZDoke3VzYlZlbmRvcklkfSA8YnV0dG9uIGNsYXNzPVwidzMtYnRuIHczLXJvdW5kIHczLWxpZ2h0LWdyZXkgdzMtdGlueVwiIGlkPVwiJHt1c2JWZW5kb3JJZH0tJHt1c2JQcm9kdWN0SWR9XCI+PGkgY2xhc3M9XCJmYSBmYS1wbHVnXCI+PC9pPiBjb25uZWN0IDwvYnV0dG9uPjwvZGl2PmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGV2aWNlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VJbmZvLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidG5zID0gdGhpcy5kZXZpY2VJbmZvLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnRuIG9mIGJ0bnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHsgY29uc3QgaWRzID0gYnRuLmlkLnNwbGl0KCctJyk7IGNvbnNvbGUubG9nKGlkcyk7IHRoaXMuc2VyaWFsQ29ubmVjdERldmljZShwYXJzZUludChpZHNbMF0pLCBwYXJzZUludChpZHNbMV0pKSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRldmljZUNvbm5lY3QgJiYgKHRoaXMucG9ydHMgPT0gbnVsbCB8fCB0aGlzLnBvcnRzLmxlbmd0aCA9PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3VwZGF0ZVBvcnRzOiBvcGVuIGRldiBidXR0b25zISEhJywgdGhpcy5kZXZpY2VDb25uZWN0LmNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZUNvbm5lY3QuY2xhc3NOYW1lID0gdGhpcy5kZXZpY2VDb25uZWN0LmNsYXNzTmFtZS5yZXBsYWNlKCd3My1oaWRlJywgJ3czLXNob3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3BlbnMgYSBnaXZ2ZW4gcG9ydC4gQ2FuIGJlIHVzZWQgYWZ0ZXIgcXVlcmlpbmcgcG9ydHMgd2l0aCB1cGRhdGVQb3J0cy5cclxuICAgICAqIEBwYXJhbSBwb3J0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2VyaWFsUG9ydE9wZW4ocG9ydDogYW55KSB7XHJcbiAgICAgICAgcG9ydC5vbmNvbm5lY3QgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDT05ORUNURURgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBvcnQub25kaXNjb25uZWN0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRElTQ09OTkVDVEVEYCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMub25TZXJpYWxEaXNjb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZXJpYWxEaXNjb25uZWN0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcG9ydC5vcGVuKHsgYmF1ZFJhdGU6IDI1MDAwMCB9KS50aGVuKCh2YWwpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGV2aWNlTG9nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZUxvZy5pbm5lckhUTUwgPSBcImNvbm5lY3RlZDxicj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncG9ydCBvcGVuZWQgPyAnLCB0aGlzLnBvcnQpO1xyXG4gICAgICAgICAgICBpZih0aGlzLm9uU2VyaWFsQ29ubmVjdGVkKXtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZXJpYWxDb25uZWN0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnNlcmlhbFJlYWQuYmluZCh0aGlzKSwgMCk7IC8vIHN0YXJ0IHJlYWQgbG9vcFxyXG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbEVycm9yKGVycm9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXJpYWxFcnJvcihlcnJvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdzZXJpYWxFcnJvcicsIGVycm9yKTtcclxuICAgICAgICBpZiAodGhpcy5kZXZpY2VMb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2VMb2cuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwidzMtcmVkXCI+JHtlcnJvcn08L3NwYW4+PGJyPmBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCwgc3RhcnRzIHRoZSByZWFkIGxpbmUgbG9vcC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBzZXJpYWxSZWFkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvcnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhZGFibGVTdHJlYW1DbG9zZWQgPSB0aGlzLnBvcnQucmVhZGFibGUucGlwZVRvKHRoaXMudGV4dERlY29kZXIud3JpdGFibGUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IHRoaXMudGV4dERlY29kZXIucmVhZGFibGUuZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgICAgIC8vIExpc3RlbiB0byBkYXRhIGNvbWluZyBmcm9tIHRoZSBzZXJpYWwgZGV2aWNlLlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuc2VyaWFsUmVhZG9uLmJpbmQodGhpcyksIDEpOyAvLyB3aWxsIGxvb3AgdGhlcmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCwgaGFuZGxlcyB0aGUgcmVhZCBsaW5lIGxvb3AuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgc2VyaWFsUmVhZG9uKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHRoaXMucmVhZGVyLnJlYWQoKTtcclxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBzZXJpYWwgcG9ydCB0byBiZSBjbG9zZWQgbGF0ZXIuIC8vIERvZXMgbm90IGhhcHBlbiAhXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlcmlhbFJlYWQgLSBkb25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHVzaGVkU3R1ZmYgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlIGlzIGEgc3RyaW5nLlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ1xcbicpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gdmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBc3NlcnRpb24gZmFpbGVkICcsIHZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTsgLy8gdGhlcmUgaXMgYSBcXG4gaW4gaXQgIVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0TGFzdCArPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRRdWV1ZS5wdXNoKHRoaXMuaW5wdXRMYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxMb2codGhpcy5pbnB1dExhc3QsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0TGFzdCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoZWRTdHVmZiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRMYXN0ID0gdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgc2VyaWFsUmVhZG9uIGxhc3Q6IFwiJHt0aGlzLmlucHV0TGFzdH1cImApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBubyBcXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0TGFzdCArPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgc2VyaWFsUmVhZG9uIGxhc3Q6IFwiJHt0aGlzLmlucHV0TGFzdH1cImApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwdXNoZWRTdHVmZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5zZXJpYWxDYWxsYmFjay5iaW5kKHRoaXMpLCA1KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5zZXJpYWxSZWFkb24uYmluZCh0aGlzKSwgMSk7IC8vIHdpbGwgbG9vcCB0aGVyZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxFcnJvcihlcnJvci50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXJpYWxDYWxsYmFjaygpIHtcclxuICAgICAgICAvLyBjb25zdCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldmljZUxvZycpO1xyXG4gICAgICAgIC8vIGlmIChlbGVtKSB7XHJcbiAgICAgICAgLy8gICAgIGxldCBsYXRlc3QgPSB0aGlzLmlucHV0UXVldWUucG9wKCk7XHJcbiAgICAgICAgLy8gICAgIHdoaWxlIChsYXRlc3QpIHtcclxuICAgICAgICAvLyAgICAgICAgIGVsZW0uaW5uZXJIVE1MICs9IGAke2xhdGVzdH08YnI+YDtcclxuICAgICAgICAvLyAgICAgICAgIGxhdGVzdCA9IHRoaXMuaW5wdXRRdWV1ZS5wb3AoKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNlcmlhbFdyaXRlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbExvZyh2YWx1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvLyB3cml0ZS4uLlxyXG4gICAgICAgIGxldCB1dGY4RW5jb2RlID0gbmV3IFRleHRFbmNvZGVyKCk7XHJcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gdGhpcy5wb3J0LndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG4gICAgICAgIGF3YWl0IHdyaXRlci53cml0ZSh1dGY4RW5jb2RlLmVuY29kZShgJHt2YWx1ZX1cXG5gKSk7XHJcbiAgICAgICAgd3JpdGVyLnJlbGVhc2VMb2NrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyB1bnRpbCBkYXRhIHdhcyByZWFkIG9yIHRpbWVvdXRcclxuICAgICAqIEBwYXJhbSB0aW1lb3V0XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNlcmlhbEF2YWlsKHRpbWVvdXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0UXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlcmlhbExvZyh0ZXh0OiBzdHJpbmcsIGluY29tbWluZzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmRldmljZVNlcmlhbCkge1xyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5kZXZpY2VTZXJpYWwuY2hpbGRFbGVtZW50Q291bnQgPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoID0gdGhpcy5kZXZpY2VTZXJpYWwuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgIGlmIChjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlU2VyaWFsLnJlbW92ZUNoaWxkKGNoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5jb21taW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZVNlcmlhbC5pbm5lckhUTUwgKz0gYDxkaXY+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1hcnJvdy1yaWdodC10by1icmFja2V0XCI+PC9pPiAke3RleHR9PC9kaXY+YFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VTZXJpYWwuaW5uZXJIVE1MICs9IGA8ZGl2PjxpIGNsYXNzPVwiZmEtc29saWQgZmEtYXJyb3ctdXAtcmlnaHQtZnJvbS1zcXVhcmVcIj48L2k+ICR7dGV4dH08L2Rpdj5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsb2JhbFRoaXMucmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7a2RUcmVlLCBrZFRyZWVPYmplY3R9IGZyb20gJy4va2RUcmVlJztcclxuXHJcbmNsYXNzIEJvdW5kaW5nQm94IHtcclxuICAgIG1pbng6IG51bWJlciA9IDk5OTk5O1xyXG4gICAgbWlueTogbnVtYmVyID0gOTk5OTk7XHJcbiAgICBtYXh4OiBudW1iZXIgPSAtOTk5OTk7XHJcbiAgICBtYXh5OiBudW1iZXIgPSAtOTk5OTk7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gICAgdXBkYXRlRnJvbVBhZChwYWQ6UGFkKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGUocGFkLnBvc1gsIHBhZC5wb3NZKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh4IDwgdGhpcy5taW54KSB0aGlzLm1pbnggPSB4O1xyXG4gICAgICAgIGlmICh5IDwgdGhpcy5taW55KSB0aGlzLm1pbnkgPSB5O1xyXG4gICAgICAgIGlmICh4ID4gdGhpcy5tYXh4KSB0aGlzLm1heHggPSB4O1xyXG4gICAgICAgIGlmICh5ID4gdGhpcy5tYXh5KSB0aGlzLm1heHkgPSB5O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBiYjogJHt0aGlzLm1pbnl9ICR7dGhpcy5tYXh5fSAke3RoaXMuY2VudGVyKClbMV19YCk7XHJcbiAgICB9XHJcbiAgICBjZW50ZXIoem9vbTogbnVtYmVyID0gMS4wKTogW3g6IG51bWJlciwgeTogbnVtYmVyXSB7XHJcbiAgICAgICAgcmV0dXJuIFsodGhpcy5taW54ICsgKHRoaXMubWF4eCAtIHRoaXMubWlueCkgLyAyKSAqIHpvb20sICh0aGlzLm1pbnkgKyAodGhpcy5tYXh5IC0gdGhpcy5taW55KSAvIDIpICogem9vbV07XHJcbiAgICB9XHJcbiAgICB6ZXJvKHpvb206IG51bWJlciA9IDEuMCk6IFt4OiBudW1iZXIsIHk6IG51bWJlcl0ge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5taW54ICogem9vbSwgdGhpcy5taW55ICogem9vbV07XHJcbiAgICB9XHJcbiAgICBzaXplKHpvb206IG51bWJlciA9IDEuMCk6IFt4OiBudW1iZXIsIHk6IG51bWJlcl0ge1xyXG4gICAgICAgIHJldHVybiBbKHRoaXMubWF4eCAtIHRoaXMubWlueCkgKiB6b29tLCAodGhpcy5tYXh5IC0gdGhpcy5taW55KSAqIHpvb21dO1xyXG4gICAgfVxyXG4gICAgZGlhZ29uYWwoem9vbTogbnVtYmVyID0gMS4wKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBzaXplID0gdGhpcy5zaXplKHpvb20pO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoc2l6ZVswXSpzaXplWzBdICsgc2l6ZVsxXSpzaXplWzFdKTtcclxuICAgIH1cclxuICAgIC8qKiBDaGVjayBpZiBwYWQgaXMgaW5zaWRlIHRoZSBib3VuZGluZ2JveCAqL1xyXG4gICAgaW5zaWRlKHBhZDogUGFkKTpib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHBhZC5wb3NYID49IHRoaXMubWlueCAmJiBwYWQucG9zWCA8PSB0aGlzLm1heHgpICYmIChwYWQucG9zWSA+PSB0aGlzLm1pbnkgJiYgcGFkLnBvc1kgPD0gdGhpcy5tYXh5KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGFkU3R5bGUge1xyXG4gICAgcHVibGljIGZvcm06IHN0cmluZztcclxuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IoZm9ybTogc3RyaW5nLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZm9ybSA9IGZvcm07XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHc7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGFkIHtcclxuICAgIHBvc1g6IG51bWJlcjtcclxuICAgIHBvc1k6IG51bWJlcjtcclxuICAgIHN0eWxlOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZTogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucG9zWCA9IHg7XHJcbiAgICAgICAgdGhpcy5wb3NZID0geTtcclxuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XHJcbiAgICB9XHJcbiAgICBhc1R1cGxlKCk6W251bWJlcixudW1iZXJdIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMucG9zWCwgdGhpcy5wb3NZXTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBDQiBleHRlbmRzIGtkVHJlZU9iamVjdCB7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBtYXBTdHlsZXM6IE1hcDxzdHJpbmcsIFBhZFN0eWxlPjtcclxuICAgIG1hcFBhZHM6IE1hcDxzdHJpbmcsIFNldDxQYWQ+PjtcclxuICAgIGZpbGVOYW1lOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIG1vdXNlRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbW91c2VTdGFydFg6IG51bWJlciA9IDA7XHJcbiAgICBtb3VzZVN0YXJ0WTogbnVtYmVyID0gMDtcclxuICAgIG1vdXNlT2ZmWDogbnVtYmVyID0gMDtcclxuICAgIG1vdXNlT2ZmWTogbnVtYmVyID0gMDtcclxuICAgIG1vdXNlU2VsZWN0OiBib29sZWFuO1xyXG4gICAgbW91c2VTZWxlY3RYOiBudW1iZXI7XHJcbiAgICBtb3VzZVNlbGVjdFk6IG51bWJlcjtcclxuXHJcbiAgICBwb3NaZXJvOiBudW1iZXJbXTtcclxuXHJcbiAgICB6b29tOiBudW1iZXIgPSA1LjA7XHJcbiAgICBiYlBjYjogQm91bmRpbmdCb3g7XHJcbiAgICBiYlNlbGVjdGlvbjogQm91bmRpbmdCb3g7XHJcbiAgICBiYlplcm86IEJvdW5kaW5nQm94OyAvLyB1c2UgY2VudGVyIGFzIHplcm9cclxuXHJcbiAgICB0cmVlOiBrZFRyZWU8UGFkPjtcclxuICAgIG5lYXJlc3Q6W1BhZCwgbnVtYmVyXVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm1hcFN0eWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBQYWRTdHlsZT4oKTtcclxuICAgICAgICB0aGlzLm1hcFBhZHMgPSBuZXcgTWFwPHN0cmluZywgU2V0PFBhZD4+KCk7XHJcbiAgICAgICAgdGhpcy5iYlBjYiA9IG5ldyBCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgIHRoaXMuYmJaZXJvID0gbmV3IEJvdW5kaW5nQm94KCk7XHJcbiAgICAgICAgdGhpcy5iYlNlbGVjdGlvbiA9IG5ldyBCb3VuZGluZ0JveCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENhbnZhcyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgWmVybyBwb3NpdGlvbiB0byB0aGUgbG93ZXIgbGVmdCBvZiBzZWxlY3Rpb24gcmVjdGFuZ2xlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0WmVybygpOnZvaWQge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAvLyB1c2UgbGFzdCBzZWxlY3Rpb24gPz8/XHJcbiAgICAgICAgdGhpcy5iYlplcm8gPSB0aGlzLmJiU2VsZWN0aW9uO1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFBjYjpzZXRaZXJvOiAke3RoaXMuYmJaZXJvLnplcm8oKX1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIFplcm8gcG9zaXRpb24gcmVsYXRpdmUgdG8gT3JpZ2luKDAsMCkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRaZXJvKCk6W251bWJlcixudW1iZXJdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYlplcm8uemVybygpOyAvLyBsb3dlciBsZWZ0ID8/IGJldHRlciB3aGVuIC5jZW50ZXIoKSA/P1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMgQWxsIFBhZHMgaW4gc2VsZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2VsZWN0ZWQoKTpQYWRbXSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDpQYWRbXSA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgbmVhciBvZiB0aGlzLm5lYXJlc3QpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobmVhcik7XHJcbiAgICAgICAgICAgIGlmKG5lYXIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmVhclswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIExvd2VyIGxlZnQgb2Ygc2VsZWN0aW9uIGFzIHR1cGxlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTZWxlY3RlZFplcm8oKTpbbnVtYmVyLG51bWJlcl0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJiU2VsZWN0aW9uLnplcm8oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGFkQ291bnQoKTpudW1iZXIge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgcGFkc2V0IG9mIHRoaXMubWFwUGFkcykge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gcGFkc2V0WzFdLnNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHpvb21Ub0ZpdChzaXplOltudW1iZXIsbnVtYmVyXSkge1xyXG4gICAgICAgIGxldCBwc2l6ZSA9IHRoaXMuYmJQY2Iuc2l6ZSgpO1xyXG4gICAgICAgIGxldCB6dyA9IHNpemVbMF0gLyBwc2l6ZVswXTtcclxuICAgICAgICBsZXQgemggPSBzaXplWzFdIC8gcHNpemVbMV07XHJcbiAgICAgICAgdGhpcy56b29tID0gKCh6dyA+IHpoKT8gemggOiB6dykgKiAuOTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUGNiOnpvb21Ub0ZpdCB6b29tICR7dGhpcy56b29tfWAsIHBzaXplKTtcclxuICAgICAgICB0aGlzLmNlbnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjZW50ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FudmFzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VPZmZYID0gLSh0aGlzLmJiUGNiLmNlbnRlcigpWzBdICogdGhpcy56b29tKSArIHRoaXMuY2FudmFzLndpZHRoIC8gMjtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU9mZlkgPSAtKHRoaXMuYmJQY2IuY2VudGVyKClbMV0gKiB0aGlzLnpvb20pICsgdGhpcy5jYW52YXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFkZFBhZFN0eWxlKG5hbWU6IHN0cmluZywgZm9ybTogc3RyaW5nLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWFwU3R5bGVzLnNldChuYW1lLCBuZXcgUGFkU3R5bGUoZm9ybSwgdywgaCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFBhZChzdHlsZTogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5tYXBQYWRzLmhhcyhzdHlsZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBQYWRzLnNldChzdHlsZSwgbmV3IFNldDxQYWQ+KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGFkc2V0ID0gdGhpcy5tYXBQYWRzLmdldChzdHlsZSk7XHJcbiAgICAgICAgaWYgKHBhZHNldCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdwYWQgPSBuZXcgUGFkKHN0eWxlLCB4LCB5KTtcclxuICAgICAgICAgICAgcGFkc2V0LmFkZChuZXdwYWQpO1xyXG4gICAgICAgICAgICB0aGlzLmJiUGNiLnVwZGF0ZSh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0cmVlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwYWRzIDogUGFkW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcGFkc2V0cyBvZiB0aGlzLm1hcFBhZHMudmFsdWVzKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHBhZCBvZiBwYWRzZXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkcy5wdXNoKHBhZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJlZSA9IG5ldyBrZFRyZWUoUENCLCBwYWRzLCBQQ0IuZGlzdGFuY2UsIFtcInBvc1hcIiwgXCJwb3NZXCJdKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyZWUgYmY6JywgdGhpcy50cmVlLmJhbGFuY2VGYWN0b3IoKSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdXNlRG93bihldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUuZXZlbnQuYnV0dG9uc1xyXG4gICAgICAgIGNvbnN0IHRyYW5zID0gdGhpcy5jdHguZ2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgaWYoZXZlbnQuYnV0dG9uID09IDApIHsgLy8gc3RhcnQgc2VsZWN0XHJcbiAgICAgICAgICAgIGNvbnN0IG14ID0gKGV2ZW50LmNsaWVudFggKiB0cmFucy5hIC0gdGhpcy5tb3VzZU9mZlgpIC8gdGhpcy56b29tO1xyXG4gICAgICAgICAgICBjb25zdCBteSA9ICh0aGlzLmNhbnZhcy5oZWlnaHQtKGV2ZW50LmNsaWVudFkgLSB0aGlzLmNhbnZhcy5vZmZzZXRUb3ApIC0gdGhpcy5tb3VzZU9mZlkpIC8gdGhpcy56b29tO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlU3RhcnRYID0gbXg7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VTdGFydFkgPSBteTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdFggPSBteDtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdFkgPSBteTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdCA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBQY2I6bW91c2VEb3duOiB4OiR7dGhpcy5tb3VzZVN0YXJ0WH0geToke3RoaXMubW91c2VTdGFydFl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGV2ZW50LmJ1dHRvbiAhPSAwKSB7IC8vIHBhbiBhcm91bmRcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVN0YXJ0WCA9IGV2ZW50LmNsaWVudFggKiB0cmFucy5hIC0gdGhpcy5tb3VzZU9mZlg7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VTdGFydFkgPSBldmVudC5jbGllbnRZICogdHJhbnMuZCAtIHRoaXMubW91c2VPZmZZO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW91c2VVcChldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zID0gdGhpcy5jdHguZ2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BjYjptb3VzZVVwIGV2ZW50OicsIGV2ZW50KTtcclxuICAgICAgICBpZihldmVudC5idXR0b24gIT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihldmVudC5idXR0b24gPT0gMCkgeyAvLyBzZWxlY3RcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0cmFucywgZXZlbnQpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnJywgdGhpcy5jYW52YXMuaGVpZ2h0LShldmVudC5jbGllbnRZLXRoaXMuY2FudmFzLm9mZnNldFRvcCksIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICAgICAgY29uc3QgbXggPSAoZXZlbnQuY2xpZW50WCAqIHRyYW5zLmEgLSB0aGlzLm1vdXNlT2ZmWCkgLyB0aGlzLnpvb207XHJcbiAgICAgICAgICAgIGNvbnN0IG15ID0gKHRoaXMuY2FudmFzLmhlaWdodC0oZXZlbnQuY2xpZW50WSAtIHRoaXMuY2FudmFzLm9mZnNldFRvcCkgLSB0aGlzLm1vdXNlT2ZmWSkgLyB0aGlzLnpvb207XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3RYID0gbXg7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3RZID0gbXk7XHJcblxyXG4gICAgICAgICAgICAvLyBiYiA9IHNlbGVjdGVkIHJlY3RhbmdsZVxyXG4gICAgICAgICAgICB0aGlzLmJiU2VsZWN0aW9uID0gbmV3IEJvdW5kaW5nQm94KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmJTZWxlY3Rpb24udXBkYXRlKHRoaXMubW91c2VTdGFydFgsIHRoaXMubW91c2VTdGFydFkpO1xyXG4gICAgICAgICAgICB0aGlzLmJiU2VsZWN0aW9uLnVwZGF0ZSh0aGlzLm1vdXNlU2VsZWN0WCwgdGhpcy5tb3VzZVNlbGVjdFkpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBhZCA9IG5ldyBQYWQoJycsIHRoaXMuYmJTZWxlY3Rpb24uY2VudGVyKClbMF0sIHRoaXMuYmJTZWxlY3Rpb24uY2VudGVyKClbMV0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgUGNiOm1vdXNlVXAgY3g6JHtwYWQucG9zWH0gY3k6JHtwYWQucG9zWX0gZGlhZ29uYWw6JHt0aGlzLmJiU2VsZWN0aW9uLmRpYWdvbmFsKCl9YCk7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLnRyZWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmb3VuZDpbUGFkLCBudW1iZXJdW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0ID0gdGhpcy5iYlNlbGVjdGlvbi5kaWFnb25hbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGlzdCA8IDAuMSkgeyAvLyBubyBkcmFnIC0gb25seSBvbmVcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRoaXMudHJlZS5uZWFyZXN0KHBhZCwgMSwgZGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWFyZXN0ID0gZm91bmQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3QgPSAoZGlzdC8yKSAqIChkaXN0LzIpOyAvLyBzZWFyY2ggcmVxdWlyZSBzcXVhcmUgZGlzdGFuY2UgP1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdGhpcy50cmVlLm5lYXJlc3QocGFkLCB0aGlzLmdldFBhZENvdW50KCksIGRpc3QpOyAvLyB1dXVoaGggdXNlIHBhZCBjb3VudCAhP1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFldmVudC5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5lYXJlc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGNvbnN0IG5lYXIgb2YgZm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYG06JHtteH0sJHtteX0gbmVhcmVzdDoke25lYXJbMF0ucG9zWH0sJHtuZWFyWzBdLnBvc1l9ICBkaXN0OiR7TWF0aC5zcXJ0KG5lYXJbMV0pfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLy8gdXV1aGhoIGNoZWNrIGlmIGluc2lkZSB0aGUgYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYmJTZWxlY3Rpb24uaW5zaWRlKG5lYXJbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5lYXJlc3QucHVzaChuZWFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBuZWVkIGEgYmIgZm9yIGFjdHVhbCBzZWxlY3RlZCBwb2ludHMgdG8gZ2V0IHplcm8gcmlnaHRcclxuICAgICAgICAgICAgICAgIGxldCBiYk5ld1NlbGVjdGlvbiA9IG5ldyBCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yKGNvbnN0IG5lYXIgb2YgdGhpcy5uZWFyZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmJOZXdTZWxlY3Rpb24udXBkYXRlRnJvbVBhZChuZWFyWzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYmJTZWxlY3Rpb24gPSBiYk5ld1NlbGVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUGNiOm1vdXNlVXAgc2VsZWN0aW9uIGZvdW5kICMke2ZvdW5kLmxlbmd0aH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIC8vIG9vb2hoaCBkbyBub3QgdHJ1c3QgZXZlbnQuYnV0dG9uLCBpdCdzIGFsd2F5cyAwIGhlcmUgIVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwY2I6bW91c2VNb3ZlJyxldmVudCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnMgPSB0aGlzLmN0eC5nZXRUcmFuc2Zvcm0oKTtcclxuICAgICAgICBpZih0aGlzLm1vdXNlRmxhZykge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlT2ZmWCA9IGV2ZW50LmNsaWVudFggKiB0cmFucy5hIC0gdGhpcy5tb3VzZVN0YXJ0WDtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU9mZlkgPSBldmVudC5jbGllbnRZICogdHJhbnMuZCAtIHRoaXMubW91c2VTdGFydFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMubW91c2VTZWxlY3QgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG14ID0gKGV2ZW50LmNsaWVudFggKiB0cmFucy5hIC0gdGhpcy5tb3VzZU9mZlgpIC8gdGhpcy56b29tO1xyXG4gICAgICAgICAgICBjb25zdCBteSA9ICh0aGlzLmNhbnZhcy5oZWlnaHQtKGV2ZW50LmNsaWVudFkgLSB0aGlzLmNhbnZhcy5vZmZzZXRUb3ApIC0gdGhpcy5tb3VzZU9mZlkpIC8gdGhpcy56b29tO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlU2VsZWN0WCA9IG14O1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlU2VsZWN0WSA9IG15O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vdXNlV2hlZWwoZXZlbnQ6IFdoZWVsRXZlbnQpIHtcclxuICAgICAgICBjb25zdCB0cmFucyA9IHRoaXMuY3R4LmdldFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LmRlbHRhWSk7XHJcbiAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy56b29tICo9IDEuMTtcclxuICAgICAgICAgICAgLy8gdGhpcy5tb3VzZU9mZlggKj0gMC45O1xyXG4gICAgICAgICAgICAvLyB0aGlzLm1vdXNlT2ZmWSAqPSAwLjk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy56b29tICo9IDAuOTtcclxuICAgICAgICAgICAgLy8gdGhpcy5tb3VzZU9mZlggKj0gMS4xO1xyXG4gICAgICAgICAgICAvLyB0aGlzLm1vdXNlT2ZmWSAqPSAxLjE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW91c2VPdXQoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzdGFuY2UoYTpQYWQsIGI6UGFkKSB7XHJcbiAgICAgICAgcmV0dXJuIChhLnBvc1ggLSBiLnBvc1gpKihhLnBvc1ggLSBiLnBvc1gpICsgIChhLnBvc1kgLSBiLnBvc1kpKihhLnBvc1kgLSBiLnBvc1kpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCkge1xyXG4gICAgICAgIC8vIHRoZW9yZXRpc2NoIHNvLi4uXHJcbiAgICAgICAgLy8gdGhpcy5jdHguZmlsbFN0eWxlID0gJ29yYW5nZXJlZCc7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ2FudGlxdWV3aGl0ZSc7XHJcblxyXG4gICAgICAgIC8vIGRyYXcgYmIgY2VudGVyXHJcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSAncmVkJztcclxuICAgICAgICBsZXQgY2VudGVyID0gdGhpcy5iYlBjYi5jZW50ZXIodGhpcy56b29tKTtcclxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oY2VudGVyWzBdIC0gMTAgKyB0aGlzLm1vdXNlT2ZmWCwgY2VudGVyWzFdICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyhjZW50ZXJbMF0gKyAxMCArIHRoaXMubW91c2VPZmZYLCBjZW50ZXJbMV0gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKGNlbnRlclswXSArIHRoaXMubW91c2VPZmZYLCBjZW50ZXJbMV0gLSAxMCArIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICB0aGlzLmN0eC5saW5lVG8oY2VudGVyWzBdICsgdGhpcy5tb3VzZU9mZlgsIGNlbnRlclsxXSArIDEwICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIC8vIGRyYXcgYmJcclxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmN0eC5yZWN0KHRoaXMuYmJQY2IuemVybyh0aGlzLnpvb20pWzBdICsgdGhpcy5tb3VzZU9mZlgsIHRoaXMuYmJQY2IuemVybyh0aGlzLnpvb20pWzFdICsgdGhpcy5tb3VzZU9mZlksIHRoaXMuYmJQY2Iuc2l6ZSh0aGlzLnpvb20pWzBdLCB0aGlzLmJiUGNiLnNpemUodGhpcy56b29tKVsxXSk7XHJcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhZHN0eWxlIG9mIHRoaXMubWFwUGFkcy5rZXlzKCkpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0eSA9IHRoaXMubWFwU3R5bGVzLmdldChwYWRzdHlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZHNldCA9IHRoaXMubWFwUGFkcy5nZXQocGFkc3R5bGUpO1xyXG4gICAgICAgICAgICBpZiAoc3R5ICYmIHBhZHNldCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3cgPSBzdHkud2lkdGggKiB0aGlzLnpvb207XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaCA9IHN0eS5oZWlnaHQgKiB0aGlzLnpvb207XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwYWQgb2YgcGFkc2V0LnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5mb3JtID09ICdSJyB8fCBzdHkuZm9ybSA9PSAnTycgfHwgc3R5LmZvcm0gPT0gJ1JvdW5kUmVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZC5wb3NYICogdGhpcy56b29tIC0gc3cgLyAyLjAgKyB0aGlzLm1vdXNlT2ZmWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZC5wb3NZICogdGhpcy56b29tIC0gc2ggLyAyLjAgKyB0aGlzLm1vdXNlT2ZmWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3LCBzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdHkuZm9ybSA9PSAnQycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmVsbGlwc2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWQucG9zWCAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkLnBvc1kgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3IC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3IC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jdHguYXJjKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcGFkLnBvc1ggKiB0aGlzLnpvb20gLSBzdyAvIDIuMCArIHRoaXMubW91c2VPZmZYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcGFkLnBvc1kgKiB0aGlzLnpvb20gLSBzaCAvIDIuMCArIHRoaXMubW91c2VPZmZZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgc3R5LndpZHRoICogdGhpcy56b29tLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGRyYXcgcXVhdHNjaCAke3N0eS5mb3JtfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIGZvciBwYWRzdHlsZVxyXG5cclxuICAgICAgICAvLyBkcmF3IHNlbGVjdGlvbkNyb3NzKGVzKVxyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ3B1cnBsZSc7XHJcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgbGV0IGNzaXplID0gLjU7XHJcbiAgICAgICAgZm9yKGNvbnN0IG5lYXIgb2YgdGhpcy5uZWFyZXN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbygobmVhclswXS5wb3NYLWNzaXplKSAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZYLCBuZWFyWzBdLnBvc1kgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbygobmVhclswXS5wb3NYK2NzaXplKSAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZYLCBuZWFyWzBdLnBvc1kgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhuZWFyWzBdLnBvc1ggKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWCwgKG5lYXJbMF0ucG9zWStjc2l6ZSkgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhuZWFyWzBdLnBvc1ggKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWCwgKG5lYXJbMF0ucG9zWS1jc2l6ZSkgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBuZWFyZXN0OiR7bmVhclswXS5wb3NYfSwke25lYXJbMF0ucG9zWX0gIGRpc3Q6JHtNYXRoLnNxcnQobmVhclsxXSl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAvLyBkcmF3IHNlbGVjdGlvbiBsb3dlciBsZWZ0ID0gemVybyBrYW5kaWRhdGVcclxuICAgICAgICBsZXQgemVybyA9IFswLDBdO1xyXG4gICAgICAgIGlmKHRoaXMuYmJTZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgY3NpemUgPSAyICogdGhpcy56b29tO1xyXG4gICAgICAgICAgICB6ZXJvID0gdGhpcy5iYlNlbGVjdGlvbi56ZXJvKHRoaXMuem9vbSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oemVyb1swXSAtY3NpemUgKyB0aGlzLm1vdXNlT2ZmWCwgemVyb1sxXSArIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHplcm9bMF0gK2NzaXplICsgdGhpcy5tb3VzZU9mZlgsIHplcm9bMV0gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh6ZXJvWzBdICsgdGhpcy5tb3VzZU9mZlgsICAgICB6ZXJvWzFdLWNzaXplICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oemVyb1swXSArIHRoaXMubW91c2VPZmZYLCAgICAgemVyb1sxXStjc2l6ZSArIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkcmF3IG9yaWdpblxyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgICB6ZXJvID0gdGhpcy5iYlplcm8uY2VudGVyKHRoaXMuem9vbSk7XHJcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKC1jc2l6ZSArIHRoaXMubW91c2VPZmZYLCB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKCtjc2l6ZSArIHRoaXMubW91c2VPZmZYLCB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKHRoaXMubW91c2VPZmZYLCAgICAgICAtY3NpemUgKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMubW91c2VPZmZYLCAgICAgICArY3NpemUgKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIC8vIGRyYXcgemVyb1xyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgICB6ZXJvID0gdGhpcy5iYlplcm8uemVybyh0aGlzLnpvb20pO1xyXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh6ZXJvWzBdIC1jc2l6ZSArIHRoaXMubW91c2VPZmZYLCB6ZXJvWzFdICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh6ZXJvWzBdICtjc2l6ZSArIHRoaXMubW91c2VPZmZYLCB6ZXJvWzFdICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh6ZXJvWzBdICsgdGhpcy5tb3VzZU9mZlgsICAgICB6ZXJvWzFdLWNzaXplICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh6ZXJvWzBdICsgdGhpcy5tb3VzZU9mZlgsICAgICB6ZXJvWzFdK2NzaXplICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gZHJhdyBzZWxlY3Rpb25SZWN0YW5nbGVcclxuICAgICAgICBpZih0aGlzLm1vdXNlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ3B1cnBsZSc7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy5tb3VzZVN0YXJ0WCAgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWCwgdGhpcy5tb3VzZVN0YXJ0WSAgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLm1vdXNlU2VsZWN0WCAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZYLCB0aGlzLm1vdXNlU3RhcnRZICAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMubW91c2VTZWxlY3RYICogdGhpcy56b29tICsgdGhpcy5tb3VzZU9mZlgsIHRoaXMubW91c2VTZWxlY3RZICogdGhpcy56b29tICsgdGhpcy5tb3VzZU9mZlkpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5tb3VzZVN0YXJ0WCAgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWCwgdGhpcy5tb3VzZVNlbGVjdFkgKiB0aGlzLnpvb20gKyB0aGlzLm1vdXNlT2ZmWSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLm1vdXNlU3RhcnRYICAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZYLCB0aGlzLm1vdXNlU3RhcnRZICAqIHRoaXMuem9vbSArIHRoaXMubW91c2VPZmZZKTtcclxuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvKipcclxuICogTWFybGluOiBEZXZpY2Ugc3BlY2lmaWMgaW1wbGVtZW50YXRpb24uXHJcbiovXHJcblxyXG5pbXBvcnQgeyBrZFRyZWUgfSBmcm9tICcuL2tkVHJlZSc7XHJcbmltcG9ydCB7IERldmljZSB9IGZyb20gXCIuL2RldmljZVwiO1xyXG5pbXBvcnQgeyBQQ0IsIFBhZCB9IGZyb20gXCIuL3BjYlwiO1xyXG5cclxuZW51bSBTdGF0dXMge1xyXG4gICAgVW5kZWZpbmVkID0gMSxcclxuICAgIFJlYWR5LFxyXG4gICAgQnVzeSxcclxuICAgIE5DXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNYXJsaW4gZXh0ZW5kcyBEZXZpY2Uge1xyXG4gICAgbWFybGluRGl2OiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbiAgICBtYXJsaW5EaXZTdGF0dXM6IEhUTUxFbGVtZW50IHwgbnVsbDtcclxuICAgIG1hcmxpbkRpdlBvc2l0aW9uOiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbiAgICBtYXJsaW5EaXZDb21tYW5kczogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cclxuICAgIHplcm86IFtudW1iZXIsIG51bWJlcl0gPSBbMCwgMF07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm1hcmxpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTWFybGluXCIpO1xyXG4gICAgICAgIHRoaXMuaW5pdEh0bWwoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVyd3JpdGUhIFNldCB0aGUgY3VycmVudCBwb3NpdGlvbiB0byBaZXJvLiBBbGwgZnVydGhlciBjb21tYW5kcyB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoaXMgcG9zaXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRaZXJvKHBvaW50OiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy56ZXJvID0gcG9pbnQ7XHJcbiAgICAgICAgdGhpcy5vbkJ0bkFicygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbFdyaXRlV2FpdCgnRzkyIFgwIFkwIFowJykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQnRuUG9zKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE92ZXJ3cml0ZSEgTW92ZSB0byBwb3NpdGlvbi4gSWYgb25lIGNvb3JkaW5hdGUgaXMgdW5kZWZpbmVkLCBpdCdzIGlnbm9yZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG1vdmVUbyh4OiBudW1iZXIgfCB1bmRlZmluZWQsIHk6IG51bWJlciB8IHVuZGVmaW5lZCwgejogbnVtYmVyIHwgdW5kZWZpbmVkLCBlOiBudW1iZXIgfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICBsZXQgY21kID0gJ0cwICc7XHJcbiAgICAgICAgaWYgKHggIT0gdW5kZWZpbmVkKSBjbWQgKz0gYFgke3ggLSB0aGlzLnplcm9bMF19IGA7XHJcbiAgICAgICAgaWYgKHkgIT0gdW5kZWZpbmVkKSBjbWQgKz0gYFkke3kgLSB0aGlzLnplcm9bMV19IGA7XHJcbiAgICAgICAgaWYgKHogIT0gdW5kZWZpbmVkKSBjbWQgKz0gYFoke3p9IGA7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoY21kKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkJ0blBvcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtb3ZlVG9BbGwocGxpc3Q6IFBhZFtdLCBzdGFydDpbbnVtYmVyLG51bWJlcl0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWFybGluOm1vdmVUb0FsbCcsIHBsaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGxpc3QpO1xyXG5cclxuICAgICAgICBjb25zdCB0cmVlID0gbmV3IGtkVHJlZShQQ0IsIHBsaXN0LCBQQ0IuZGlzdGFuY2UsIFtcInBvc1hcIiwgXCJwb3NZXCJdKTtcclxuXHJcbiAgICAgICAgbGV0IHN0YXJ0cGFkID0gbmV3IFBhZCgnJywgc3RhcnRbMF0sIHN0YXJ0WzFdKTtcclxuICAgICAgICBsZXQgc2VhcmNoID0gdHJlZS5uZWFyZXN0KHN0YXJ0cGFkLCAxKTtcclxuICAgICAgICBsZXQgZm91bmRwYWQgPSBzZWFyY2hbMF1bMF07XHJcblxyXG4gICAgICAgIGxldCBmb3VuZHBhZHM6UGFkW10gPSBbXTsgLy8ganVzdCBmb3IgbG9nXHJcblxyXG4gICAgICAgIHRoaXMub25CdG5BYnMoKS50aGVuKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCB0cmVlc2hvdCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyZWUgZHVtcDonKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRyZWUudG9KU09OKCksIHVuZGVmaW5lZCwgNCkpOyAvLyBkdW1wIHRyZWVcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaCA9IHRyZWUubmVhcmVzdChmb3VuZHBhZCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01hcmxpbjptb3ZlVG9BbGwnLCBzZWFyY2gpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3VuZHBhZCA9IHNlYXJjaFswXVswXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZHBhZHMucHVzaChmb3VuZHBhZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjbWQgPSAnRzAgJztcclxuICAgICAgICAgICAgICAgICAgICBjbWQgKz0gYFgke2ZvdW5kcGFkLnBvc1ggLSB0aGlzLnplcm9bMF19IGA7XHJcbiAgICAgICAgICAgICAgICAgICAgY21kICs9IGBZJHtmb3VuZHBhZC5wb3NZIC0gdGhpcy56ZXJvWzFdfSBgO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VyaWFsV3JpdGVXYWl0KGNtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNYXJsaW46bW92ZVRvQWxsJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHdoYXQpIHsgfSAvLyBpZ25vcmUgZGlzY29ubmVjdGVkIGZvciBkZWJ1Z2dpbmdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8vIHJlbW92ZSBzZWVtcyB0byBiZSBidWdpIDooKChcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb2sgPSB0cmVlLnJlbW92ZShmb3VuZHBhZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYob2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE1hcmxpbjptb3ZlVG9BbGwgcmVtb3ZlZCBwYWRgLCBmb3VuZHBhZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBNYXJsaW46bW92ZVRvQWxsIE5PVCByZW1vdmVkIHBhZCwgdGhhcyBiYWQgOihgLCBmb3VuZHBhZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyZWVzaG90ID0gSlNPTi5zdHJpbmdpZnkodHJlZS50b0pTT04oKSwgdW5kZWZpbmVkLCA0KTsgLy8ga2VlcCB0cmVlIGZvciBkZWJ1ZyAhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHJlZXNob3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgZm91bmRwYWQgb2YgZm91bmRwYWRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01hcmxpbjptb3ZlVG9BbGwnLCBmb3VuZHBhZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoICh3aGF0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBzZXJpYWxXcml0ZVdhaXQgZmFpbHMsIGRvIHNvbWV0aGluZyA/XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJNYXJsaW46bW92ZVRvQWxsOiBmYWlsZWRcIiwgd2hhdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmxvYigpIHtcclxuICAgICAgICB0aGlzLm9uQnRuQWJzKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdNODMnKS50aGVuKCgpID0+IHsgLy8gZXh0cnVkZXIgcmVsYXRpdlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cwIFozJykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cwIEUxMCcpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbFdyaXRlV2FpdCgnRzAgWjAnKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdHMCBaMycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG9uU2VyaWFsQ29ubmVjdGVkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXJsaW46IG9uU2VyaWFsQ29ubmVjdGVkJyk7XHJcbiAgICAgICAgLy8gcmVhZCBvdmVyIGZpcnN0IG1lc3NhZ2VzXHJcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHdoaWxlKHRoaXMuaW5wdXRRdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5tYXJsaW5EaXZQb3NpdGlvbikge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMubWFybGluRGl2UG9zaXRpb24uaW5uZXJIVE1MICs9IGAke3RoaXMuaW5wdXRRdWV1ZS5wb3AoKX1gO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3RhdHVzLlJlYWR5KVxyXG4gICAgICAgIGlmICh0aGlzLm1hcmxpbkRpdlN0YXR1cyAmJiB0aGlzLm1hcmxpbkRpdkNvbW1hbmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKFN0YXR1cy5SZWFkeSk7XHJcbiAgICAgICAgICAgIHRoaXMubWFybGluRGl2Q29tbWFuZHMuY2xhc3NOYW1lID0gdGhpcy5tYXJsaW5EaXZDb21tYW5kcy5jbGFzc05hbWUucmVwbGFjZSgndzMtaGlkZScsICd3My1zaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIH0sIDEwMDApO1xyXG5cclxuICAgICAgICAvLyB3YWl0IDNzZWMsIHJ1biBjb21tYW5kcyAnY29sZCBleHRydWRlJywncmVsYXRpdmUgcG9zaXRpb25pbmcnLCdyZXBvcnQgcG9zaXRpb24nXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25CdG5Db2xkKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQnRuUmVsKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJ0blBvcygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWFybGluOiBvblNlcmlhbENvbm5lY3RlZCBpbml0IHNlcXVlbmNlIGZpbmlzaGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgb25TZXJpYWxEaXNjb25uZWN0ZWQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01hcmxpbjogb25TZXJpYWxEaXNjb25uZWN0ZWQnKTtcclxuICAgICAgICBpZiAodGhpcy5tYXJsaW5EaXZTdGF0dXMgJiYgdGhpcy5tYXJsaW5EaXZDb21tYW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXR1cyhTdGF0dXMuTkMpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmxpbkRpdkNvbW1hbmRzLmNsYXNzTmFtZSA9IHRoaXMubWFybGluRGl2Q29tbWFuZHMuY2xhc3NOYW1lLnJlcGxhY2UoJ3czLXNob3cnLCAndzMtaGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaGVyaXRlZCBmcm9tIERldmljZSwgYWRkcyBTdGF0dXMgbWVzc2FnZSB1cGRhdGVzLlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dFxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHNlcmlhbFdyaXRlV2FpdCh2YWx1ZTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAxMDAwMCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXR1cyhTdGF0dXMuQnVzeSk7XHJcbiAgICAgICAgICAgIHN1cGVyLnNlcmlhbFdyaXRlV2FpdCh2YWx1ZSwgdGltZW91dCkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKFN0YXR1cy5SZWFkeSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3RhdHVzKHN0YXR1czogU3RhdHVzKSB7XHJcbiAgICAgICAgbGV0IGh0bWwgPSBgdW5rbm93biBzdGF0dXMgJHtzdGF0dXN9YDtcclxuICAgICAgICBzd2l0Y2ggKHN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlIFN0YXR1cy5SZWFkeTpcclxuICAgICAgICAgICAgICAgIGh0bWwgPSAnU3RhdHVzOiA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBsdWdcIj48L2k+IHJlYWR5JzsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLkJ1c3k6XHJcbiAgICAgICAgICAgICAgICBodG1sID0gJ1N0YXR1czogPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wbHVnLWNpcmNsZS1ib2x0XCI+PC9pPiBidXN5JzsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLk5DOlxyXG4gICAgICAgICAgICAgICAgaHRtbCA9ICdTdGF0dXM6IDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGx1Zy1jaXJjbGUteG1hcmtcIj48L2k+IG5vdCBjb25uZWN0ZWQnOyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWFybGluRGl2U3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFybGluRGl2U3RhdHVzLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQnRuSG9tZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cyOCcpLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihyZWFzb24pXHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8vLyB0aW1lb3V0IHRvbyBzbWFsbCBmb3IgdGhpcyBjb21tYW5kLCBzZWUgd2hhdCBoYXBwZW5zXHJcbiAgICAgICAgLy8gdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cyOCcsIDEwMCkudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgIC8vIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS53YXJuKHJlYXNvbik7XHJcbiAgICAgICAgLy8gICAgIC8vIHRyeSBhZ2FpbiAoZGVmYXVsdCB0aW1lb3V0IGlzIDEwc2VjKVxyXG4gICAgICAgIC8vICAgICB0aGlzLnNlcmlhbFdyaXRlV2FpdCgnRzI4JykudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMub25CdG5Qb3MoKTtcclxuICAgICAgICAvLyAgICAgfSkuY2F0Y2goKHJlYXNvbikgPT4geyBjb25zb2xlLndhcm4ocmVhc29uKSB9KTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH07XHJcbiAgICBvbkJ0blBvcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ00xMTQnKS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gaGllciBrb21tdCBlaW5lIHplaWxlIG1pdCB6YWhsZW4gdW5kIGVpbmUgbWl0IG9rXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25CdG5Qb3MnLHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmxpbkRpdlBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJsaW5EaXZQb3NpdGlvbi5pbm5lclRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBvbkJ0bkFicygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0c5MCcpLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihyZWFzb24pO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbkJ0blJlbCgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0c5MScpLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihyZWFzb24pO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbkJ0bkNvbGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdNMzAyIFMwJykudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkJ0blhQKCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdHMCBYMTAnKS50aGVuKCh2YWx1ZSkgPT4geyB0aGlzLm9uQnRuUG9zKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIG9uQnRuWE0oKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cwIFgtMTAnKS50aGVuKCh2YWx1ZSkgPT4geyB0aGlzLm9uQnRuUG9zKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIG9uQnRuWVAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cwIFkxMCcpLnRoZW4oKHZhbHVlKSA9PiB7IHRoaXMub25CdG5Qb3MoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgb25CdG5ZTSgpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbFdyaXRlV2FpdCgnRzAgWS0xMCcpLnRoZW4oKHZhbHVlKSA9PiB7IHRoaXMub25CdG5Qb3MoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgb25CdG5aUCgpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbFdyaXRlV2FpdCgnRzAgWjEwJykudGhlbigodmFsdWUpID0+IHsgdGhpcy5vbkJ0blBvcygpOyB9KTtcclxuICAgIH07XHJcbiAgICBvbkJ0blpNKCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdHMCBaLTEwJykudGhlbigodmFsdWUpID0+IHsgdGhpcy5vbkJ0blBvcygpOyB9KTtcclxuICAgIH07XHJcbiAgICBvbkJ0bkVQKCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsV3JpdGVXYWl0KCdHMCBFMTAnKS50aGVuKCh2YWx1ZSkgPT4geyB0aGlzLm9uQnRuUG9zKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIG9uQnRuRU0oKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxXcml0ZVdhaXQoJ0cwIEUtMTAnKS50aGVuKCh2YWx1ZSkgPT4geyB0aGlzLm9uQnRuUG9zKCk7IH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgc29tZSBidXR0b25zIGZvciBNYXJsaW4gc3BlY2lmaWMgYWN0aW9ucy4uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGluaXRIdG1sKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1hcmxpbkRpdikge1xyXG4gICAgICAgICAgICB0aGlzLm1hcmxpbkRpdi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3My1ib3JkZXIgdzMtYm9yZGVyLWRhcmstZ3JleVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwibWFybGluU3RhdHVzXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtYXJsaW5Qb3NpdGlvblwiIGNsYXNzPVwidzMtdGlueVwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwibWFybGluQ29tbWFuZHNcIiBjbGFzcz1cInczLXRpbnkgdzMtaGlkZVwiPlxyXG4gICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1hcmxpbkhvbWVcIiBjbGFzcz1cInczLWJ1dHRvbiB3My1yb3VuZCB3My1saWdodC1ncmV5XCI+aG9tZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibWFybGluUG9zXCIgIGNsYXNzPVwidzMtYnV0dG9uIHczLXJvdW5kIHczLWxpZ2h0LWdyZXlcIj5wb3M/PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtYXJsaW5SZWxcIiAgY2xhc3M9XCJ3My1idXR0b24gdzMtcm91bmQgdzMtbGlnaHQtZ3JleVwiPnJlbDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibWFybGluQWJzXCIgIGNsYXNzPVwidzMtYnV0dG9uIHczLXJvdW5kIHczLWxpZ2h0LWdyZXlcIj5hYnM8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1hcmxpbkNvbGRcIiBjbGFzcz1cInczLWJ1dHRvbiB3My1yb3VuZCB3My1saWdodC1ncmV5XCI+Y29sZDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibWFybGluWFBcIiBjbGFzcz1cInczLWJ1dHRvbiB3My1yb3VuZCB3My1saWdodC1ncmV5XCI+eCs8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1hcmxpblhNXCIgY2xhc3M9XCJ3My1idXR0b24gdzMtcm91bmQgdzMtbGlnaHQtZ3JleVwiPngtPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtYXJsaW5ZUFwiIGNsYXNzPVwidzMtYnV0dG9uIHczLXJvdW5kIHczLWxpZ2h0LWdyZXlcIj55KzwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibWFybGluWU1cIiBjbGFzcz1cInczLWJ1dHRvbiB3My1yb3VuZCB3My1saWdodC1ncmV5XCI+eS08L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1hcmxpblpQXCIgY2xhc3M9XCJ3My1idXR0b24gdzMtcm91bmQgdzMtbGlnaHQtZ3JleVwiPnorPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtYXJsaW5aTVwiIGNsYXNzPVwidzMtYnV0dG9uIHczLXJvdW5kIHczLWxpZ2h0LWdyZXlcIj56LTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibWFybGluRVBcIiBjbGFzcz1cInczLWJ1dHRvbiB3My1yb3VuZCB3My1saWdodC1ncmV5XCI+ZSs8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1hcmxpbkVNXCIgY2xhc3M9XCJ3My1idXR0b24gdzMtcm91bmQgdzMtbGlnaHQtZ3JleVwiPmUtPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgICAgIHRoaXMubWFybGluRGl2U3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5TdGF0dXNcIik7XHJcbiAgICAgICAgICAgIHRoaXMubWFybGluRGl2UG9zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcmxpblBvc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmxpbkRpdkNvbW1hbmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5Db21tYW5kc1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3RhdHVzLk5DKTtcclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuSG9tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFybGluSG9tZVwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0bkhvbWUpIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0bkhvbWUub25jbGljayA9IHRoaXMub25CdG5Ib21lLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuUG9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5Qb3NcIik7XHJcbiAgICAgICAgICAgIGlmIChtYXJsaW5CdG5Qb3MpIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0blBvcy5vbmNsaWNrID0gdGhpcy5vbkJ0blBvcy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmxpbkJ0blJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFybGluUmVsXCIpO1xyXG4gICAgICAgICAgICBpZiAobWFybGluQnRuUmVsKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJsaW5CdG5SZWwub25jbGljayA9IHRoaXMub25CdG5SZWwuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtYXJsaW5CdG5BYnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcmxpbkFic1wiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0bkFicykge1xyXG4gICAgICAgICAgICAgICAgbWFybGluQnRuQWJzLm9uY2xpY2sgPSB0aGlzLm9uQnRuQWJzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuQ29sZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFybGluQ29sZFwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0bkNvbGQpIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0bkNvbGQub25jbGljayA9IHRoaXMub25CdG5Db2xkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmxpbkJ0blhQID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5YUFwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0blhQKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJsaW5CdG5YUC5vbmNsaWNrID0gdGhpcy5vbkJ0blhQLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuWE0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcmxpblhNXCIpO1xyXG4gICAgICAgICAgICBpZiAobWFybGluQnRuWE0pIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0blhNLm9uY2xpY2sgPSB0aGlzLm9uQnRuWE0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtYXJsaW5CdG5ZUCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFybGluWVBcIik7XHJcbiAgICAgICAgICAgIGlmIChtYXJsaW5CdG5ZUCkge1xyXG4gICAgICAgICAgICAgICAgbWFybGluQnRuWVAub25jbGljayA9IHRoaXMub25CdG5ZUC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmxpbkJ0bllNID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5ZTVwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0bllNKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJsaW5CdG5ZTS5vbmNsaWNrID0gdGhpcy5vbkJ0bllNLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuWlAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcmxpblpQXCIpO1xyXG4gICAgICAgICAgICBpZiAobWFybGluQnRuWlApIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0blpQLm9uY2xpY2sgPSB0aGlzLm9uQnRuWlAuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtYXJsaW5CdG5aTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFybGluWk1cIik7XHJcbiAgICAgICAgICAgIGlmIChtYXJsaW5CdG5aTSkge1xyXG4gICAgICAgICAgICAgICAgbWFybGluQnRuWk0ub25jbGljayA9IHRoaXMub25CdG5aTS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmxpbkJ0bkVQID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJsaW5FUFwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcmxpbkJ0bkVQKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJsaW5CdG5FUC5vbmNsaWNrID0gdGhpcy5vbkJ0bkVQLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFybGluQnRuRU0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcmxpbkVNXCIpO1xyXG4gICAgICAgICAgICBpZiAobWFybGluQnRuRU0pIHtcclxuICAgICAgICAgICAgICAgIG1hcmxpbkJ0bkVNLm9uY2xpY2sgPSB0aGlzLm9uQnRuRU0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQQ0IgfSBmcm9tICcuL3BjYic7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFyc2VyIHtcclxuICAgIHB1YmxpYyBwcm9jZXNzQ0I6IEZ1bmN0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBwYWRzRmllbGQ6IEhUTUxFbGVtZW50fG51bGw7XHJcbiAgICBwdWJsaWMgY29vcmRzRmllbGQ6IEhUTUxFbGVtZW50fG51bGw7XHJcblxyXG4gICAgcHVibGljIHBjYjogUENCO1xyXG4gICAgY29uc3RydWN0b3IocGNiOiBQQ0IpIHtcclxuICAgICAgICB0aGlzLnBjYiA9IHBjYjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2VGaWxlPyhmaWxlOiBGaWxlKTpQcm9taXNlPHZvaWQ+OyAvLyB2aXJ0dWFsICFcclxuICAgIHB1YmxpYyBjYW5jZWw/KCk6IHZvaWQ7XHJcbn1cclxuIiwiaW1wb3J0IHsgUGFyc2VyIH0gZnJvbSBcIi4vcGFyc2VyXCI7XHJcbmltcG9ydCB7IFBDQiB9IGZyb20gXCIuL3BjYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnNlckdlcmJlciBleHRlbmRzIFBhcnNlciB7XHJcbiAgICByZU51bUZvcm1hdCA9IC9eJUZTTEFYKFswLTldKShbMC05XSlZKFswLTldKShbMC05XSlbKl0lLztcclxuICAgIHJlTWF0Y2hQYWQgPSAvXiglQUQpKERbMC05XSspKFtBLVphLXpdKylbLF0oWy0wLTkuXSspW1hdPyhbLTAtOS5dKyk/W1hdPyhbLTAtOS5dKyk/LztcclxuICAgIHJlTWF0Y2hQYWRDb29yZEluaXQgPSAvXihbREddWzAtOV0rKVsqXS87XHJcbiAgICByZU1hdGNoUGFkQ29vcmQgPSAvXlgoWy1dPykoWzAtOV0rKVkoWy1dPykoWzAtOV0rKUQoWzAtOV0rKVsqXS87XHJcbiAgICBfY2FuY2VsID0gZmFsc2U7XHJcbiAgICBmbG9hdEZyYWN0cyA9IDE7XHJcbiAgICBmbG9hdERlemlzID0gMTtcclxuICAgIGxhc3RQYWQgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBjYjogUENCKSB7XHJcbiAgICAgICAgc3VwZXIocGNiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2VGaWxlKGZpbGU6IEZpbGUpOlByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlLmFycmF5QnVmZmVyKCkudGhlbigoYnVmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUJ1ZmZlclRvU3RyaW5nKGJ1ZiwgJ1VURi04JywgKHRleHQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dlcmJlclRleHQodGV4dCkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuY2VsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2NhbmNlbCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcHJvY2Vzc0dlcmJlclRleHQodGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGV4dCk7XHJcbiAgICAgICAgLy8gdHJhbnNsYXRlIGxpbmUgZW5kcy4uLlxyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcci9nLCAnJyk7IC8vIHJlbW92ZSB3aW5kb3dzIHRyYXNoXHJcbiAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcclxuXHJcbiAgICAgICAgbGV0IGxpbmVOciA9IDE7XHJcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICBsaW5lTnIrKztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYW5jZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYGdlcmJlcigke2xpbmVOcn0vJHtsaW5lcy5sZW5ndGh9KTogYCk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NHZXJiZXJMaW5lKGxpbmUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NCKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDQihsaW5lTnIgKiAxMDAgLyBsaW5lcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gLy8gZm9yXHJcblxyXG4gICAgICAgIHRoaXMucGNiLnJldHJlZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhc3luYyBwcm9jZXNzR2VyYmVyTGluZShsaW5lOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGxpbmUgPSBsaW5lLnJlcGxhY2UoL1xcbi9nLCc8YnI+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gWmFobGVuZm9ybWF0IGluZm8gbGluZSBcIiVGU0xBWDM0WTM0KiVcIlxyXG4gICAgICAgICAgICAgICAgLy8gICAlRlNMQVgyNVkyNSolIENvb3JkaW5hdGUgZm9ybWF0IHNwZWNpZmljYXRpb246XHJcbiAgICAgICAgICAgICAgICAvLyAgIENvb3JkaW5hdGVzIGZvcm1hdCBpcyAyLjU6XHJcbiAgICAgICAgICAgICAgICAvLyAgIDIgZGlnaXRzIGluIHRoZSBpbnRlZ2VyIHBhcnRcclxuICAgICAgICAgICAgICAgIC8vICAgNSBkaWdpdHMgaW4gdGhlIGZyYWN0aW9uYWwgcGFydFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hOdW1Gb3JtYXQgPSB0aGlzLnJlTnVtRm9ybWF0LmV4ZWMobGluZSk7IC8vbGluZS5tYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoTnVtRm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWF0Y2hOdW1Gb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvYXREZXppcyA9IHBhcnNlSW50KG1hdGNoTnVtRm9ybWF0WzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb2F0RnJhY3RzID0gcGFyc2VJbnQobWF0Y2hOdW1Gb3JtYXRbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBnZXJiZXI6IGZsb2F0IGRpZ2l0cyA9ICR7dGhpcy5mbG9hdERlemlzfSAke3RoaXMuZmxvYXRGcmFjdHN9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHBhZCBkZWZpbml0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gJUFERDIxUiwwLjYwMDAwMFgxLjA1MDAwMColXHJcbiAgICAgICAgICAgICAgICAvLyAlQUREMTBSb3VuZFJlY3QsMC4xMjAwMDAgWCAtMC4xODAwMDBcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgWCAwLjY4MDAwMCBYIC0wLjE4MDAwMFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIFggLTAuNjgwMDAwIFggMC4xODAwMDBcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICBYIC0wLjY4MDAwMCBYIDAuMTgwMDAwXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIFggMC42ODAwMDAgWCAwKiVcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoUGFkID0gdGhpcy5yZU1hdGNoUGFkLmV4ZWMobGluZSk7IC8vIGxpbmUubWF0Y2goKTsvLy8pO1xyXG4gICAgICAgICAgICAgICAgLy8gV2VubiBcIkNcIiBkYW5uIGdpYnRzIG51ciBlaW5lIGNvb3JkXHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hQYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtYXRjaFBhZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFkc0ZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFkc0ZpZWxkLmlubmVySFRNTCArPSBgJHttYXRjaFBhZFsyXX0gJHttYXRjaFBhZFszXX0gJHttYXRjaFBhZFs0XX0gJHttYXRjaFBhZFs1XX08YnI+YDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoUGFkWzNdID09ICdSb3VuZFJlY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtpY2FkIG1hY3JvIHNjaG51bGxpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGNiLmFkZFBhZFN0eWxlKG1hdGNoUGFkWzJdLCBtYXRjaFBhZFszXSwgTWF0aC5hYnMocGFyc2VGbG9hdChtYXRjaFBhZFs1XSkpLCBNYXRoLmFicyhwYXJzZUZsb2F0KG1hdGNoUGFkWzZdKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgZ2VyYmVyOiBzdHlsZSAke21hdGNoUGFkWzJdfSwke21hdGNoUGFkWzNdfSwgJHtNYXRoLmFicyhwYXJzZUZsb2F0KG1hdGNoUGFkWzVdKSl9LCAke01hdGguYWJzKHBhcnNlRmxvYXQobWF0Y2hQYWRbNl0pKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBjYi5hZGRQYWRTdHlsZShtYXRjaFBhZFsyXSwgbWF0Y2hQYWRbM10sIHBhcnNlRmxvYXQobWF0Y2hQYWRbNF0pLCBwYXJzZUZsb2F0KG1hdGNoUGFkWzVdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBnZXJiZXI6IHN0eWxlICR7bWF0Y2hQYWRbMl19LCR7bWF0Y2hQYWRbM119LCAke3BhcnNlRmxvYXQobWF0Y2hQYWRbNF0pfSwgJHtwYXJzZUZsb2F0KG1hdGNoUGFkWzVdKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRHh4KiBjb21tYW5kIC0gc2hvdWxkIGJlIHBhZCBkcmF3XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFBhZENvb3JkSW5pdCA9IHRoaXMucmVNYXRjaFBhZENvb3JkSW5pdC5leGVjKGxpbmUpOyAvL2xpbmUubWF0Y2goKTsvLy8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUGFkQ29vcmRJbml0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWF0Y2hQYWRDb29yZEluaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFBhZCA9IG1hdGNoUGFkQ29vcmRJbml0WzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYSBwYWQgbGluZTogXCJYMzc5OTg0WTk2MzkzMEQwMypcIlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hQYWRDb29yZCA9IHRoaXMucmVNYXRjaFBhZENvb3JkLmV4ZWMobGluZSk7IC8vIGxpbmUubWF0Y2goKTsvLy8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUGFkQ29vcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0UGFkLnN0YXJ0c1dpdGgoJ0QnKSkgeyAvLyBpZ25vcmUgRzM2IG9yIHNvIGNvbW1hbmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICgxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBhbmQgcmV0dXJuIC4uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1hdGNoUGFkQ29vcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ggPSBtYXRjaFBhZENvb3JkWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3kgPSBtYXRjaFBhZENvb3JkWzRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSB0aGlzLmZsb2F0RGV6aXMgKyB0aGlzLmZsb2F0RnJhY3RzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWxsIGZyZWFrJ3MgbGVhZGluZyB6ZXJvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3gubGVuZ3RoIDwgbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCA9IGAwJHtzeH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzeS5sZW5ndGggPCBsZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5ID0gYDAke3N5fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBhIGZyZWFrJ24gZmxvYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZ4ID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnkgPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN4ID0gYCR7c3guc3Vic3RyaW5nKDAsIHRoaXMuZmxvYXREZXppcyl9LiR7c3guc3Vic3RyaW5nKHRoaXMuZmxvYXREZXppcyl9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3kgPSBgJHtzeS5zdWJzdHJpbmcoMCwgdGhpcy5mbG9hdERlemlzKX0uJHtzeS5zdWJzdHJpbmcodGhpcy5mbG9hdERlemlzKX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmeCA9IHBhcnNlRmxvYXQoc3gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmeSA9IHBhcnNlRmxvYXQoc3kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hQYWRDb29yZFsxXSA9PSAnLScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ4ID0gZnggKiAtMS4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaFBhZENvb3JkWzNdID09ICctJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnkgPSBmeSAqIC0xLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ5ID0gZnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvb3Jkc0ZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvb3Jkc0ZpZWxkLmlubmVySFRNTCArPSBgJHt0aGlzLmxhc3RQYWR9OiAgeDoke2Z4fSB5OiR7Znl9IDxicj5gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGNiLmFkZFBhZCh0aGlzLmxhc3RQYWQsIGZ4LCBmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBnZXJiZXI6IHBhZCAke2xhc3RQYWR9LCAke2Z4fSwgJHtmeX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgaWdub3JpbmcgJHt0aGlzLmxhc3RQYWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZihsaW5lTnIgPiAxNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrOyAvLyBmb3IgdGVzdGluZyAhISFcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGNiLmNlbnRlcigpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDApOyAvLyB0aGlzIGVuYWJsZXMgdGhlIHByb2dyZXNzYmFyIC8gVUkgdXBkYXRlcyAhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGZvdW5kIG9uIHNlIHdlYi4uLlxyXG5cclxuZnVuY3Rpb24gYXJyYXlCdWZmZXJUb1N0cmluZyhidWZmZXIsIGVuY29kaW5nLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XHJcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHJlYWRlci5vbmxvYWQgPSAoZXZ0KSA9PiB7IGlmKGV2dC50YXJnZXQpIGNhbGxiYWNrKGV2dC50YXJnZXQucmVzdWx0KTsgfTtcclxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IsIGVuY29kaW5nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RyaW5nVG9BcnJheUJ1ZmZlcihzdHJpbmcsIGVuY29kaW5nLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbc3RyaW5nXSwgeyB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PScgKyBlbmNvZGluZyB9KTtcclxuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgcmVhZGVyLm9ubG9hZCA9IChldnQpID0+IHsgaWYoZXZ0LnRhcmdldCkgY2FsbGJhY2soZXZ0LnRhcmdldC5yZXN1bHQpOyB9O1xyXG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xyXG59XHJcbiIsImltcG9ydCB7IEdyaWQsIE1vdXNlIH0gZnJvbSAnY2FudmFzLWNvb3JkcycgLy8gaHR0cHM6Ly9naXRodWIuY29tL0NvZGVEcmFrZW4vY2FudmFzLWNvb3Jkc1xyXG5pbXBvcnQgeyBEZXZpY2UgfSBmcm9tICcuL2RldmljZSc7XHJcbmltcG9ydCB7IE1hcmxpbiB9IGZyb20gJy4vZGV2aWNlTWFybGluJztcclxuaW1wb3J0IHsgUENCLCBQYWQsIFBhZFN0eWxlIH0gZnJvbSAnLi9wY2InO1xyXG5pbXBvcnQgeyBQYXJzZXJHZXJiZXIgfSBmcm9tICcuL3BhcnNlckdlcmJlcic7XHJcblxyXG4vLyBzaW1wbGVyICEhISBjb25zdCBpbmZvRHJvcERvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxEaXZFbGVtZW50PignI2luZm9Ecm9wRG93bicpO1xyXG5cclxuY29uc3QgYm9keTogSFRNTEJvZHlFbGVtZW50IHwgbnVsbCA9IDxIVE1MQm9keUVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XHJcbmNvbnN0IG1lc3NhZ2VFbGVtOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUVsZW1cIik7XHJcbmNvbnN0IHVwbG9hZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwbG9hZEJ1dHRvblwiKTtcclxuY29uc3QgcGFkc0ZpZWxkOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFkc0ZpZWxkXCIpO1xyXG5jb25zdCBjb29yZHM6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IDxIVE1MRGl2RWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDb29yZHNcIik7XHJcbmNvbnN0IGNvb3Jkc0ZpZWxkOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29vcmRzRmllbGRcIik7XHJcbmNvbnN0IGRyb3Bab25lOiBIVE1MRWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyb3Bab25lXCIpO1xyXG5jb25zdCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbCA9IDxIVE1MQ2FudmFzRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbmNvbnN0IGRlYnVnOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWdcIik7XHJcbmNvbnN0IHByb2dyZXNzOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZ3Jlc3NcIik7XHJcbmNvbnN0IHByb2dyZXNzYmFyOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzc2JhcicpO1xyXG5jb25zdCBjb250ZXh0TWVudTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gPEhUTUxEaXZFbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGV4dE1lbnUnKTtcclxuY29uc3QgcHJvZ3Jlc3NDYW5jZWw6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IDxIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzQ2FuY2VsJyk7XHJcblxyXG5jb25zdCBtZW51U2V0WmVybzogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnVTZXRaZXJvXCIpO1xyXG5jb25zdCBtZW51TW92ZVRvOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSA8SFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudU1vdmVUb1wiKTtcclxuY29uc3QgbWVudU1vdmVBbGw6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IDxIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51TW92ZUFsbFwiKTtcclxuY29uc3QgbWVudUJsb2I6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IDxIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51QmxvYlwiKTtcclxuXHJcblxyXG5jb25zdCBtYWluOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSA8SFRNTERpdkVsZW1lbnQgfCBudWxsPmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblwiKTtcclxuY29uc3Qgb3BlblNpZGViYXJCdXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IDxIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuU2lkZWJhclwiKTtcclxuXHJcbmNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkZXInKVswXTtcclxuY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvb3RlcicpO1xyXG5cclxubGV0IG1lc3NhZ2VDbGVhclRpbWVvdXQ6bnVtYmVyfHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxubGV0IGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgbnVsbCA9IG51bGw7XHJcbmxldCBtb3VzZTogTW91c2UsIGdyaWQ6IEdyaWQ7XHJcbmxldCBwY2I6IFBDQjtcclxuXHJcbmxldCBkZXZpY2UgPSBuZXcgTWFybGluKCk7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgaWYgKHVwbG9hZEJ1dHRvbiAmJiBtZW51U2V0WmVybyAmJiBtZW51TW92ZVRvICYmIG1lbnVNb3ZlQWxsICYmIG1lbnVCbG9iICYmIHByb2dyZXNzQ2FuY2VsICYmIHBhZHNGaWVsZCAmJiBjb29yZHNGaWVsZCAmJiBib2R5ICYmIGNhbnZhcyAmJiBmb290ZXIpIHtcclxuICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBjYikgcGNiLm1vdXNlTW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGNiKSBwY2IubW91c2VEb3duKGV2ZW50KTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGNiKSBwY2IubW91c2VVcChldmVudCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwY2IpIHBjYi5tb3VzZU91dChldmVudCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwY2IpIHBjYi5tb3VzZVdoZWVsKGV2ZW50KTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHVwbG9hZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkRmlsZUVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIHVwbG9hZEZpbGVFbGUudHlwZSA9IFwiZmlsZVwiO1xyXG4gICAgICAgICAgICB1cGxvYWRGaWxlRWxlLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIHVwbG9hZEZpbGVFbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXY6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldik7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB1c2VyIGhhZCBzZWxlY3RlZCBhIGZpbGVcclxuICAgICAgICAgICAgICAgIGlmICh1cGxvYWRGaWxlRWxlLmZpbGVzICYmIHVwbG9hZEZpbGVFbGUuZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gdXBsb2FkRmlsZUVsZS5maWxlc1swXVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBmaWxlOiAke2ZpbGUubmFtZX0gc2l6ZToke2ZpbGUuc2l6ZX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0dlcmJlckZpbGUoZmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgncGxlYXNlIGNob29zZSBhIGZpbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51U2V0WmVyby5vbmNsaWNrID0gKGV2ZW50Ok1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYoY29udGV4dE1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmNsYXNzTmFtZSA9IGNvbnRleHRNZW51LmNsYXNzTmFtZS5yZXBsYWNlKCd3My1zaG93JywgJ3czLWhpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwY2Iuc2V0WmVybygpO1xyXG4gICAgICAgICAgICBkZXZpY2Uuc2V0WmVybyhwY2IuZ2V0WmVybygpKTsgLy8gZGV2aWNlIG11c3Qgc3Vic3RyYWN0IFwiemVyb1wiIGZyb20gYWxsIGNvb3Jkc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVudU1vdmVUby5vbmNsaWNrID0gKGV2ZW50Ok1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYoY29udGV4dE1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmNsYXNzTmFtZSA9IGNvbnRleHRNZW51LmNsYXNzTmFtZS5yZXBsYWNlKCd3My1zaG93JywgJ3czLWhpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudCk7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvb3JkcyAhISFcclxuICAgICAgICAgICAgLy8gISEhIG5lZWQgdG8gYmUgcmVsYXRpdmUgdG8gemVybyAhISEgdXV1aGhoXHJcblxyXG4gICAgICAgICAgICAvLyBsZXQgcGFkcyA9IHBjYi5nZXRTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAvLyBpZiAocGFkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcGFkOiBQYWQgPSBwYWRzWzBdO1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocGFkKTtcclxuICAgICAgICAgICAgLy8gICAgIGRldmljZS5tb3ZlVG8ocGFkLnBvc1gsIHBhZC5wb3NZLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwb3MgPSBwY2IuZ2V0U2VsZWN0ZWRaZXJvKCk7IC8vIGxvd2VyIGxlZnQgb2Ygc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIGRldmljZS5tb3ZlVG8ocG9zWzBdLCBwb3NbMV0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVudU1vdmVBbGwub25jbGljayA9IChldmVudDpNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGNvbnRleHRNZW51KSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5jbGFzc05hbWUgPSBjb250ZXh0TWVudS5jbGFzc05hbWUucmVwbGFjZSgndzMtc2hvdycsICd3My1oaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHBsaXN0ID0gcGNiLmdldFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIGxldCBwemVybyA9IHBjYi5nZXRTZWxlY3RlZFplcm8oKTtcclxuICAgICAgICAgICAgZGV2aWNlLm1vdmVUb0FsbChwbGlzdCwgcHplcm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZW51QmxvYi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZihjb250ZXh0TWVudSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUuY2xhc3NOYW1lID0gY29udGV4dE1lbnUuY2xhc3NOYW1lLnJlcGxhY2UoJ3czLXNob3cnLCAndzMtaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRldmljZS5ibG9iKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib2R5Lm9uZHJvcCA9IChldikgPT4ge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldik7XHJcbiAgICAgICAgICAgIGlmIChldi5kYXRhVHJhbnNmZXIgJiYgZXYuZGF0YVRyYW5zZmVyLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVc2UgRGF0YVRyYW5zZmVySXRlbUxpc3QgaW50ZXJmYWNlIHRvIGFjY2VzcyB0aGUgZmlsZShzKVxyXG4gICAgICAgICAgICAgICAgWy4uLmV2LmRhdGFUcmFuc2Zlci5pdGVtc10uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGRyb3BwZWQgaXRlbXMgYXJlbid0IGZpbGVzLCByZWplY3QgdGhlbVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmtpbmQgPT09ICdmaWxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gaXRlbS5nZXRBc0ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDigKYgaXRlbVske2l9XS5uYW1lID0gJHtmaWxlLm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzR2VyYmVyRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmRhdGFUcmFuc2Zlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gVXNlIERhdGFUcmFuc2ZlciBpbnRlcmZhY2UgdG8gYWNjZXNzIHRoZSBmaWxlKHMpXHJcbiAgICAgICAgICAgICAgICBbLi4uZXYuZGF0YVRyYW5zZmVyLmZpbGVzXS5mb3JFYWNoKChmaWxlLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKApiBmaWxlWyR7aX1dLm5hbWUgPSAke2ZpbGUubmFtZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0dlcmJlckZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYm9keS5vbmRyYWdvdmVyID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaWxlKHMpIGluIGRyb3Agem9uZScpO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJldmVudCBkZWZhdWx0IGJlaGF2aW9yIChQcmV2ZW50IGZpbGUgZnJvbSBiZWluZyBvcGVuZWQpXHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYW52YXMub25jb250ZXh0bWVudSA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnb25jb250ZXh0bWVudScsZXYpO1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dE1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LnN0eWxlLmxlZnQgPSBgJHtldi5wYWdlWH1weGA7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS50b3AgPSBgJHtldi5wYWdlWX1weGA7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5jbGFzc05hbWUgPSBjb250ZXh0TWVudS5jbGFzc05hbWUucmVwbGFjZSgndzMtaGlkZScsICd3My1zaG93Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2FudmFzLm9ubW91c2V1cCA9IChldikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dE1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmNsYXNzTmFtZSA9IGNvbnRleHRNZW51LmNsYXNzTmFtZS5yZXBsYWNlKCd3My1zaG93JywgJ3czLWhpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICBwY2IgPSBuZXcgUENCKCk7XHJcbiAgICAgICAgICAgIHBjYi5zZXRDYW52YXMoY3R4LCBjYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgbW91c2UgPSBuZXcgTW91c2UoY3R4LCBjYW52YXMpO1xyXG4gICAgICAgICAgICBtb3VzZS50cmFjaygpO1xyXG4gICAgICAgICAgICBncmlkID0gbmV3IEdyaWQoKTtcclxuICAgICAgICAgICAgZ3JpZC5zdGVwID0gMjtcclxuICAgICAgICAgICAgZ3JpZC5saW5lV2lkdGggPSAwLjAzO1xyXG4gICAgICAgICAgICBncmlkLmJvbGRXaWR0aCA9IDAuMDU7XHJcbiAgICAgICAgICAgIGdyaWQuY3JlYXRlTGluZXMoY2FudmFzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsb2JhbFRoaXMucmVzaXplKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ21pc3NpbmcgaHRtbCBlbGVtZW50cyAhJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1lc3NhZ2UodGV4dDogc3RyaW5nKSB7XHJcbiAgICBpZihtZXNzYWdlQ2xlYXJUaW1lb3V0KSB7XHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChtZXNzYWdlQ2xlYXJUaW1lb3V0KTtcclxuICAgIH1cclxuICAgIGlmKG1lc3NhZ2VFbGVtKSB7XHJcbiAgICAgICAgbWVzc2FnZUVsZW0uaW5uZXJIVE1MID0gYCR7dGV4dH1gO1xyXG4gICAgICAgIG1lc3NhZ2VDbGVhclRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChtZXNzYWdlQ2xlYXIsIDEwMDAwKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBtZXNzYWdlQ2xlYXIoKSB7XHJcbiAgICBtZXNzYWdlQ2xlYXJUaW1lb3V0ID0gdW5kZWZpbmVkO1xyXG4gICAgaWYobWVzc2FnZUVsZW0pIHtcclxuICAgICAgICBtZXNzYWdlRWxlbS5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgaWYgKGNhbnZhcyAmJiBjdHgpIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XHJcblxyXG4gICAgICAgIGN0eC5zZXRUcmFuc2Zvcm0oXHJcbiAgICAgICAgICAgIHBjYiA/IHBjYi56b29tIDogMSwgMCxcclxuICAgICAgICAgICAgMCwgcGNiID8gcGNiLnpvb20gOiAxLFxyXG4gICAgICAgICAgICAwLCAwKTtcclxuXHJcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIC8vIGdyaWQuZHJhdyhjdHgsIGNhbnZhcyk7XHJcbiAgICAgICAgLy8gZ3JpZC5zdGVwID0gcGNiPzEwLjAvcGNiLnpvb206MTAuMDtcclxuICAgICAgICAvLyBncmlkLmNyZWF0ZUxpbmVzKGNhbnZhcyk7XHJcbiAgICAgICAgZ3JpZC5saW5lcy5mb3JFYWNoKGxpbmUgPT4gbGluZS5kcmF3KGN0eCkpXHJcbiAgICAgICAgbW91c2UuZHJhdygpO1xyXG5cclxuXHJcbiAgICAgICAgY3R4LnNldFRyYW5zZm9ybShcclxuICAgICAgICAgICAgMSwgMCxcclxuICAgICAgICAgICAgMCwgLTEsXHJcbiAgICAgICAgICAgIDAsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBjdHguc2NhbGUoMSwtMSk7IC8vIGZsaXAgZGlzcGxheSB5XHJcblxyXG4gICAgICAgIGlmIChwY2IpIHtcclxuICAgICAgICAgICAgcGNiLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NHZXJiZXJGaWxlKGZpbGU6IEZpbGUpIHtcclxuICAgIGlmIChwYWRzRmllbGQgJiYgY29vcmRzRmllbGQgJiYgY3R4ICYmIGNhbnZhcyAmJiBwcm9ncmVzcyAmJiBwcm9ncmVzc2JhciAmJiBwcm9ncmVzc0NhbmNlbCAmJiBkcm9wWm9uZSkgeyAvLyBtYWtlcyB0eXBlc2NyaXB0IGhhcHB5Li4uXHJcblxyXG4gICAgICAgIHBjYiA9IG5ldyBQQ0IoKTtcclxuICAgICAgICBwY2Iuc2V0Q2FudmFzKGN0eCwgY2FudmFzKTtcclxuICAgICAgICBsZXQgcGFyc2VyID0gbmV3IFBhcnNlckdlcmJlcihwY2IpO1xyXG5cclxuICAgICAgICBwYWRzRmllbGQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgY29vcmRzRmllbGQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgZHJvcFpvbmUuaW5uZXJUZXh0ID0gZmlsZS5uYW1lO1xyXG4gICAgICAgIHByb2dyZXNzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cclxuICAgICAgICBwYXJzZXIucGFkc0ZpZWxkID0gcGFkc0ZpZWxkO1xyXG4gICAgICAgIHBhcnNlci5jb29yZHNGaWVsZCA9IGNvb3Jkc0ZpZWxkO1xyXG4gICAgICAgIHByb2dyZXNzQ2FuY2VsLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBhcnNlci5jYW5jZWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyc2VyLnByb2Nlc3NDQiA9ICh2YWx1ZTpudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzYmFyKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc2Jhci5zdHlsZS53aWR0aCA9IGAke3ZhbHVlfSVgO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Byb2dyZXNzOicsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBwYXJzZXIucGFyc2VGaWxlKGZpbGUpO1xyXG5cclxuICAgICAgICBwY2Iuem9vbVRvRml0KFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdKTtcclxuXHJcbiAgICAgICAgcHJvZ3Jlc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmdsb2JhbFRoaXMuYWNjb3JkaW9uVG9nZ2xlciA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmIChlbGVtKSB7XHJcbiAgICAgICAgaWYgKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJ3My1zaG93XCIpID09IC0xICYmIGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJ3My1oaWRlXCIpID09IC0xKSB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lICs9IFwiIHczLXNob3dcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJ3My1zaG93XCIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUucmVwbGFjZShcInczLXNob3dcIiwgXCJ3My1oaWRlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUucmVwbGFjZShcInczLWhpZGVcIiwgXCJ3My1zaG93XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdhY2NvcmRpb25Ub2dnbGVyIG5vIGVsZW0gd2l0aCBpZDonLCBpZCk7XHJcbiAgICB9XHJcbiAgICBnbG9iYWxUaGlzLnJlc2l6ZSgpO1xyXG59XHJcblxyXG5nbG9iYWxUaGlzLm9wZW5TaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgaWYgKG1haW4gJiYgZGVidWcgJiYgb3BlblNpZGViYXJCdXR0b24pIHtcclxuICAgICAgICBtYWluLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIzNTBweFwiO1xyXG4gICAgICAgIGRlYnVnLnN0eWxlLndpZHRoID0gXCIzNTBweFwiO1xyXG4gICAgICAgIGRlYnVnLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgb3BlblNpZGViYXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxufVxyXG5cclxuZ2xvYmFsVGhpcy5jbG9zZVNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBpZiAobWFpbiAmJiBkZWJ1ZyAmJiBvcGVuU2lkZWJhckJ1dHRvbikge1xyXG4gICAgICAgIG1haW4uc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBweFwiO1xyXG4gICAgICAgIGRlYnVnLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBvcGVuU2lkZWJhckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgIH1cclxufVxyXG5cclxuZ2xvYmFsVGhpcy56b29tVG9GaXQgPSAoKSA9PiB7XHJcbiAgICBpZihwY2IgJiYgY2FudmFzKSB7XHJcbiAgICAgICAgcGNiLnpvb21Ub0ZpdChbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdsb2JhbFRoaXMucm90YXRlUmlnaHQgPSAoKSA9PiB7XHJcbiAgICBpZihwY2IgJiYgY2FudmFzKSB7XHJcbiAgICAgICAgLy8gcGNiLnpvb21Ub0ZpdChbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XHJcbiAgICB9XHJcbiAgICBtZXNzYWdlKCdtw7xzc3RlIG1hIGVpbmVyIGltcGxlbWVudGllcmVuLCBuZScpO1xyXG59XHJcblxyXG5nbG9iYWxUaGlzLnJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGlmIChjYW52YXMgJiYgaGVhZGVyICYmIGZvb3RlciAmJiBkZWJ1ZyAmJiBjb29yZHMpIHtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBpbm5lcldpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbm5lckhlaWdodCAtIGhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSBmb290ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgIG1vdXNlLmRyYXcoKTtcclxuICAgICAgICBncmlkLmRyYXcoY3R4LCBjYW52YXMpO1xyXG5cclxuICAgICAgICAvLyBoZWlnaHQgb2YgZGVidWcgaXMgaW5uZXJIZWlnaHQgLSBtYXJnaW4gdG9wL2JvdHRvbSBtb3JlIG9yIGxlc3MgLSBmb290ZXIuaGVpZ2h0XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZTogbWFyZ2luJywgZGVidWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKTtcclxuICAgICAgICBsZXQgZG1heGhlaWdodCA9IGlubmVySGVpZ2h0IC0gZm9vdGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDsgLy8gY2FudmFzLmhlaWdodCArIGhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSAxNjtcclxuICAgICAgICAvLyBkZWJ1Zy5zdHlsZS5oZWlnaHQgPSBgJHtkaGVpZ2h0fXB4YDsgLy8gMTYgaXMgbWFyZ2luVG9wXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZTogaW5uZXIgaGVpZ2h0JywgaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXNpemU6IGRlYnVnIGhlaWdodCcsIGRoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBoZWlnaHQgb2YgYWxsIG90aGVyIGVsZW1lbnRzIGluIGRlYnVnXHJcbiAgICAgICAgbGV0IGhlaWdodCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgZGVidWcuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgbGV0IGVsZW06IEhUTUxFbGVtZW50ID0gPEhUTUxFbGVtZW50PmNoaWxkO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcmVzaXplOiAgICR7Y2hpbGQuaWR9ICR7ZWxlbS5jbGllbnRIZWlnaHR9ICR7ZWxlbS5jbGFzc05hbWV9YCk7XHJcbiAgICAgICAgICAgIGlmKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoJ3czLWhpZGUnKSAhPSAtMSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBoZWlnaHQgKz0gZWxlbS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVzaXplOiBkZWJ1ZyBjb250ZW50IGhlaWdodCcsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHNvIGZhciBzbyBnb29kXHJcblxyXG4gICAgICAgIC8vIGlmIGNvb3JkcyBpcyBzaG93biwgc2V0IGRlYnVnIHNpemUgdG8gbWF4XHJcbiAgICAgICAgLy8gaWYgY29vcmRzIGlzIHNob3duLCBnaXZlIGl0IGFsbCB0aGUgcmVzdCBvZiB0aGUgc3BhY2VcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVzaXplIGNvb3JkcyAnLCBjb29yZHMuY2xhc3NOYW1lLmluZGV4T2YoJ3czLWhpZGUnKSk7XHJcbiAgICAgICAgaWYoY29vcmRzLmNsYXNzTmFtZS5pbmRleE9mKCd3My1oaWRlJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZSBjb29yZHMgaXMgTk9UIHZpc2libGUnKTtcclxuICAgICAgICAgICAgZGVidWcuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0KzE2fXB4YDtcclxuICAgICAgICAgICAgY29vcmRzLnN0eWxlLmhlaWdodCA9IGAkezE2fXB4YDsgLy8gZWdhbCA/XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZSBjb29yZHMgaXMgdmlzaWJsZScpO1xyXG4gICAgICAgICAgICBoZWlnaHQgLT0gY29vcmRzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDsgLy8gZG8gbm90IGNvdW50IGNvb3JkcyB0byBoaWdodFxyXG4gICAgICAgICAgICBkZWJ1Zy5zdHlsZS5oZWlnaHQgPSBgJHtkbWF4aGVpZ2h0fXB4YDtcclxuICAgICAgICAgICAgY29vcmRzLnN0eWxlLmhlaWdodCA9IGAke2RtYXhoZWlnaHQgLSBoZWlnaHQgLSAxNn1weGA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaW5pdCk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKHZhbCkgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coYHJlc2l6ZTogJHt2YWx9YCk7XHJcbiAgICBnbG9iYWxUaGlzLnJlc2l6ZSgpO1xyXG59KVxyXG4iXSwibmFtZXMiOlsiJDJhY2E5Njg3OWRmNWNjNTQkZXhwb3J0JDVlZTg5YWIxYmE1NGZmNCIsImEiLCJnIiwidCIsImUiLCJUeXBlRXJyb3IiLCJjIiwibyIsImxlbmd0aCIsInMiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsImkiLCJhcmd1bWVudHMiLCJyIiwibiIsInRoaXMiLCJ4IiwieSIsImN0eCIsImNhbnZhcyIsImNvbG9yIiwiZm9udCIsInNldFBvcyIsImJpbmQiLCJwcm90b3R5cGUiLCJoIiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIk1hdGgiLCJmbG9vciIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsImNvbmNhdCIsInNhdmUiLCJmaWxsU3R5bGUiLCJ3aWR0aCIsIm1lYXN1cmVUZXh0IiwidiIsImhlaWdodCIsImZpbGxUZXh0IiwicmVzdG9yZSIsImQiLCJmIiwiYiIsImwiLCJsaW5lV2lkdGgiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiaiIsInN0ZXAiLCJib2xkTnRoIiwiYm9sZENvbG9yIiwiYm9sZFdpZHRoIiwibGluZXMiLCJwdXNoIiwiJCIsImNyZWF0ZUxpbmVzIiwiZm9yRWFjaCIsImRyYXciLCJkcmF3VGV4dCIsIk1vdXNlIiwiR3JpZCIsIiRkOGI2YzkwM2ZhMTg0NGUxJGV4cG9ydHMiLCJvYmoiLCJkaW1lbnNpb24iLCJwYXJlbnQiLCJyaWdodCIsInBvaW50cyIsImRpc3RhbmNlIiwiZGltZW5zaW9ucyIsIl9rZFRyZWVPYmplY3RUeXBlIiwiQXJyYXkiLCJpc0FycmF5Iiwicm9vdCIsImJ1aWxkVHJlZSIsImxvYWRUcmVlIiwiZGVwdGgiLCJtZWRpYW4iLCJub2RlIiwiZGltIiwiJDJhY2E5Njg3OWRmNWNjNTQkZXhwb3J0JDNiYTlmYzIzYTJlYWMyYmQiLCJzb3J0IiwibmV3bWVkaWFuIiwic2xpY2UiLCJkYXRhIiwicmVzdG9yZVBhcmVudCIsInNyYyIsImRlc3QiLCJ0b0pTT04iLCJ0b0FycmF5IiwicmVzdWx0IiwicG9pbnQiLCJpbm5lclNlYXJjaCIsIm5ld2tkTm9kZSIsImluc2VydFBvc2l0aW9uIiwibWV0cmljIiwibm9kZVNlYXJjaCIsIm93biIsImZpbmRNaW4iLCJtaW4iLCJtYXgiLCJmaW5kTWF4IiwibmV4dE5vZGUiLCJuZXh0T2JqIiwicERpbWVuc2lvbiIsInJlbW92ZU5vZGUiLCJjb25zb2xlIiwid2FybiIsImFsbGNoaWxkcyIsIm5ld25vZGUiLCJiZXN0Q2hpbGQiLCJvd25EaXN0YW5jZSIsImJlc3ROb2RlcyIsInNpemUiLCJtYXhOb2RlcyIsInBvcCIsImxpbmVhclBvaW50IiwibGluZWFyRGlzdGFuY2UiLCJuZWFyZXN0U2VhcmNoIiwicGVlayIsInNhdmVOb2RlIiwiYWJzIiwib3RoZXJDaGlsZCIsIm1heERpc3RhbmNlIiwiJDJhY2E5Njg3OWRmNWNjNTQkZXhwb3J0JDU3YjJmZjg3NjJiMGE0MDkiLCJsb2ciLCJjb250ZW50IiwiY291bnQiLCJzY29yZUZ1bmN0aW9uIiwiZWxlbWVudCIsImJ1YmJsZVVwIiwiZW5kIiwic2lua0Rvd24iLCJsZW4iLCJFcnJvciIsInBhcmVudE4iLCIkZTk2YzFkYzgyZTIzOTNkYSRleHBvcnQkODIxNWQxNGE2M2Q5ZmIxMCIsImlucHV0TGFzdCIsImlucHV0UXVldWUiLCJjb25zdHJ1Y3RvciIsImRldmljZUNoZWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRldmljZUNvbm5lY3QiLCJkZXZpY2VEaXNjb25uZWN0IiwiZGV2aWNlSW5wdXQiLCJkZXZpY2VJbnB1dEZvcm0iLCJkZXZpY2VJbmZvIiwiZGV2aWNlTG9nIiwiZGV2aWNlU2VyaWFsIiwicG9ydCIsInRleHREZWNvZGVyIiwiVGV4dERlY29kZXJTdHJlYW0iLCJvbmNsaWNrIiwic2VyaWFsQ2hlY2siLCJzZXJpYWxDb25uZWN0Iiwic2VyaWFsRGlzY29ubmVjdCIsIm9uc3VibWl0Iiwic2VyaWFsSW5wdXRGb3JtIiwiYXN5bmMiLCJzZXJpYWwiLCJyZXF1ZXN0UG9ydCIsInRoZW4iLCJzZXJpYWxQb3J0T3BlbiIsInJlYXNvbiIsInNlcmlhbEVycm9yIiwidmlkIiwicGlkIiwicG9ydHMiLCJnZXRJbmZvIiwidXNiUHJvZHVjdElkIiwidXNiVmVuZG9ySWQiLCJjbG9zZSIsImNhdGNoIiwiZXJyb3IiLCJ0aW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXJpYWxXcml0ZSIsImF2YWlsYWJsZSIsInRpbWVzdGVwIiwibWF4dGltZSIsInNlcmlhbEF2YWlsIiwiZXJyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInNlcmlhbElucHV0Q2hhbmdlIiwidGV4dCIsIm5hdmlnYXRvciIsInVwZGF0ZVBvcnRzIiwiZ2V0UG9ydHMiLCJodG1sIiwiaW5uZXJIVE1MIiwiYnRucyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYnRuIiwiaWRzIiwiaWQiLCJzcGxpdCIsInNlcmlhbENvbm5lY3REZXZpY2UiLCJwYXJzZUludCIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJvbmNvbm5lY3QiLCJvbmRpc2Nvbm5lY3QiLCJvblNlcmlhbERpc2Nvbm5lY3RlZCIsIm9wZW4iLCJiYXVkUmF0ZSIsInZhbCIsIm9uU2VyaWFsQ29ubmVjdGVkIiwic2V0VGltZW91dCIsInNlcmlhbFJlYWQiLCJ0b1N0cmluZyIsInJlYWRhYmxlIiwicGlwZVRvIiwiZ2V0UmVhZGVyIiwic2VyaWFsUmVhZG9uIiwiZG9uZSIsInJlYWRlciIsInJlYWQiLCJyZWxlYXNlTG9jayIsInB1c2hlZFN0dWZmIiwiaW5kZXhPZiIsInZhbHVlcyIsInNlcmlhbExvZyIsInNlcmlhbENhbGxiYWNrIiwidXRmOEVuY29kZSIsIlRleHRFbmNvZGVyIiwiZ2V0V3JpdGVyIiwid3JpdGVyIiwid3JpdGUiLCJlbmNvZGUiLCIkYTM2ZTY5YmRmYzgxNjM2ZSR2YXIkQm91bmRpbmdCb3giLCJtaW54IiwibWlueSIsIm1heHgiLCJtYXh5IiwidXBkYXRlRnJvbVBhZCIsInBhZCIsInVwZGF0ZSIsInBvc1giLCJwb3NZIiwiY2VudGVyIiwiem9vbSIsInplcm8iLCJkaWFnb25hbCIsInNxcnQiLCJpbnNpZGUiLCIkYTM2ZTY5YmRmYzgxNjM2ZSRleHBvcnQkMTM4Zjk2N2ZlZmY0ZmIxOSIsImZvcm0iLCJ3IiwiJGEzNmU2OWJkZmM4MTYzNmUkZXhwb3J0JDRiNDNkNTFmMjk0NTczODQiLCJzdHlsZSIsImFzVHVwbGUiLCIkYTM2ZTY5YmRmYzgxNjM2ZSRleHBvcnQkYmRmNDY1MTEzZjk3OWQ4ZiIsIiQyYWNhOTY4NzlkZjVjYzU0JGV4cG9ydCQyNWY2ZTk5NzY1YjFkM2JjIiwiZmlsZU5hbWUiLCJtb3VzZUZsYWciLCJtb3VzZVN0YXJ0WCIsIm1vdXNlU3RhcnRZIiwibW91c2VPZmZYIiwibW91c2VPZmZZIiwibmVhcmVzdCIsInN1cGVyIiwibWFwU3R5bGVzIiwiTWFwIiwibWFwUGFkcyIsImJiUGNiIiwiYmJaZXJvIiwiYmJTZWxlY3Rpb24iLCJzZXRDYW52YXMiLCJzZXRaZXJvIiwiZ2V0WmVybyIsImdldFNlbGVjdGVkIiwibmVhciIsImdldFNlbGVjdGVkWmVybyIsInBhZHNldCIsInpvb21Ub0ZpdCIsInBzaXplIiwienciLCJ6aCIsIm5hbWUiLCJzZXQiLCJhZGRQYWQiLCJoYXMiLCJTZXQiLCJnZXQiLCJuZXdwYWQiLCJhZGQiLCJwYWRzIiwicGFkc2V0cyIsInRyZWUiLCJiYWxhbmNlRmFjdG9yIiwidHJhbnMiLCJnZXRUcmFuc2Zvcm0iLCJidXR0b24iLCJteCIsIm15Iiwib2Zmc2V0VG9wIiwibW91c2VTZWxlY3RYIiwibW91c2VTZWxlY3RZIiwibW91c2VTZWxlY3QiLCJmb3VuZCIsImRpc3QiLCJnZXRQYWRDb3VudCIsInNoaWZ0S2V5IiwiYmJOZXdTZWxlY3Rpb24iLCJuZWFyMSIsImRlbHRhWSIsInJlY3QiLCJrZXlzIiwicGFkc3R5bGUiLCJzdHkiLCJmaWxsUmVjdCIsInN3Iiwic2giLCJmaWxsIiwiZWxsaXBzZSIsIlBJIiwiY3NpemUiLCIkNjc2NWE5M2UyMTc2MmIxNiR2YXIkU3RhdHVzIiwiU3RhdHVzIiwiJDU3ZWIxODUyZjAzZDliMDAkZXhwb3J0JDdhY2ZhNmVkMDEwMTBlMzciLCJwY2IiLCIkZDk5ZDU5OWU1Mzc5MGExMyRleHBvcnQkZmM1ZDRjYTI4MmUwMjFiMSIsInJlTnVtRm9ybWF0IiwicmVNYXRjaFBhZCIsInJlTWF0Y2hQYWRDb29yZEluaXQiLCJyZU1hdGNoUGFkQ29vcmQiLCJfY2FuY2VsIiwiZmxvYXRGcmFjdHMiLCJmbG9hdERlemlzIiwibGFzdFBhZCIsInBhcnNlRmlsZSIsImZpbGUiLCJhcnJheUJ1ZmZlciIsImJ1ZiIsImVuY29kaW5nIiwiY2FsbGJhY2siLCJibG9iIiwicHJvY2Vzc0dlcmJlclRleHQiLCJmaW5hbGx5IiwiQmxvYiIsInR5cGUiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZ0IiwidGFyZ2V0IiwicmVhZEFzVGV4dCIsImNhbmNlbCIsImxpbmVOciIsImxpbmUiLCJwcm9jZXNzR2VyYmVyTGluZSIsInByb2Nlc3NDQiIsInJldHJlZSIsIm1hdGNoTnVtRm9ybWF0IiwiZXhlYyIsIm1hdGNoUGFkIiwicGFkc0ZpZWxkIiwiYWRkUGFkU3R5bGUiLCJwYXJzZUZsb2F0IiwibWF0Y2hQYWRDb29yZEluaXQiLCJtYXRjaFBhZENvb3JkIiwic3RhcnRzV2l0aCIsInN4Iiwic3kiLCJmeCIsImZ5Iiwic3Vic3RyaW5nIiwiY29vcmRzRmllbGQiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkYm9keSIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRtZXNzYWdlRWxlbSIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciR1cGxvYWRCdXR0b24iLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkcGFkc0ZpZWxkIiwiJGQyNmEzMWJmMTQ0ZmZiYWMkdmFyJGNvb3JkcyIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRjb29yZHNGaWVsZCIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRkcm9wWm9uZSIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRjYW52YXMiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkZGVidWciLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkcHJvZ3Jlc3MiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkcHJvZ3Jlc3NiYXIiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkY29udGV4dE1lbnUiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkcHJvZ3Jlc3NDYW5jZWwiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkbWVudVNldFplcm8iLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkbWVudU1vdmVUbyIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRtZW51TW92ZUFsbCIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRtZW51QmxvYiIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRtYWluIiwiJGQyNmEzMWJmMTQ0ZmZiYWMkdmFyJG9wZW5TaWRlYmFyQnV0dG9uIiwiJGQyNmEzMWJmMTQ0ZmZiYWMkdmFyJGhlYWRlciIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRmb290ZXIiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkbWVzc2FnZUNsZWFyVGltZW91dCIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRtb3VzZSIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRncmlkIiwiJGQyNmEzMWJmMTQ0ZmZiYWMkdmFyJHBjYiIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRjdHgiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkZGV2aWNlIiwibWFybGluRGl2IiwiaW5pdEh0bWwiLCJvbkJ0bkFicyIsInNlcmlhbFdyaXRlV2FpdCIsIm9uQnRuUG9zIiwieiIsImNtZCIsInVuZGVmaW5lZCIsInBsaXN0Iiwic3RhcnQiLCJzdGFydHBhZCIsInNlYXJjaCIsImZvdW5kcGFkIiwiZm91bmRwYWRzIiwid2hhdCIsInJlbW92ZSIsImZvdW5kcGFkMSIsIndoYXQxIiwic2V0U3RhdHVzIiwiUmVhZHkiLCJtYXJsaW5EaXZTdGF0dXMiLCJtYXJsaW5EaXZDb21tYW5kcyIsIm9uQnRuQ29sZCIsIm9uQnRuUmVsIiwiTkMiLCJCdXN5Iiwic3RhdHVzIiwib25CdG5Ib21lIiwibWFybGluRGl2UG9zaXRpb24iLCJpbm5lclRleHQiLCIkZDI2YTMxYmYxNDRmZmJhYyR2YXIkbWVzc2FnZUNsZWFyIiwiJGQyNmEzMWJmMTQ0ZmZiYWMkdmFyJHVwZGF0ZSIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRyYW5zZm9ybSIsImNsZWFyUmVjdCIsIiRkMjZhMzFiZjE0NGZmYmFjJHZhciRwcm9jZXNzR2VyYmVyRmlsZSIsInBhcnNlciIsImRpc3BsYXkiLCJnbG9iYWxUaGlzIiwiYWNjb3JkaW9uVG9nZ2xlciIsImVsZW0iLCJyZXNpemUiLCJvcGVuU2lkZWJhciIsIm1hcmdpblJpZ2h0IiwiY2xvc2VTaWRlYmFyIiwicm90YXRlUmlnaHQiLCJjbGVhclRpbWVvdXQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJkbWF4aGVpZ2h0IiwiY2hpbGQiLCJjaGlsZHJlbiIsImNsaWVudEhlaWdodCIsImdldENvbnRleHQiLCJtb3VzZU1vdmUiLCJtb3VzZURvd24iLCJtb3VzZVVwIiwibW91c2VPdXQiLCJtb3VzZVdoZWVsIiwidXBsb2FkRmlsZUVsZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGljayIsImV2IiwiZmlsZXMiLCJhbGVydCIsInBvcyIsInB6ZXJvIiwibW92ZVRvQWxsIiwib25kcm9wIiwiZGF0YVRyYW5zZmVyIiwiaXRlbXMiLCJpdGVtIiwia2luZCIsImdldEFzRmlsZSIsIm9uZHJhZ292ZXIiLCJvbmNvbnRleHRtZW51IiwicGFnZVgiLCJwYWdlWSIsIm9ubW91c2V1cCIsInRyYWNrIl0sInZlcnNpb24iOjMsImZpbGUiOiJpbmRleC5IQVNIX1JFRl9kMTc3ZWIwMzI1OGU2OTg4LmpzLm1hcCJ9
