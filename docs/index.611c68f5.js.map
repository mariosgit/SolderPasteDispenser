{"mappings":"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","sources":["node_modules/canvas-coords/dist/index.js","src/index.ts"],"sourcesContent":["(function () {var a={};function g(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function c(t,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function h(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),t}var i=function(){function t(e,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"gray\",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"16px Monospace\",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;g(this,t),this.x=r,this.y=n,this.ctx=e,this.canvas=o,this.color=s,this.font=i,this.setPos=this.setPos.bind(this)}return h(t,[{key:\"track\",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvas;return t?e.addEventListener(\"mousemove\",this.setPos):e.removeEventListener(\"mousemove\",this.setPos),this}},{key:\"setPos\",value:function(t){var e=this.canvas.getBoundingClientRect();return this.x=Math.floor(t.clientX-e.left),this.y=Math.floor(t.clientY-e.top),this}},{key:\"draw\",value:function(){var t=this.x,e=this.y,o=this.canvas,s=this.ctx,i=this.font,r=this.color,n=\"X: \".concat(t,\", Y: \").concat(e);s.save(),s.fillStyle=r,s.font=i;var a=t<o.width/2?20:-s.measureText(n).width-20,v=e<o.height/2?25:-18;return s.fillText(n,this.x+a,this.y+v),s.restore(),this}}]),t}();function d(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function f(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}var b=function(){function t(e,i,s,r,l,n){d(this,t),this.color=e,this.lineWidth=i,this.startX=s,this.startY=r,this.endX=l,this.endY=n}return e(t,[{key:\"draw\",value:function(t){var e=this.color,i=this.lineWidth,s=this.startX,r=this.startY,l=this.endX,n=this.endY;t.save(),t.beginPath(),t.strokeStyle=e,t.lineWidth=i,t.moveTo(s,r),t.lineTo(l,n),t.stroke(),t.restore()}}]),t}(),j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"gray\",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:\"DarkGray\",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:\"16px Monospace\";d(this,t),this.color=e,this.lineWidth=i,this.step=s,this.boldNth=r,this.boldColor=l,this.boldWidth=n,this.font=o,this.lines=null}return e(t,[{key:\"createLines\",value:function(t){for(var e=this.color,i=this.lineWidth,s=this.step,r=this.boldNth,l=this.boldColor,n=this.boldWidth,o=[],a=r*s,h=0;h<t.width;h+=s){var v=h%a==0;o.push(v?new b(l,n,h,0,h,t.height):new b(e,i,h,0,h,t.height))}for(var $=0;$<t.height;$+=s){var d=$%a==0;o.push(d?new b(l,n,0,$,t.width,$):new b(e,i,0,$,t.width,$))}this.lines=o}},{key:\"drawText\",value:function(t,e){var i=this.step,s=this.boldNth,r=this.boldColor,l=this.font;t.save(),t.font=l,t.fillStyle=r,t.fillText(\"0\",1,15);for(var n=i*s;n<e.width;n+=i*s)t.fillText(n,n,15);for(var o=i*s;o<e.height;o+=i*s)t.fillText(o,0,o+15);t.restore()}},{key:\"draw\",value:function(t,e){this.lines||this.createLines(e),this.lines.forEach(function(e){return e.draw(t)}),this.drawText(t,e)}}]),t}();a.Mouse=i,a.Grid=j;if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=a}else if(typeof define===\"function\"&&define.amd){define(function(){return a})}})();","import { Grid, Mouse } from 'canvas-coords' // https://github.com/CodeDraken/canvas-coords\r\n\r\nconst body:HTMLBodyElement | null = <HTMLBodyElement | null>document.getElementsByTagName('body')[0];\r\nconst uploadFileEle: HTMLInputElement | null = <HTMLInputElement | null>document.getElementById(\"fileInput\");\r\nconst uploadButton: HTMLButtonElement | null = <HTMLButtonElement | null>document.getElementById(\"uploadButton\");\r\nconst padsField: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"padsField\");\r\nconst coordsField: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"coordsField\");\r\nconst dropZone: HTMLElement | null = document.getElementById(\"dropZone\");\r\nconst canvas: HTMLCanvasElement | null = <HTMLCanvasElement | null>document.getElementById(\"canvas\");\r\nconst progress: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"progress\");\r\n\r\nconst header = document.getElementsByTagName('header')[0];\r\nconst footer = document.getElementsByTagName('footer')[0];\r\n\r\nlet ctx:CanvasRenderingContext2D | null = null;\r\nlet mouse: Mouse, grid: Grid;\r\nlet pcb: PCB;\r\n\r\nexport class PadStyle {\r\n    public form:string;\r\n    public width:number;\r\n    public height:number;\r\n    constructor(form:string, w:number, h:number) {\r\n        this.form = form;\r\n        this.width = w;\r\n        this.height = h;\r\n    }\r\n}\r\nexport class Pad {\r\n    posX: number;\r\n    posY: number;\r\n    style: string;\r\n    constructor(style:string, x:number, y:number) {\r\n        this.posX = x;\r\n        this.posY = y;\r\n        this.style = style;\r\n    }\r\n}\r\nexport class PCB {\r\n    ctx: CanvasRenderingContext2D;\r\n    canvas: HTMLCanvasElement;\r\n    mapStyles: Map<string, PadStyle>;\r\n    mapPads: Map<string, Set<Pad>>;\r\n    fileName:string = \"\";\r\n\r\n    mouseFlag: boolean = false;\r\n    mouseStartX: number = 0;\r\n    mouseStartY: number = 0;\r\n    mouseOffX: number = 0;\r\n    mouseOffY: number = 0;\r\n\r\n    zoom:number = 6.0;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\r\n        this.ctx = ctx;\r\n        this.canvas = canvas;\r\n        this.mapStyles = new Map<string, PadStyle>();\r\n        this.mapPads = new Map<string, Set<Pad>>();\r\n    }\r\n\r\n    draw() {\r\n        // theoretisch so...\r\n        // this.ctx.fillStyle = 'orangered';\r\n        this.ctx.fillStyle = 'antiquewhite';\r\n\r\n        // draw zero\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(-10 + this.mouseOffX,0 + this.mouseOffY);\r\n        this.ctx.lineTo(10 + this.mouseOffX,0 + this.mouseOffY);\r\n        this.ctx.moveTo(0 + this.mouseOffX,-10 + this.mouseOffY);\r\n        this.ctx.lineTo(0 + this.mouseOffX,10 + this.mouseOffY);\r\n        this.ctx.stroke();\r\n\r\n        this.ctx.beginPath();\r\n        for(let padstyle of this.mapPads.keys()) {\r\n\r\n            const sty = this.mapStyles.get(padstyle);\r\n            const padset = this.mapPads.get(padstyle);\r\n            if(sty && padset) {\r\n                const sw = sty.width * this.zoom;\r\n                const sh = sty.height * this.zoom;\r\n                for(let pad of padset.values()) {\r\n                    if(sty.form == 'R' || sty.form == 'O') {\r\n                        this.ctx.fillRect(\r\n                            pad.posX * this.zoom - sw/2.0 + this.mouseOffX,\r\n                            pad.posY * this.zoom -sh/2.0 + this.mouseOffY,\r\n                            sw, sh);\r\n                    } else if (sty.form == 'C') {\r\n                        this.ctx.arc(\r\n                            pad.posX * this.zoom - sw/2.0 + this.mouseOffX,\r\n                            pad.posY * this.zoom -sh/2.0 + this.mouseOffY,\r\n                            sty.width * this.zoom,\r\n                            0,359);\r\n                    } else {\r\n                        console.log(`draw quatsch ${sty}`);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.ctx.fill();\r\n    }\r\n\r\n    addPadStyle(name:string, form:string, w:number, h:number) {\r\n        this.mapStyles.set(name, new PadStyle(form,w,h));\r\n    }\r\n\r\n    addPad(style:string, x:number, y:number) {\r\n        if(!this.mapPads.has(style)) {\r\n            this.mapPads.set(style, new Set<Pad>());\r\n        }\r\n        let padset = this.mapPads.get(style);\r\n        if(padset) {\r\n            padset.add(new Pad(style,x,y));\r\n        }\r\n    }\r\n    mouseDown(event:MouseEvent) {\r\n        this.mouseStartX = event.clientX - this.mouseOffX;\r\n        this.mouseStartY = event.clientY - this.mouseOffY;\r\n        this.mouseFlag = true;\r\n    }\r\n    mouseUp(event:MouseEvent) {\r\n        this.mouseFlag = false;\r\n    }\r\n    mouseMove(event:MouseEvent) {\r\n        if(this.mouseFlag) {\r\n            this.mouseOffX = event.clientX - this.mouseStartX;\r\n            this.mouseOffY = event.clientY - this.mouseStartY;\r\n        }\r\n    }\r\n    mouseWheel(event:WheelEvent) {\r\n        console.log(event.deltaY);\r\n        if(event.deltaY > 0) {\r\n            this.zoom *= 1.1;\r\n        } else {\r\n            this.zoom *= 0.9;\r\n        }\r\n    }\r\n}\r\n\r\nfunction init() {\r\n    console.log('moinsen');\r\n\r\n    if (uploadFileEle && uploadButton && padsField && coordsField && body && canvas) {\r\n        ctx = canvas.getContext(\"2d\");\r\n\r\n        canvas.addEventListener(\"mousemove\", (event) => {\r\n            if(pcb)\r\n                pcb.mouseMove(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mousedown\", (event) => {\r\n            if(pcb)\r\n                pcb.mouseDown(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mouseup\", (event) => {\r\n            if(pcb)\r\n                pcb.mouseUp(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mouseout\", (event) => {\r\n            if(pcb)\r\n                pcb.mouseUp(event);\r\n        }, false);\r\n        canvas.addEventListener(\"wheel\", (event) => {\r\n            if(pcb)\r\n                pcb.mouseWheel(event);\r\n        }, false);\r\n\r\n        uploadButton.onclick = () => {\r\n            // check if user had selected a file\r\n            if (uploadFileEle.files && uploadFileEle.files.length > 0) {\r\n                let file = uploadFileEle.files[0]\r\n                console.log(file);\r\n                console.log(`file: ${file.name} size:${file.size}`);\r\n\r\n                processGerberFile(file);\r\n\r\n            } else {\r\n                alert('please choose a file')\r\n                return\r\n            }\r\n        }\r\n\r\n        body.ondrop = (ev) => {\r\n            ev.preventDefault();\r\n            console.log(ev);\r\n            if (ev.dataTransfer.items) {\r\n                // Use DataTransferItemList interface to access the file(s)\r\n                [...ev.dataTransfer.items].forEach((item, i) => {\r\n                    // If dropped items aren't files, reject them\r\n                    if (item.kind === 'file') {\r\n                        const file = item.getAsFile();\r\n                        if (file) {\r\n                            console.log(`… item[${i}].name = ${file.name}`);\r\n                            processGerberFile(file);\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                // Use DataTransfer interface to access the file(s)\r\n                [...ev.dataTransfer.files].forEach((file, i) => {\r\n                    if (file) {\r\n                        console.log(`… file[${i}].name = ${file.name}`);\r\n                        processGerberFile(file);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        body.ondragover = (ev) => {\r\n            console.log('File(s) in drop zone');\r\n\r\n            // Prevent default behavior (Prevent file from being opened)\r\n            ev.preventDefault();\r\n        }\r\n\r\n        canvas.width = innerWidth;\r\n        canvas.height = innerHeight - header.getBoundingClientRect().height - footer.getBoundingClientRect().height -7;\r\n\r\n        mouse = new Mouse(ctx, canvas);\r\n        mouse.track();\r\n        grid = new Grid();\r\n        window.requestAnimationFrame(update);\r\n    }\r\n    else {\r\n        console.error('missing html elements !');\r\n    }\r\n}\r\n\r\nfunction update() {\r\n    if (canvas && ctx) {\r\n        window.requestAnimationFrame(update);\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        grid.draw(ctx, canvas);\r\n        mouse.draw();\r\n\r\n        if(pcb) {\r\n            pcb.draw();\r\n        }\r\n    }\r\n}\r\n\r\nfunction processGerberFile(file: File) {\r\n    if (uploadFileEle && uploadButton && padsField && coordsField && body && ctx && progress) { // makes typescript happy...\r\n        file.arrayBuffer().then((buf) => {\r\n            arrayBufferToString(buf, 'UTF-8', (text: string) => {\r\n\r\n                progress.style.display = 'block';\r\n                const progressbar = document.getElementById('progressbar');\r\n\r\n                pcb = new PCB(ctx, canvas);\r\n\r\n                if(dropZone)\r\n                    dropZone.innerText = file.name;\r\n\r\n                // console.log(text);\r\n                // translate line ends...\r\n                text = text.replace(/\\r/g, ''); // remove windows trash\r\n                const lines = text.split('\\n');\r\n                let floatFracts = 1;\r\n                let floatDezis = 1;\r\n                let lastPad = \"\";\r\n\r\n                let lineNr = 1;\r\n                for (let line of lines) {\r\n                    lineNr++;\r\n                    // line = line.replace(/\\n/g,'<br>');\r\n\r\n                    // Zahlenformat info line \"%FSLAX34Y34*%\"\r\n                    //   %FSLAX25Y25*% Coordinate format specification:\r\n                    //   Coordinates format is 2.5:\r\n                    //   2 digits in the integer part\r\n                    //   5 digits in the fractional part\r\n                    const matchNumFormat = line.match(/^%FSLAX([0-9])([0-9])Y([0-9])([0-9])[*]%/);\r\n                    if (matchNumFormat) {\r\n                        // console.log(matchNumFormat);\r\n                        floatDezis = parseInt(matchNumFormat[1]);\r\n                        floatFracts = parseInt(matchNumFormat[2]);\r\n                        console.log(`gerber: float digits = ${floatDezis} ${floatFracts}`);\r\n                    }\r\n\r\n                    // check for pad definitions\r\n                    const matchPad = line.match(/^(%AD)(D[0-9]+)([A-Za-z])[,]([0-9.]+)[X]?([0-9.]+)?/);///);\r\n                    // console.log(matchPad);\r\n                    // Wenn \"C\" dann gibts nur eine coord\r\n                    if (matchPad) {\r\n                        padsField.innerHTML += `${matchPad[2]} ${matchPad[4]} ${matchPad[5]}<br>`;\r\n                        pcb.addPadStyle(matchPad[2], matchPad[3], parseFloat(matchPad[4]), parseFloat(matchPad[5]));\r\n                        console.log(`gerber: style ${matchPad[2]},${matchPad[3]}, ${parseFloat(matchPad[4])}, ${parseFloat(matchPad[5])}`);\r\n                    }\r\n\r\n                    // a pad line: \"X379984Y963930D03*\"\r\n                    const matchPadCoord = line.match(/^X([-]?)([0-9]+)Y([-]?)([0-9]+)D([0-9]+)[*]/);///);\r\n                    const matchPadCoordInit = line.match(/^(D[0-9]+)[*]/);///);\r\n                    if (matchPadCoordInit) {\r\n                        // console.log(matchPadCoordInit);\r\n                        lastPad = matchPadCoordInit[1];\r\n                    }\r\n                    if (matchPadCoord) {\r\n                        // console.log(matchPadCoord);\r\n                        let sx = matchPadCoord[2];\r\n                        let sy = matchPadCoord[4];\r\n                        const len = floatDezis + floatFracts;\r\n                        // fill freak's leading zeros\r\n                        while (sx.length < len) {\r\n                            sx = `0${sx}`;\r\n                        }\r\n                        while (sy.length < len) {\r\n                            sy = `0${sy}`;\r\n                        }\r\n                        // make a freak'n float\r\n                        let fx = 0.0;\r\n                        let fy = 0.0;\r\n                        sx = `${sx.substring(0, floatDezis)}.${sx.substring(floatDezis)}`;\r\n                        sy = `${sy.substring(0, floatDezis)}.${sy.substring(floatDezis)}`;\r\n                        fx = parseFloat(sx);\r\n                        fy = parseFloat(sy);\r\n                        if(matchPadCoord[1] == '-') {\r\n                            fx = fx * -1.0;\r\n                        }\r\n                        if(matchPadCoord[3] == '-') {\r\n                            fy = fy * -1.0;\r\n                        }\r\n\r\n                        coordsField.innerHTML += `${lastPad}:  x:${fx} y:${fy} <br>`;\r\n\r\n                        pcb.addPad(lastPad, fx,fy);\r\n                        console.log(`gerber(${lineNr}/${lines.length}): pad ${lastPad}, ${fx}, ${fy}`);\r\n                        if(progressbar) {\r\n                            progressbar.style.width = `${lineNr*100/lines.length}%`;\r\n                        }\r\n\r\n                        if(lineNr > 1500) {\r\n                            break; // for testing !!!\r\n                        }\r\n                    }\r\n\r\n                } // for\r\n                progress.style.display = 'none';\r\n\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\n// found on se web...\r\n\r\nfunction arrayBufferToString(buffer, encoding, callback) {\r\n    var blob = new Blob([buffer], { type: 'text/plain' });\r\n    var reader = new FileReader();\r\n    reader.onload = (evt) => { callback(evt.target.result); };\r\n    reader.readAsText(blob, encoding);\r\n}\r\n\r\nfunction stringToArrayBuffer(string, encoding, callback) {\r\n    var blob = new Blob([string], { type: 'text/plain;charset=' + encoding });\r\n    var reader = new FileReader();\r\n    reader.onload = (evt) => { callback(evt.target.result); };\r\n    reader.readAsArrayBuffer(blob);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', init);\r\n\r\nwindow.addEventListener('resize', (val) => {\r\n    console.log(`resize: ${val}`);\r\n    if (canvas && header && footer) {\r\n        canvas.width = innerWidth;\r\n        canvas.height = innerHeight - header.getBoundingClientRect().height - footer.getBoundingClientRect().height -7;\r\n        mouse.draw();\r\n        grid.draw(ctx, canvas);\r\n    }\r\n})\r\n"],"names":["a","g","t","e","TypeError","c","o","length","s","enumerable","configurable","writable","Object","defineProperty","key","i","arguments","r","n","this","x","y","ctx","canvas","color","font","setPos","bind","prototype","h","value","addEventListener","removeEventListener","getBoundingClientRect","Math","floor","clientX","left","clientY","top","concat","save","fillStyle","width","measureText","v","height","fillText","restore","d","f","b","l","lineWidth","startX","startY","endX","endY","beginPath","strokeStyle","moveTo","lineTo","stroke","j","step","boldNth","boldColor","boldWidth","lines","push","$","createLines","forEach","draw","drawText","Mouse","Grid","$c0e850328e6b509c$exports","$b4e14b6b8da86996$var$body","document","getElementsByTagName","$b4e14b6b8da86996$var$uploadFileEle","getElementById","$b4e14b6b8da86996$var$uploadButton","$b4e14b6b8da86996$var$padsField","$b4e14b6b8da86996$var$coordsField","$b4e14b6b8da86996$var$dropZone","$b4e14b6b8da86996$var$canvas","$b4e14b6b8da86996$var$progress","$b4e14b6b8da86996$var$header","$b4e14b6b8da86996$var$footer","$b4e14b6b8da86996$var$mouse","$b4e14b6b8da86996$var$grid","$b4e14b6b8da86996$var$pcb","$b4e14b6b8da86996$var$ctx","$b4e14b6b8da86996$export$138f967feff4fb19","constructor","form","w","$b4e14b6b8da86996$export$4b43d51f29457384","style","posX","posY","$b4e14b6b8da86996$export$bdf465113f979d8f","fileName","mouseFlag","mouseStartX","mouseStartY","mouseOffX","mouseOffY","zoom","mapStyles","Map","mapPads","padstyle","keys","sty","get","padset","sw","sh","pad","values","fillRect","console","log","arc","fill","addPadStyle","name","set","addPad","has","Set","add","mouseDown","event","mouseUp","mouseMove","mouseWheel","deltaY","$b4e14b6b8da86996$var$update","window","requestAnimationFrame","clearRect","$b4e14b6b8da86996$var$processGerberFile","file","arrayBuffer","then","buf","encoding","callback","blob","reader","text","display","progressbar","innerText","replace","split","floatFracts","floatDezis","lastPad","lineNr","line","matchNumFormat","match","parseInt","matchPad","innerHTML","parseFloat","matchPadCoord","matchPadCoordInit","sx","sy","len","fx","fy","substring","Blob","type","FileReader","onload","evt","target","result","readAsText","getContext","onclick","files","size","alert","ondrop","ev","preventDefault","dataTransfer","items","item","kind","getAsFile","ondragover","innerWidth","innerHeight","track","error","val"],"version":3,"file":"index.611c68f5.js.map"}