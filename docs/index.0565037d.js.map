{"mappings":"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","sources":["node_modules/canvas-coords/dist/index.js","node_modules/process/browser.js","node_modules/path-browserify/index.js","src/index.ts"],"sourcesContent":["(function () {var a={};function g(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function c(t,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function h(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),t}var i=function(){function t(e,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"gray\",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"16px Monospace\",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;g(this,t),this.x=r,this.y=n,this.ctx=e,this.canvas=o,this.color=s,this.font=i,this.setPos=this.setPos.bind(this)}return h(t,[{key:\"track\",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvas;return t?e.addEventListener(\"mousemove\",this.setPos):e.removeEventListener(\"mousemove\",this.setPos),this}},{key:\"setPos\",value:function(t){var e=this.canvas.getBoundingClientRect();return this.x=Math.floor(t.clientX-e.left),this.y=Math.floor(t.clientY-e.top),this}},{key:\"draw\",value:function(){var t=this.x,e=this.y,o=this.canvas,s=this.ctx,i=this.font,r=this.color,n=\"X: \".concat(t,\", Y: \").concat(e);s.save(),s.fillStyle=r,s.font=i;var a=t<o.width/2?20:-s.measureText(n).width-20,v=e<o.height/2?25:-18;return s.fillText(n,this.x+a,this.y+v),s.restore(),this}}]),t}();function d(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function f(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}var b=function(){function t(e,i,s,r,l,n){d(this,t),this.color=e,this.lineWidth=i,this.startX=s,this.startY=r,this.endX=l,this.endY=n}return e(t,[{key:\"draw\",value:function(t){var e=this.color,i=this.lineWidth,s=this.startX,r=this.startY,l=this.endX,n=this.endY;t.save(),t.beginPath(),t.strokeStyle=e,t.lineWidth=i,t.moveTo(s,r),t.lineTo(l,n),t.stroke(),t.restore()}}]),t}(),j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"gray\",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:\"DarkGray\",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:\"16px Monospace\";d(this,t),this.color=e,this.lineWidth=i,this.step=s,this.boldNth=r,this.boldColor=l,this.boldWidth=n,this.font=o,this.lines=null}return e(t,[{key:\"createLines\",value:function(t){for(var e=this.color,i=this.lineWidth,s=this.step,r=this.boldNth,l=this.boldColor,n=this.boldWidth,o=[],a=r*s,h=0;h<t.width;h+=s){var v=h%a==0;o.push(v?new b(l,n,h,0,h,t.height):new b(e,i,h,0,h,t.height))}for(var $=0;$<t.height;$+=s){var d=$%a==0;o.push(d?new b(l,n,0,$,t.width,$):new b(e,i,0,$,t.width,$))}this.lines=o}},{key:\"drawText\",value:function(t,e){var i=this.step,s=this.boldNth,r=this.boldColor,l=this.font;t.save(),t.font=l,t.fillStyle=r,t.fillText(\"0\",1,15);for(var n=i*s;n<e.width;n+=i*s)t.fillText(n,n,15);for(var o=i*s;o<e.height;o+=i*s)t.fillText(o,0,o+15);t.restore()}},{key:\"draw\",value:function(t,e){this.lines||this.createLines(e),this.lines.forEach(function(e){return e.draw(t)}),this.drawText(t,e)}}]),t}();a.Mouse=i,a.Grid=j;if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=a}else if(typeof define===\"function\"&&define.amd){define(function(){return a})}})();","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","import { Grid, Mouse } from 'canvas-coords' // https://github.com/CodeDraken/canvas-coords\r\nimport { resolve } from 'path';\r\n\r\nconst body: HTMLBodyElement | null = <HTMLBodyElement | null>document.getElementsByTagName('body')[0];\r\nconst uploadFileEle: HTMLInputElement | null = <HTMLInputElement | null>document.getElementById(\"fileInput\");\r\nconst uploadButton: HTMLButtonElement | null = <HTMLButtonElement | null>document.getElementById(\"uploadButton\");\r\nconst padsField: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"padsField\");\r\nconst coordsField: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"coordsField\");\r\nconst dropZone: HTMLElement | null = document.getElementById(\"dropZone\");\r\nconst canvas: HTMLCanvasElement | null = <HTMLCanvasElement | null>document.getElementById(\"canvas\");\r\nconst progress: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById(\"progress\");\r\nconst progressbar: HTMLDivElement | null = <HTMLDivElement | null>document.getElementById('progressbar');\r\n\r\nconst header = document.getElementsByTagName('header')[0];\r\nconst footer = document.getElementsByTagName('footer')[0];\r\n\r\nlet ctx: CanvasRenderingContext2D | null = null;\r\nlet mouse: Mouse, grid: Grid;\r\nlet pcb: PCB;\r\nlet floatFracts = 1;\r\nlet floatDezis = 1;\r\nlet lastPad = \"\";\r\n\r\n\r\nexport class PadStyle {\r\n    public form: string;\r\n    public width: number;\r\n    public height: number;\r\n    constructor(form: string, w: number, h: number) {\r\n        this.form = form;\r\n        this.width = w;\r\n        this.height = h;\r\n    }\r\n}\r\nexport class Pad {\r\n    posX: number;\r\n    posY: number;\r\n    style: string;\r\n    constructor(style: string, x: number, y: number) {\r\n        this.posX = x;\r\n        this.posY = y;\r\n        this.style = style;\r\n    }\r\n}\r\nexport class PCB {\r\n    ctx: CanvasRenderingContext2D;\r\n    canvas: HTMLCanvasElement;\r\n    mapStyles: Map<string, PadStyle>;\r\n    mapPads: Map<string, Set<Pad>>;\r\n    fileName: string = \"\";\r\n\r\n    mouseFlag: boolean = false;\r\n    mouseStartX: number = 0;\r\n    mouseStartY: number = 0;\r\n    mouseOffX: number = 0;\r\n    mouseOffY: number = 0;\r\n\r\n    zoom: number = 6.0;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\r\n        this.ctx = ctx;\r\n        this.canvas = canvas;\r\n        this.mapStyles = new Map<string, PadStyle>();\r\n        this.mapPads = new Map<string, Set<Pad>>();\r\n    }\r\n\r\n    draw() {\r\n        // theoretisch so...\r\n        // this.ctx.fillStyle = 'orangered';\r\n        this.ctx.fillStyle = 'antiquewhite';\r\n\r\n        // draw zero\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(-10 + this.mouseOffX, 0 + this.mouseOffY);\r\n        this.ctx.lineTo(10 + this.mouseOffX, 0 + this.mouseOffY);\r\n        this.ctx.moveTo(0 + this.mouseOffX, -10 + this.mouseOffY);\r\n        this.ctx.lineTo(0 + this.mouseOffX, 10 + this.mouseOffY);\r\n        this.ctx.stroke();\r\n\r\n        this.ctx.beginPath();\r\n        for (let padstyle of this.mapPads.keys()) {\r\n\r\n            const sty = this.mapStyles.get(padstyle);\r\n            const padset = this.mapPads.get(padstyle);\r\n            if (sty && padset) {\r\n                const sw = sty.width * this.zoom;\r\n                const sh = sty.height * this.zoom;\r\n                for (let pad of padset.values()) {\r\n                    if (sty.form == 'R' || sty.form == 'O') {\r\n                        this.ctx.fillRect(\r\n                            pad.posX * this.zoom - sw / 2.0 + this.mouseOffX,\r\n                            pad.posY * this.zoom - sh / 2.0 + this.mouseOffY,\r\n                            sw, sh);\r\n                    } else if (sty.form == 'C') {\r\n                        this.ctx.arc(\r\n                            pad.posX * this.zoom - sw / 2.0 + this.mouseOffX,\r\n                            pad.posY * this.zoom - sh / 2.0 + this.mouseOffY,\r\n                            sty.width * this.zoom,\r\n                            0, 359);\r\n                    } else {\r\n                        console.log(`draw quatsch ${sty}`);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.ctx.fill();\r\n    }\r\n\r\n    addPadStyle(name: string, form: string, w: number, h: number) {\r\n        this.mapStyles.set(name, new PadStyle(form, w, h));\r\n    }\r\n\r\n    addPad(style: string, x: number, y: number) {\r\n        if (!this.mapPads.has(style)) {\r\n            this.mapPads.set(style, new Set<Pad>());\r\n        }\r\n        let padset = this.mapPads.get(style);\r\n        if (padset) {\r\n            padset.add(new Pad(style, x, y));\r\n        }\r\n    }\r\n    mouseDown(event: MouseEvent) {\r\n        this.mouseStartX = event.clientX - this.mouseOffX;\r\n        this.mouseStartY = event.clientY - this.mouseOffY;\r\n        this.mouseFlag = true;\r\n    }\r\n    mouseUp(event: MouseEvent) {\r\n        this.mouseFlag = false;\r\n    }\r\n    mouseMove(event: MouseEvent) {\r\n        if (this.mouseFlag) {\r\n            this.mouseOffX = event.clientX - this.mouseStartX;\r\n            this.mouseOffY = event.clientY - this.mouseStartY;\r\n        }\r\n    }\r\n    mouseWheel(event: WheelEvent) {\r\n        // console.log(event.deltaY);\r\n        if (event.deltaY > 0) {\r\n            this.zoom *= 1.1;\r\n        } else {\r\n            this.zoom *= 0.9;\r\n        }\r\n    }\r\n}\r\n\r\nfunction init() {\r\n    console.log('moinsen');\r\n\r\n    if (uploadFileEle && uploadButton && padsField && coordsField && body && canvas) {\r\n        ctx = canvas.getContext(\"2d\");\r\n\r\n        canvas.addEventListener(\"mousemove\", (event) => {\r\n            if (pcb)\r\n                pcb.mouseMove(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mousedown\", (event) => {\r\n            if (pcb)\r\n                pcb.mouseDown(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mouseup\", (event) => {\r\n            if (pcb)\r\n                pcb.mouseUp(event);\r\n        }, false);\r\n        canvas.addEventListener(\"mouseout\", (event) => {\r\n            if (pcb)\r\n                pcb.mouseUp(event);\r\n        }, false);\r\n        canvas.addEventListener(\"wheel\", (event) => {\r\n            if (pcb)\r\n                pcb.mouseWheel(event);\r\n        }, false);\r\n\r\n        uploadButton.onclick = () => {\r\n            // check if user had selected a file\r\n            if (uploadFileEle.files && uploadFileEle.files.length > 0) {\r\n                let file = uploadFileEle.files[0]\r\n                console.log(file);\r\n                console.log(`file: ${file.name} size:${file.size}`);\r\n\r\n                processGerberFile(file);\r\n\r\n            } else {\r\n                alert('please choose a file')\r\n                return\r\n            }\r\n        }\r\n\r\n        body.ondrop = (ev) => {\r\n            ev.preventDefault();\r\n            console.log(ev);\r\n            if (ev.dataTransfer.items) {\r\n                // Use DataTransferItemList interface to access the file(s)\r\n                [...ev.dataTransfer.items].forEach((item, i) => {\r\n                    // If dropped items aren't files, reject them\r\n                    if (item.kind === 'file') {\r\n                        const file = item.getAsFile();\r\n                        if (file) {\r\n                            console.log(` item[${i}].name = ${file.name}`);\r\n                            processGerberFile(file);\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                // Use DataTransfer interface to access the file(s)\r\n                [...ev.dataTransfer.files].forEach((file, i) => {\r\n                    if (file) {\r\n                        console.log(` file[${i}].name = ${file.name}`);\r\n                        processGerberFile(file);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        body.ondragover = (ev) => {\r\n            console.log('File(s) in drop zone');\r\n\r\n            // Prevent default behavior (Prevent file from being opened)\r\n            ev.preventDefault();\r\n        }\r\n\r\n        canvas.width = innerWidth;\r\n        canvas.height = innerHeight - header.getBoundingClientRect().height - footer.getBoundingClientRect().height - 7;\r\n\r\n        mouse = new Mouse(ctx, canvas);\r\n        mouse.track();\r\n        grid = new Grid();\r\n        window.requestAnimationFrame(update);\r\n    }\r\n    else {\r\n        console.error('missing html elements !');\r\n    }\r\n}\r\n\r\nfunction update() {\r\n    if (canvas && ctx) {\r\n        window.requestAnimationFrame(update);\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        grid.draw(ctx, canvas);\r\n        mouse.draw();\r\n\r\n        if (pcb) {\r\n            pcb.draw();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction processGerberFile(file: File) {\r\n    if (uploadFileEle && uploadButton && padsField && coordsField && body && ctx && progress) { // makes typescript happy...\r\n        file.arrayBuffer().then((buf) => {\r\n            arrayBufferToString(buf, 'UTF-8', (text: string) => {\r\n\r\n                padsField.innerHTML = '';\r\n                coordsField.innerHTML = '';\r\n\r\n                if (dropZone)\r\n                    dropZone.innerText = file.name;\r\n\r\n                processGerberFile2(text);\r\n\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nasync function processGerberFile2(text: string) {\r\n    if (uploadFileEle && uploadButton && padsField && coordsField && body && canvas && ctx && progress) { // makes typescript happy...\r\n\r\n        progress.style.display = 'block';\r\n\r\n        pcb = new PCB(ctx, canvas);\r\n\r\n\r\n        // console.log(text);\r\n        // translate line ends...\r\n        text = text.replace(/\\r/g, ''); // remove windows trash\r\n        const lines = text.split('\\n');\r\n\r\n        let lineNr = 1;\r\n        for (let line of lines) {\r\n            lineNr++;\r\n\r\n            // console.log(`gerber(${lineNr}/${lines.length}): `);\r\n\r\n            await processGerberFileLine(line);\r\n\r\n            if (progressbar) {\r\n                progressbar.style.width = `${lineNr * 100 / lines.length}%`;\r\n            }\r\n\r\n        } // for\r\n        progress.style.display = 'none';\r\n    }\r\n}\r\n\r\nasync function processGerberFileLine(line: string) {\r\n    return new Promise<void>((resolve) => {\r\n        if (uploadFileEle && uploadButton && padsField && coordsField && body && ctx && progress) { // makes typescript happy...\r\n\r\n            // line = line.replace(/\\n/g,'<br>');\r\n\r\n            // Zahlenformat info line \"%FSLAX34Y34*%\"\r\n            //   %FSLAX25Y25*% Coordinate format specification:\r\n            //   Coordinates format is 2.5:\r\n            //   2 digits in the integer part\r\n            //   5 digits in the fractional part\r\n            const matchNumFormat = line.match(/^%FSLAX([0-9])([0-9])Y([0-9])([0-9])[*]%/);\r\n            if (matchNumFormat) {\r\n                // console.log(matchNumFormat);\r\n                floatDezis = parseInt(matchNumFormat[1]);\r\n                floatFracts = parseInt(matchNumFormat[2]);\r\n                console.log(`gerber: float digits = ${floatDezis} ${floatFracts}`);\r\n            }\r\n\r\n            // check for pad definitions\r\n            const matchPad = line.match(/^(%AD)(D[0-9]+)([A-Za-z])[,]([0-9.]+)[X]?([0-9.]+)?/);///);\r\n            // console.log(matchPad);\r\n            // Wenn \"C\" dann gibts nur eine coord\r\n            if (matchPad) {\r\n                padsField.innerHTML += `${matchPad[2]} ${matchPad[4]} ${matchPad[5]}<br>`;\r\n                pcb.addPadStyle(matchPad[2], matchPad[3], parseFloat(matchPad[4]), parseFloat(matchPad[5]));\r\n                console.log(`gerber: style ${matchPad[2]},${matchPad[3]}, ${parseFloat(matchPad[4])}, ${parseFloat(matchPad[5])}`);\r\n            }\r\n\r\n            // a pad line: \"X379984Y963930D03*\"\r\n            const matchPadCoord = line.match(/^X([-]?)([0-9]+)Y([-]?)([0-9]+)D([0-9]+)[*]/);///);\r\n            const matchPadCoordInit = line.match(/^(D[0-9]+)[*]/);///);\r\n            if (matchPadCoordInit) {\r\n                // console.log(matchPadCoordInit);\r\n                lastPad = matchPadCoordInit[1];\r\n            }\r\n            if (matchPadCoord) {\r\n                // console.log(matchPadCoord);\r\n                let sx = matchPadCoord[2];\r\n                let sy = matchPadCoord[4];\r\n                const len = floatDezis + floatFracts;\r\n                // fill freak's leading zeros\r\n                while (sx.length < len) {\r\n                    sx = `0${sx}`;\r\n                }\r\n                while (sy.length < len) {\r\n                    sy = `0${sy}`;\r\n                }\r\n                // make a freak'n float\r\n                let fx = 0.0;\r\n                let fy = 0.0;\r\n                sx = `${sx.substring(0, floatDezis)}.${sx.substring(floatDezis)}`;\r\n                sy = `${sy.substring(0, floatDezis)}.${sy.substring(floatDezis)}`;\r\n                fx = parseFloat(sx);\r\n                fy = parseFloat(sy);\r\n                if (matchPadCoord[1] == '-') {\r\n                    fx = fx * -1.0;\r\n                }\r\n                if (matchPadCoord[3] == '-') {\r\n                    fy = fy * -1.0;\r\n                }\r\n\r\n                coordsField.innerHTML += `${lastPad}:  x:${fx} y:${fy} <br>`;\r\n\r\n                pcb.addPad(lastPad, fx, fy);\r\n                // console.log(`gerber: pad ${lastPad}, ${fx}, ${fy}`);\r\n\r\n                // if(lineNr > 1500) {\r\n                //     break; // for testing !!!\r\n                // }\r\n            }\r\n        } // if\r\n        setTimeout(resolve, 0); // this enables the progressbar / UI updates !\r\n    });\r\n}\r\n\r\n\r\n// found on se web...\r\n\r\nfunction arrayBufferToString(buffer, encoding, callback) {\r\n    var blob = new Blob([buffer], { type: 'text/plain' });\r\n    var reader = new FileReader();\r\n    reader.onload = (evt) => { callback(evt.target.result); };\r\n    reader.readAsText(blob, encoding);\r\n}\r\n\r\nfunction stringToArrayBuffer(string, encoding, callback) {\r\n    var blob = new Blob([string], { type: 'text/plain;charset=' + encoding });\r\n    var reader = new FileReader();\r\n    reader.onload = (evt) => { callback(evt.target.result); };\r\n    reader.readAsArrayBuffer(blob);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', init);\r\n\r\nwindow.addEventListener('resize', (val) => {\r\n    console.log(`resize: ${val}`);\r\n    if (canvas && header && footer) {\r\n        canvas.width = innerWidth;\r\n        canvas.height = innerHeight - header.getBoundingClientRect().height - footer.getBoundingClientRect().height - 7;\r\n        mouse.draw();\r\n        grid.draw(ctx, canvas);\r\n    }\r\n})\r\n"],"names":["a","g","t","e","TypeError","c","o","length","s","enumerable","configurable","writable","Object","defineProperty","key","i","arguments","r","n","this","x","y","ctx","canvas","color","font","setPos","bind","prototype","h","value","addEventListener","removeEventListener","getBoundingClientRect","Math","floor","clientX","left","clientY","top","concat","save","fillStyle","width","measureText","v","height","fillText","restore","d","f","b","l","lineWidth","startX","startY","endX","endY","beginPath","strokeStyle","moveTo","lineTo","stroke","j","step","boldNth","boldColor","boldWidth","lines","push","$","createLines","forEach","draw","drawText","Mouse","Grid","$c0e850328e6b509c$exports","$cfae44f0dfdf62c0$var$cachedSetTimeout","$cfae44f0dfdf62c0$var$cachedClearTimeout","$cfae44f0dfdf62c0$var$process","$cfae44f0dfdf62c0$exports","$cfae44f0dfdf62c0$var$defaultSetTimout","Error","$cfae44f0dfdf62c0$var$defaultClearTimeout","$cfae44f0dfdf62c0$var$runTimeout","fun","setTimeout","e1","call","clearTimeout","$cfae44f0dfdf62c0$var$currentQueue","$cfae44f0dfdf62c0$var$queue","$cfae44f0dfdf62c0$var$draining","$cfae44f0dfdf62c0$var$queueIndex","$cfae44f0dfdf62c0$var$cleanUpNextTick","$cfae44f0dfdf62c0$var$drainQueue","timeout","len","run","marker","$cfae44f0dfdf62c0$var$runClearTimeout","$cfae44f0dfdf62c0$var$Item","array","$cfae44f0dfdf62c0$var$noop","$3bfdb7183e8721d6$var$assertPath","path","JSON","stringify","$3bfdb7183e8721d6$var$normalizeStringPosix","allowAboveRoot","code","res","lastSegmentLength","lastSlash","dots","charCodeAt","lastSlashIndex","lastIndexOf","slice","nextTick","args","Array","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","$3bfdb7183e8721d6$var$posix","resolve","resolvedPath","resolvedAbsolute","undefined","normalize","isAbsolute","trailingSeparator","join","joined","arg","relative","from","to","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","out","_makeLong","dirname","hasRoot","end","matchedSlash","basename","ext","start","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","format","pathObject","sep","root","base","$3bfdb7183e8721d6$var$_format","parse","ret","delimiter","win32","posix","$b4e14b6b8da86996$var$body","document","getElementsByTagName","$b4e14b6b8da86996$var$uploadFileEle","getElementById","$b4e14b6b8da86996$var$uploadButton","$b4e14b6b8da86996$var$padsField","$b4e14b6b8da86996$var$coordsField","$b4e14b6b8da86996$var$dropZone","$b4e14b6b8da86996$var$canvas","$b4e14b6b8da86996$var$progress","$b4e14b6b8da86996$var$progressbar","$b4e14b6b8da86996$var$header","$b4e14b6b8da86996$var$footer","$b4e14b6b8da86996$var$mouse","$b4e14b6b8da86996$var$grid","$b4e14b6b8da86996$var$pcb","$b4e14b6b8da86996$var$ctx","$b4e14b6b8da86996$var$floatFracts","$b4e14b6b8da86996$var$floatDezis","$b4e14b6b8da86996$var$lastPad","$b4e14b6b8da86996$export$138f967feff4fb19","constructor","form","w","$b4e14b6b8da86996$export$4b43d51f29457384","style","posX","posY","$b4e14b6b8da86996$export$bdf465113f979d8f","fileName","mouseFlag","mouseStartX","mouseStartY","mouseOffX","mouseOffY","zoom","mapStyles","Map","mapPads","padstyle","keys","sty","get","padset","sw","sh","pad","values","fillRect","console","log","arc","fill","addPadStyle","set","addPad","has","Set","add","mouseDown","event","mouseUp","mouseMove","mouseWheel","deltaY","$b4e14b6b8da86996$var$update","window","requestAnimationFrame","clearRect","$b4e14b6b8da86996$var$processGerberFile","file","arrayBuffer","then","buf","encoding","callback","blob","reader","text","innerHTML","innerText","async","display","replace","split","lineNr","line","$b4e14b6b8da86996$var$processGerberFileLine","$b4e14b6b8da86996$var$processGerberFile2","Blob","type","FileReader","onload","evt","target","result","readAsText","Promise","matchNumFormat","match","parseInt","matchPad","parseFloat","matchPadCoord","matchPadCoordInit","sx","sy","fx","fy","substring","getContext","onclick","files","size","alert","ondrop","ev","preventDefault","dataTransfer","items","item","kind","getAsFile","ondragover","innerWidth","innerHeight","track","error","val"],"version":3,"file":"index.0565037d.js.map"}